{"/home/travis/build/npmtest/node-npmtest-applicationinsights/test.js":{"path":"/home/travis/build/npmtest/node-npmtest-applicationinsights/test.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":1,"12":1,"13":1,"14":1,"15":2,"16":2,"17":2,"18":2,"19":1,"20":1,"21":2,"22":2,"23":2,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":2,"38":2,"39":1,"40":2,"41":2,"42":1,"43":2,"44":2,"45":1,"46":2,"47":2,"48":1,"49":1,"50":1,"51":1,"52":1},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[1,1],"5":[1,1],"6":[1,1],"7":[1,1],"8":[1,1],"9":[1,1,1],"10":[1,1],"11":[1,1],"12":[1,1],"13":[1,1],"14":[1,1],"15":[1,1],"16":[1,1]},"f":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":1,"7":1,"8":2,"9":2,"10":2,"11":2,"12":1},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":1},"end":{"line":12,"column":13}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":5},"end":{"line":19,"column":17}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":24},"end":{"line":23,"column":36}}},"4":{"name":"(anonymous_4)","line":61,"loc":{"start":{"line":61,"column":5},"end":{"line":61,"column":17}}},"5":{"name":"(anonymous_5)","line":82,"loc":{"start":{"line":82,"column":5},"end":{"line":82,"column":17}}},"6":{"name":"(anonymous_6)","line":102,"loc":{"start":{"line":102,"column":83},"end":{"line":105,"column":10}},"skip":true},"7":{"name":"(anonymous_7)","line":113,"loc":{"start":{"line":113,"column":77},"end":{"line":116,"column":10}},"skip":true},"8":{"name":"(anonymous_8)","line":129,"loc":{"start":{"line":129,"column":12},"end":{"line":129,"column":40}},"skip":true},"9":{"name":"(anonymous_9)","line":137,"loc":{"start":{"line":137,"column":77},"end":{"line":140,"column":10}},"skip":true},"10":{"name":"(anonymous_10)","line":148,"loc":{"start":{"line":148,"column":83},"end":{"line":151,"column":10}},"skip":true},"11":{"name":"(anonymous_11)","line":159,"loc":{"start":{"line":159,"column":79},"end":{"line":162,"column":10}},"skip":true},"12":{"name":"(anonymous_12)","line":170,"loc":{"start":{"line":170,"column":75},"end":{"line":173,"column":10}},"skip":true}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":185,"column":5}},"2":{"start":{"line":14,"column":4},"end":{"line":14,"column":14}},"3":{"start":{"line":19,"column":4},"end":{"line":56,"column":9}},"4":{"start":{"line":21,"column":8},"end":{"line":21,"column":19}},"5":{"start":{"line":23,"column":8},"end":{"line":35,"column":13}},"6":{"start":{"line":24,"column":12},"end":{"line":34,"column":13}},"7":{"start":{"line":25,"column":16},"end":{"line":28,"column":30}},"8":{"start":{"line":30,"column":16},"end":{"line":33,"column":27}},"9":{"start":{"line":37,"column":8},"end":{"line":39,"column":21}},"10":{"start":{"line":40,"column":8},"end":{"line":53,"column":9}},"11":{"start":{"line":43,"column":12},"end":{"line":46,"column":14}},"12":{"start":{"line":47,"column":12},"end":{"line":47,"column":18}},"13":{"start":{"line":50,"column":12},"end":{"line":51,"column":46}},"14":{"start":{"line":52,"column":12},"end":{"line":52,"column":18}},"15":{"start":{"line":55,"column":8},"end":{"line":55,"column":35}},"16":{"start":{"line":61,"column":4},"end":{"line":63,"column":9}},"17":{"start":{"line":62,"column":8},"end":{"line":62,"column":15}},"18":{"start":{"line":64,"column":4},"end":{"line":77,"column":5}},"19":{"start":{"line":70,"column":8},"end":{"line":70,"column":14}},"20":{"start":{"line":76,"column":8},"end":{"line":76,"column":14}},"21":{"start":{"line":82,"column":4},"end":{"line":84,"column":9}},"22":{"start":{"line":83,"column":8},"end":{"line":83,"column":15}},"23":{"start":{"line":85,"column":4},"end":{"line":184,"column":5}},"24":{"start":{"line":92,"column":8},"end":{"line":94,"column":63}},"25":{"start":{"line":95,"column":8},"end":{"line":95,"column":14}},"26":{"start":{"line":102,"column":8},"end":{"line":111,"column":10},"skip":true},"27":{"start":{"line":109,"column":12},"end":{"line":109,"column":55},"skip":true},"28":{"start":{"line":110,"column":12},"end":{"line":110,"column":48},"skip":true},"29":{"start":{"line":113,"column":8},"end":{"line":126,"column":10},"skip":true},"30":{"start":{"line":120,"column":12},"end":{"line":120,"column":76},"skip":true},"31":{"start":{"line":121,"column":12},"end":{"line":121,"column":73},"skip":true},"32":{"start":{"line":122,"column":12},"end":{"line":122,"column":74},"skip":true},"33":{"start":{"line":123,"column":12},"end":{"line":123,"column":79},"skip":true},"34":{"start":{"line":124,"column":12},"end":{"line":124,"column":25},"skip":true},"35":{"start":{"line":125,"column":12},"end":{"line":125,"column":45},"skip":true},"36":{"start":{"line":128,"column":8},"end":{"line":135,"column":14},"skip":true},"37":{"start":{"line":133,"column":16},"end":{"line":133,"column":29},"skip":true},"38":{"start":{"line":134,"column":16},"end":{"line":134,"column":55},"skip":true},"39":{"start":{"line":137,"column":8},"end":{"line":146,"column":10},"skip":true},"40":{"start":{"line":144,"column":12},"end":{"line":144,"column":25},"skip":true},"41":{"start":{"line":145,"column":12},"end":{"line":145,"column":45},"skip":true},"42":{"start":{"line":148,"column":8},"end":{"line":157,"column":10},"skip":true},"43":{"start":{"line":155,"column":12},"end":{"line":155,"column":25},"skip":true},"44":{"start":{"line":156,"column":12},"end":{"line":156,"column":48},"skip":true},"45":{"start":{"line":159,"column":8},"end":{"line":168,"column":10},"skip":true},"46":{"start":{"line":166,"column":12},"end":{"line":166,"column":25},"skip":true},"47":{"start":{"line":167,"column":12},"end":{"line":167,"column":46},"skip":true},"48":{"start":{"line":170,"column":8},"end":{"line":179,"column":10},"skip":true},"49":{"start":{"line":177,"column":12},"end":{"line":177,"column":94},"skip":true},"50":{"start":{"line":178,"column":12},"end":{"line":178,"column":48},"skip":true},"51":{"start":{"line":182,"column":8},"end":{"line":182,"column":35},"skip":true},"52":{"start":{"line":183,"column":8},"end":{"line":183,"column":14},"skip":true}},"branchMap":{"1":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":23},"end":{"line":25,"column":62}},{"start":{"line":26,"column":20},"end":{"line":26,"column":70}},{"start":{"line":27,"column":20},"end":{"line":27,"column":71}},{"start":{"line":28,"column":20},"end":{"line":28,"column":29}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":23},"end":{"line":30,"column":37}},{"start":{"line":31,"column":20},"end":{"line":31,"column":61}},{"start":{"line":32,"column":20},"end":{"line":32,"column":70}},{"start":{"line":33,"column":20},"end":{"line":33,"column":26}}]},"3":{"line":37,"type":"cond-expr","locations":[{"start":{"line":38,"column":14},"end":{"line":38,"column":20}},{"start":{"line":39,"column":14},"end":{"line":39,"column":20}}]},"4":{"line":40,"type":"switch","locations":[{"start":{"line":42,"column":8},"end":{"line":47,"column":18}},{"start":{"line":49,"column":8},"end":{"line":52,"column":18}}]},"5":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":16},"end":{"line":44,"column":44}},{"start":{"line":44,"column":48},"end":{"line":44,"column":66}}]},"6":{"line":50,"type":"binary-expr","locations":[{"start":{"line":50,"column":21},"end":{"line":50,"column":49}},{"start":{"line":50,"column":53},"end":{"line":50,"column":72}}]},"7":{"line":64,"type":"switch","locations":[{"start":{"line":69,"column":4},"end":{"line":70,"column":14}},{"start":{"line":75,"column":4},"end":{"line":76,"column":14}}]},"8":{"line":85,"type":"switch","locations":[{"start":{"line":90,"column":4},"end":{"line":95,"column":14}},{"start":{"line":101,"column":4},"end":{"line":183,"column":14},"skip":true}]},"9":{"line":92,"type":"binary-expr","locations":[{"start":{"line":92,"column":18},"end":{"line":92,"column":32}},{"start":{"line":93,"column":12},"end":{"line":93,"column":53}},{"start":{"line":94,"column":12},"end":{"line":94,"column":61}}]},"10":{"line":102,"type":"binary-expr","locations":[{"start":{"line":102,"column":45},"end":{"line":102,"column":79},"skip":true},{"start":{"line":102,"column":83},"end":{"line":111,"column":9},"skip":true}]},"11":{"line":113,"type":"binary-expr","locations":[{"start":{"line":113,"column":42},"end":{"line":113,"column":73},"skip":true},{"start":{"line":113,"column":77},"end":{"line":126,"column":9},"skip":true}]},"12":{"line":128,"type":"binary-expr","locations":[{"start":{"line":128,"column":48},"end":{"line":128,"column":85},"skip":true},{"start":{"line":129,"column":12},"end":{"line":135,"column":13},"skip":true}]},"13":{"line":137,"type":"binary-expr","locations":[{"start":{"line":137,"column":42},"end":{"line":137,"column":73},"skip":true},{"start":{"line":137,"column":77},"end":{"line":146,"column":9},"skip":true}]},"14":{"line":148,"type":"binary-expr","locations":[{"start":{"line":148,"column":45},"end":{"line":148,"column":79},"skip":true},{"start":{"line":148,"column":83},"end":{"line":157,"column":9},"skip":true}]},"15":{"line":159,"type":"binary-expr","locations":[{"start":{"line":159,"column":43},"end":{"line":159,"column":75},"skip":true},{"start":{"line":159,"column":79},"end":{"line":168,"column":9},"skip":true}]},"16":{"line":170,"type":"binary-expr","locations":[{"start":{"line":170,"column":41},"end":{"line":170,"column":71},"skip":true},{"start":{"line":170,"column":75},"end":{"line":179,"column":9},"skip":true}]}},"code":["/* istanbul instrument in package npmtest_applicationinsights */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        switch (local.modeJs) {","        // re-init local from window.local","        case 'browser':","            local = local.global.utility2.objectSetDefault(","                local.global.utility2_rollup || local.global.local,","                local.global.utility2","            );","            break;","        // re-init local from example.js","        case 'node':","            local = (local.global.utility2_rollup || require('utility2'))","                .requireExampleJsFromReadme();","            break;","        }","        // export local","        local.global.local = local;","    }());","","","","    // run shared js-env code - function","    (function () {","        return;","    }());","    switch (local.modeJs) {","","","","    // run browser js-env code - function","    case 'browser':","        break;","","","","    // run node js-env code - function","    case 'node':","        break;","    }","","","","    // run shared js-env code - post-init","    (function () {","        return;","    }());","    switch (local.modeJs) {","","","","    // run browser js-env code - post-init","    case 'browser':","        // run tests","        local.nop(local.modeTest &&","            document.querySelector('#testRunButton1') &&","            document.querySelector('#testRunButton1').click());","        break;","","","","    // run node js-env code - post-init","    /* istanbul ignore next */","    case 'node':","        local.testCase_buildApidoc_default = local.testCase_buildApidoc_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildApidoc's default handling-behavior-behavior","         */","            options = { modulePathList: module.paths };","            local.buildApidoc(options, onError);","        };","","        local.testCase_buildApp_default = local.testCase_buildApp_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildApp's default handling-behavior-behavior","         */","            local.testCase_buildReadme_default(options, local.onErrorThrow);","            local.testCase_buildLib_default(options, local.onErrorThrow);","            local.testCase_buildTest_default(options, local.onErrorThrow);","            local.testCase_buildCustomOrg_default(options, local.onErrorThrow);","            options = [];","            local.buildApp(options, onError);","        };","","        local.testCase_buildCustomOrg_default = local.testCase_buildCustomOrg_default ||","            function (options, onError) {","            /*","             * this function will test buildCustomOrg's default handling-behavior","             */","                options = {};","                local.buildCustomOrg(options, onError);","            };","","        local.testCase_buildLib_default = local.testCase_buildLib_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildLib's default handling-behavior","         */","            options = {};","            local.buildLib(options, onError);","        };","","        local.testCase_buildReadme_default = local.testCase_buildReadme_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildReadme's default handling-behavior-behavior","         */","            options = {};","            local.buildReadme(options, onError);","        };","","        local.testCase_buildTest_default = local.testCase_buildTest_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildTest's default handling-behavior","         */","            options = {};","            local.buildTest(options, onError);","        };","","        local.testCase_webpage_default = local.testCase_webpage_default || function (","            options,","            onError","        ) {","        /*","         * this function will test webpage's default handling-behavior","         */","            options = { modeCoverageMerge: true, url: local.serverLocalHost + '?modeTest=1' };","            local.browserTest(options, onError);","        };","","        // run test-server","        local.testRunServer(local);","        break;","    }","}());",""],"l":{"12":2,"14":2,"19":2,"21":2,"23":2,"24":2,"25":2,"30":1,"37":2,"40":2,"43":1,"47":1,"50":1,"52":1,"55":2,"61":2,"62":2,"64":2,"70":1,"76":1,"82":2,"83":2,"85":2,"92":1,"95":1,"102":1,"109":1,"110":1,"113":1,"120":1,"121":1,"122":1,"123":1,"124":1,"125":1,"128":1,"133":2,"134":2,"137":1,"144":2,"145":2,"148":1,"155":2,"156":2,"159":1,"166":2,"167":2,"170":1,"177":1,"178":1,"182":1,"183":1}},"/home/travis/build/npmtest/node-npmtest-applicationinsights/lib.npmtest_applicationinsights.js":{"path":"/home/travis/build/npmtest/node-npmtest-applicationinsights/lib.npmtest_applicationinsights.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1,"14":1,"15":1,"16":1},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[2,2],"5":[1,1]},"f":{"1":2,"2":2,"3":2},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":1},"end":{"line":12,"column":13}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":5},"end":{"line":19,"column":17}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":24},"end":{"line":23,"column":36}}}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":53,"column":5}},"2":{"start":{"line":14,"column":4},"end":{"line":14,"column":14}},"3":{"start":{"line":19,"column":4},"end":{"line":52,"column":9}},"4":{"start":{"line":21,"column":8},"end":{"line":21,"column":19}},"5":{"start":{"line":23,"column":8},"end":{"line":35,"column":13}},"6":{"start":{"line":24,"column":12},"end":{"line":34,"column":13}},"7":{"start":{"line":25,"column":16},"end":{"line":28,"column":30}},"8":{"start":{"line":30,"column":16},"end":{"line":33,"column":27}},"9":{"start":{"line":37,"column":8},"end":{"line":39,"column":21}},"10":{"start":{"line":41,"column":8},"end":{"line":41,"column":54}},"11":{"start":{"line":43,"column":8},"end":{"line":43,"column":64}},"12":{"start":{"line":45,"column":8},"end":{"line":51,"column":9}},"13":{"start":{"line":46,"column":12},"end":{"line":46,"column":70}},"14":{"start":{"line":48,"column":12},"end":{"line":48,"column":35}},"15":{"start":{"line":49,"column":12},"end":{"line":49,"column":49}},"16":{"start":{"line":50,"column":12},"end":{"line":50,"column":43}}},"branchMap":{"1":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":23},"end":{"line":25,"column":62}},{"start":{"line":26,"column":20},"end":{"line":26,"column":70}},{"start":{"line":27,"column":20},"end":{"line":27,"column":71}},{"start":{"line":28,"column":20},"end":{"line":28,"column":29}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":23},"end":{"line":30,"column":37}},{"start":{"line":31,"column":20},"end":{"line":31,"column":61}},{"start":{"line":32,"column":20},"end":{"line":32,"column":70}},{"start":{"line":33,"column":20},"end":{"line":33,"column":26}}]},"3":{"line":37,"type":"cond-expr","locations":[{"start":{"line":38,"column":14},"end":{"line":38,"column":20}},{"start":{"line":39,"column":14},"end":{"line":39,"column":20}}]},"4":{"line":41,"type":"binary-expr","locations":[{"start":{"line":41,"column":16},"end":{"line":41,"column":44}},{"start":{"line":41,"column":48},"end":{"line":41,"column":53}}]},"5":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":8},"end":{"line":45,"column":8}},{"start":{"line":45,"column":8},"end":{"line":45,"column":8}}]}},"code":["/* istanbul instrument in package npmtest_applicationinsights */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        // init utility2_rollup","        local = local.global.utility2_rollup || local;","        // init lib","        local.local = local.npmtest_applicationinsights = local;","        // init exports","        if (local.modeJs === 'browser') {","            local.global.utility2_npmtest_applicationinsights = local;","        } else {","            module.exports = local;","            module.exports.__dirname = __dirname;","            module.exports.module = module;","        }","    }());","}());",""],"l":{"12":2,"14":2,"19":2,"21":2,"23":2,"24":2,"25":2,"30":1,"37":2,"41":2,"43":2,"45":2,"46":1,"48":1,"49":1,"50":1}},"/home/travis/build/npmtest/node-npmtest-applicationinsights/example.js":{"path":"/home/travis/build/npmtest/node-npmtest-applicationinsights/example.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1,"14":2,"15":2,"16":2,"17":2,"18":2,"19":0,"20":2,"21":1,"22":1,"23":1,"24":1,"25":1,"26":0,"27":0,"28":1,"29":1,"30":2,"31":0,"32":0,"33":0,"34":1,"35":2,"36":2,"37":2,"38":2,"39":2,"40":2,"41":0,"42":2,"43":2,"44":2,"45":1,"46":3,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":0,"58":1,"59":6,"60":6,"61":1,"62":2,"63":0,"64":2,"65":1,"66":1,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[2,2],"5":[1,1],"6":[1,1],"7":[2,0],"8":[2,1,1,1,1,1],"9":[0,2,0],"10":[1,1],"11":[2,1,1],"12":[1,0],"13":[0,2],"14":[2,0,0,0,0,0,0],"15":[0,2],"16":[2,0],"17":[1,1],"18":[0,1],"19":[1,2,0,2],"20":[1,0],"21":[1,1],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0]},"f":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":2,"9":3,"10":1,"11":6,"12":0},"fnMap":{"1":{"name":"(anonymous_1)","line":26,"loc":{"start":{"line":26,"column":1},"end":{"line":26,"column":13}}},"2":{"name":"(anonymous_2)","line":33,"loc":{"start":{"line":33,"column":5},"end":{"line":33,"column":17}}},"3":{"name":"(anonymous_3)","line":37,"loc":{"start":{"line":37,"column":24},"end":{"line":37,"column":36}}},"4":{"name":"(anonymous_4)","line":69,"loc":{"start":{"line":69,"column":31},"end":{"line":69,"column":48}},"skip":true},"5":{"name":"(anonymous_5)","line":78,"loc":{"start":{"line":78,"column":26},"end":{"line":78,"column":45}},"skip":true},"6":{"name":"(anonymous_6)","line":123,"loc":{"start":{"line":123,"column":33},"end":{"line":123,"column":48}},"skip":true},"7":{"name":"(anonymous_7)","line":125,"loc":{"start":{"line":125,"column":27},"end":{"line":125,"column":39}},"skip":true},"8":{"name":"(anonymous_8)","line":133,"loc":{"start":{"line":133,"column":59},"end":{"line":133,"column":74}},"skip":true},"9":{"name":"(anonymous_9)","line":143,"loc":{"start":{"line":143,"column":45},"end":{"line":143,"column":62}},"skip":true},"10":{"name":"(anonymous_10)","line":144,"loc":{"start":{"line":144,"column":73},"end":{"line":144,"column":92}},"skip":true},"11":{"name":"(anonymous_11)","line":272,"loc":{"start":{"line":272,"column":51},"end":{"line":272,"column":77}},"skip":true},"12":{"name":"(anonymous_12)","line":314,"loc":{"start":{"line":314,"column":32},"end":{"line":314,"column":61}},"skip":true}},"statementMap":{"1":{"start":{"line":26,"column":0},"end":{"line":325,"column":5}},"2":{"start":{"line":28,"column":4},"end":{"line":28,"column":14}},"3":{"start":{"line":33,"column":4},"end":{"line":60,"column":9}},"4":{"start":{"line":35,"column":8},"end":{"line":35,"column":19}},"5":{"start":{"line":37,"column":8},"end":{"line":49,"column":13}},"6":{"start":{"line":38,"column":12},"end":{"line":48,"column":13}},"7":{"start":{"line":39,"column":16},"end":{"line":42,"column":30}},"8":{"start":{"line":44,"column":16},"end":{"line":47,"column":27}},"9":{"start":{"line":51,"column":8},"end":{"line":53,"column":21}},"10":{"start":{"line":55,"column":8},"end":{"line":57,"column":45}},"11":{"start":{"line":59,"column":8},"end":{"line":59,"column":35}},"12":{"start":{"line":61,"column":4},"end":{"line":324,"column":5}},"13":{"start":{"line":69,"column":8},"end":{"line":121,"column":10},"skip":true},"14":{"start":{"line":70,"column":12},"end":{"line":88,"column":13},"skip":true},"15":{"start":{"line":76,"column":16},"end":{"line":87,"column":19},"skip":true},"16":{"start":{"line":79,"column":20},"end":{"line":86,"column":21},"skip":true},"17":{"start":{"line":82,"column":24},"end":{"line":82,"column":43},"skip":true},"18":{"start":{"line":83,"column":24},"end":{"line":83,"column":30},"skip":true},"19":{"start":{"line":85,"column":24},"end":{"line":85,"column":49},"skip":true},"20":{"start":{"line":89,"column":12},"end":{"line":107,"column":13},"skip":true},"21":{"start":{"line":92,"column":16},"end":{"line":102,"column":17},"skip":true},"22":{"start":{"line":93,"column":20},"end":{"line":93,"column":86},"skip":true},"23":{"start":{"line":94,"column":20},"end":{"line":95,"column":45},"skip":true},"24":{"start":{"line":96,"column":20},"end":{"line":96,"column":42},"skip":true},"25":{"start":{"line":97,"column":20},"end":{"line":97,"column":48},"skip":true},"26":{"start":{"line":100,"column":20},"end":{"line":100,"column":85},"skip":true},"27":{"start":{"line":101,"column":20},"end":{"line":101,"column":96},"skip":true},"28":{"start":{"line":103,"column":16},"end":{"line":103,"column":22},"skip":true},"29":{"start":{"line":106,"column":16},"end":{"line":106,"column":22},"skip":true},"30":{"start":{"line":108,"column":12},"end":{"line":120,"column":13},"skip":true},"31":{"start":{"line":114,"column":16},"end":{"line":119,"column":17},"skip":true},"32":{"start":{"line":116,"column":20},"end":{"line":116,"column":78},"skip":true},"33":{"start":{"line":118,"column":20},"end":{"line":118,"column":47},"skip":true},"34":{"start":{"line":123,"column":8},"end":{"line":141,"column":11},"skip":true},"35":{"start":{"line":124,"column":12},"end":{"line":124,"column":54},"skip":true},"36":{"start":{"line":125,"column":12},"end":{"line":140,"column":14},"skip":true},"37":{"start":{"line":126,"column":16},"end":{"line":126,"column":28},"skip":true},"38":{"start":{"line":127,"column":16},"end":{"line":127,"column":69},"skip":true},"39":{"start":{"line":128,"column":16},"end":{"line":128,"column":75},"skip":true},"40":{"start":{"line":129,"column":16},"end":{"line":131,"column":17},"skip":true},"41":{"start":{"line":130,"column":20},"end":{"line":130,"column":27},"skip":true},"42":{"start":{"line":133,"column":16},"end":{"line":137,"column":36},"skip":true},"43":{"start":{"line":134,"column":20},"end":{"line":136,"column":55},"skip":true},"44":{"start":{"line":139,"column":16},"end":{"line":139,"column":57},"skip":true},"45":{"start":{"line":143,"column":8},"end":{"line":147,"column":11},"skip":true},"46":{"start":{"line":144,"column":12},"end":{"line":146,"column":15},"skip":true},"47":{"start":{"line":145,"column":16},"end":{"line":145,"column":70},"skip":true},"48":{"start":{"line":149,"column":8},"end":{"line":149,"column":31},"skip":true},"49":{"start":{"line":150,"column":8},"end":{"line":150,"column":14},"skip":true},"50":{"start":{"line":158,"column":8},"end":{"line":158,"column":31},"skip":true},"51":{"start":{"line":160,"column":8},"end":{"line":160,"column":33},"skip":true},"52":{"start":{"line":161,"column":8},"end":{"line":161,"column":37},"skip":true},"53":{"start":{"line":162,"column":8},"end":{"line":162,"column":35},"skip":true},"54":{"start":{"line":164,"column":8},"end":{"line":164,"column":50},"skip":true},"55":{"start":{"line":166,"column":8},"end":{"line":256,"column":2},"skip":true},"56":{"start":{"line":258,"column":8},"end":{"line":286,"column":9},"skip":true},"57":{"start":{"line":259,"column":12},"end":{"line":269,"column":14},"skip":true},"58":{"start":{"line":271,"column":12},"end":{"line":285,"column":19},"skip":true},"59":{"start":{"line":274,"column":20},"end":{"line":274,"column":35},"skip":true},"60":{"start":{"line":275,"column":20},"end":{"line":284,"column":21},"skip":true},"61":{"start":{"line":277,"column":24},"end":{"line":277,"column":64},"skip":true},"62":{"start":{"line":279,"column":24},"end":{"line":279,"column":40},"skip":true},"63":{"start":{"line":281,"column":24},"end":{"line":281,"column":40},"skip":true},"64":{"start":{"line":283,"column":24},"end":{"line":283,"column":39},"skip":true},"65":{"start":{"line":288,"column":8},"end":{"line":290,"column":9},"skip":true},"66":{"start":{"line":289,"column":12},"end":{"line":289,"column":18},"skip":true},"67":{"start":{"line":291,"column":8},"end":{"line":293,"column":54},"skip":true},"68":{"start":{"line":294,"column":8},"end":{"line":301,"column":37},"skip":true},"69":{"start":{"line":302,"column":8},"end":{"line":302,"column":82},"skip":true},"70":{"start":{"line":305,"column":8},"end":{"line":307,"column":9},"skip":true},"71":{"start":{"line":306,"column":12},"end":{"line":306,"column":82},"skip":true},"72":{"start":{"line":309,"column":8},"end":{"line":311,"column":9},"skip":true},"73":{"start":{"line":310,"column":12},"end":{"line":310,"column":18},"skip":true},"74":{"start":{"line":312,"column":8},"end":{"line":312,"column":54},"skip":true},"75":{"start":{"line":313,"column":8},"end":{"line":313,"column":69},"skip":true},"76":{"start":{"line":314,"column":8},"end":{"line":322,"column":36},"skip":true},"77":{"start":{"line":315,"column":12},"end":{"line":315,"column":61},"skip":true},"78":{"start":{"line":316,"column":12},"end":{"line":319,"column":13},"skip":true},"79":{"start":{"line":317,"column":16},"end":{"line":317,"column":75},"skip":true},"80":{"start":{"line":318,"column":16},"end":{"line":318,"column":23},"skip":true},"81":{"start":{"line":320,"column":12},"end":{"line":320,"column":38},"skip":true},"82":{"start":{"line":321,"column":12},"end":{"line":321,"column":27},"skip":true},"83":{"start":{"line":323,"column":8},"end":{"line":323,"column":14},"skip":true}},"branchMap":{"1":{"line":39,"type":"binary-expr","locations":[{"start":{"line":39,"column":23},"end":{"line":39,"column":62}},{"start":{"line":40,"column":20},"end":{"line":40,"column":70}},{"start":{"line":41,"column":20},"end":{"line":41,"column":71}},{"start":{"line":42,"column":20},"end":{"line":42,"column":29}}]},"2":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":23},"end":{"line":44,"column":37}},{"start":{"line":45,"column":20},"end":{"line":45,"column":61}},{"start":{"line":46,"column":20},"end":{"line":46,"column":70}},{"start":{"line":47,"column":20},"end":{"line":47,"column":26}}]},"3":{"line":51,"type":"cond-expr","locations":[{"start":{"line":52,"column":14},"end":{"line":52,"column":20}},{"start":{"line":53,"column":14},"end":{"line":53,"column":20}}]},"4":{"line":55,"type":"binary-expr","locations":[{"start":{"line":55,"column":16},"end":{"line":55,"column":44}},{"start":{"line":55,"column":49},"end":{"line":57,"column":43}}]},"5":{"line":55,"type":"cond-expr","locations":[{"start":{"line":56,"column":14},"end":{"line":56,"column":63}},{"start":{"line":57,"column":14},"end":{"line":57,"column":43}}]},"6":{"line":61,"type":"switch","locations":[{"start":{"line":68,"column":4},"end":{"line":150,"column":14},"skip":true},{"start":{"line":156,"column":4},"end":{"line":323,"column":14},"skip":true}]},"7":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":12},"end":{"line":70,"column":12},"skip":true},{"start":{"line":70,"column":12},"end":{"line":70,"column":12},"skip":true}]},"8":{"line":70,"type":"binary-expr","locations":[{"start":{"line":70,"column":16},"end":{"line":70,"column":22},"skip":true},{"start":{"line":70,"column":27},"end":{"line":70,"column":32},"skip":true},{"start":{"line":71,"column":20},"end":{"line":71,"column":39},"skip":true},{"start":{"line":72,"column":20},"end":{"line":72,"column":49},"skip":true},{"start":{"line":73,"column":20},"end":{"line":73,"column":58},"skip":true},{"start":{"line":74,"column":20},"end":{"line":74,"column":69},"skip":true}]},"9":{"line":79,"type":"switch","locations":[{"start":{"line":80,"column":20},"end":{"line":80,"column":33},"skip":true},{"start":{"line":81,"column":20},"end":{"line":83,"column":30},"skip":true},{"start":{"line":84,"column":20},"end":{"line":85,"column":49},"skip":true}]},"10":{"line":89,"type":"switch","locations":[{"start":{"line":90,"column":12},"end":{"line":103,"column":22},"skip":true},{"start":{"line":105,"column":12},"end":{"line":106,"column":22},"skip":true}]},"11":{"line":89,"type":"binary-expr","locations":[{"start":{"line":89,"column":20},"end":{"line":89,"column":25},"skip":true},{"start":{"line":89,"column":29},"end":{"line":89,"column":48},"skip":true},{"start":{"line":89,"column":52},"end":{"line":89,"column":74},"skip":true}]},"12":{"line":92,"type":"if","locations":[{"start":{"line":92,"column":16},"end":{"line":92,"column":16},"skip":true},{"start":{"line":92,"column":16},"end":{"line":92,"column":16},"skip":true}]},"13":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":12},"end":{"line":108,"column":12},"skip":true},{"start":{"line":108,"column":12},"end":{"line":108,"column":12},"skip":true}]},"14":{"line":108,"type":"binary-expr","locations":[{"start":{"line":108,"column":16},"end":{"line":108,"column":61},"skip":true},{"start":{"line":108,"column":66},"end":{"line":108,"column":72},"skip":true},{"start":{"line":108,"column":77},"end":{"line":108,"column":82},"skip":true},{"start":{"line":109,"column":20},"end":{"line":109,"column":39},"skip":true},{"start":{"line":110,"column":20},"end":{"line":110,"column":49},"skip":true},{"start":{"line":111,"column":20},"end":{"line":111,"column":58},"skip":true},{"start":{"line":112,"column":20},"end":{"line":112,"column":68},"skip":true}]},"15":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":16},"end":{"line":129,"column":16},"skip":true},{"start":{"line":129,"column":16},"end":{"line":129,"column":16},"skip":true}]},"16":{"line":134,"type":"cond-expr","locations":[{"start":{"line":135,"column":26},"end":{"line":135,"column":29},"skip":true},{"start":{"line":136,"column":26},"end":{"line":136,"column":54},"skip":true}]},"17":{"line":164,"type":"binary-expr","locations":[{"start":{"line":164,"column":27},"end":{"line":164,"column":43},"skip":true},{"start":{"line":164,"column":47},"end":{"line":164,"column":49},"skip":true}]},"18":{"line":258,"type":"if","locations":[{"start":{"line":258,"column":8},"end":{"line":258,"column":8},"skip":true},{"start":{"line":258,"column":8},"end":{"line":258,"column":8},"skip":true}]},"19":{"line":275,"type":"switch","locations":[{"start":{"line":276,"column":20},"end":{"line":277,"column":64},"skip":true},{"start":{"line":278,"column":20},"end":{"line":279,"column":40},"skip":true},{"start":{"line":280,"column":20},"end":{"line":281,"column":40},"skip":true},{"start":{"line":282,"column":20},"end":{"line":283,"column":39},"skip":true}]},"20":{"line":288,"type":"if","locations":[{"start":{"line":288,"column":8},"end":{"line":288,"column":8},"skip":true},{"start":{"line":288,"column":8},"end":{"line":288,"column":8},"skip":true}]},"21":{"line":288,"type":"binary-expr","locations":[{"start":{"line":288,"column":12},"end":{"line":288,"column":40},"skip":true},{"start":{"line":288,"column":44},"end":{"line":288,"column":67},"skip":true}]},"22":{"line":292,"type":"binary-expr","locations":[{"start":{"line":292,"column":12},"end":{"line":292,"column":50},"skip":true},{"start":{"line":293,"column":12},"end":{"line":293,"column":53},"skip":true}]},"23":{"line":295,"type":"binary-expr","locations":[{"start":{"line":295,"column":12},"end":{"line":295,"column":77},"skip":true},{"start":{"line":296,"column":12},"end":{"line":301,"column":36},"skip":true}]},"24":{"line":302,"type":"binary-expr","locations":[{"start":{"line":302,"column":43},"end":{"line":302,"column":75},"skip":true},{"start":{"line":302,"column":79},"end":{"line":302,"column":81},"skip":true}]},"25":{"line":305,"type":"if","locations":[{"start":{"line":305,"column":8},"end":{"line":305,"column":8},"skip":true},{"start":{"line":305,"column":8},"end":{"line":305,"column":8},"skip":true}]},"26":{"line":309,"type":"if","locations":[{"start":{"line":309,"column":8},"end":{"line":309,"column":8},"skip":true},{"start":{"line":309,"column":8},"end":{"line":309,"column":8},"skip":true}]},"27":{"line":312,"type":"binary-expr","locations":[{"start":{"line":312,"column":27},"end":{"line":312,"column":43},"skip":true},{"start":{"line":312,"column":47},"end":{"line":312,"column":53},"skip":true}]},"28":{"line":316,"type":"if","locations":[{"start":{"line":316,"column":12},"end":{"line":316,"column":12},"skip":true},{"start":{"line":316,"column":12},"end":{"line":316,"column":12},"skip":true}]}},"code":["/*","example.js","","quickstart example","","instruction","    1. save this script as example.js","    2. run the shell command:","        $ npm install npmtest-applicationinsights && PORT=8081 node example.js","    3. play with the browser-demo on http://127.0.0.1:8081","*/","","","","/* istanbul instrument in package npmtest_applicationinsights */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        // init utility2_rollup","        local = local.global.utility2_rollup || (local.modeJs === 'browser'","            ? local.global.utility2_npmtest_applicationinsights","            : global.utility2_moduleExports);","        // export local","        local.global.local = local;","    }());","    switch (local.modeJs) {","","","","    // post-init","    // run browser js-env code - post-init","    /* istanbul ignore next */","    case 'browser':","        local.testRunBrowser = function (event) {","            if (!event || (event &&","                    event.currentTarget &&","                    event.currentTarget.className &&","                    event.currentTarget.className.includes &&","                    event.currentTarget.className.includes('onreset'))) {","                // reset output","                Array.from(","                    document.querySelectorAll('body > .resettable')","                ).forEach(function (element) {","                    switch (element.tagName) {","                    case 'INPUT':","                    case 'TEXTAREA':","                        element.value = '';","                        break;","                    default:","                        element.textContent = '';","                    }","                });","            }","            switch (event && event.currentTarget && event.currentTarget.id) {","            case 'testRunButton1':","                // show tests","                if (document.querySelector('#testReportDiv1').style.display === 'none') {","                    document.querySelector('#testReportDiv1').style.display = 'block';","                    document.querySelector('#testRunButton1').textContent =","                        'hide internal test';","                    local.modeTest = true;","                    local.testRunDefault(local);","                // hide tests","                } else {","                    document.querySelector('#testReportDiv1').style.display = 'none';","                    document.querySelector('#testRunButton1').textContent = 'run internal test';","                }","                break;","            // custom-case","            default:","                break;","            }","            if (document.querySelector('#inputTextareaEval1') && (!event || (event &&","                    event.currentTarget &&","                    event.currentTarget.className &&","                    event.currentTarget.className.includes &&","                    event.currentTarget.className.includes('oneval')))) {","                // try to eval input-code","                try {","                    /*jslint evil: true*/","                    eval(document.querySelector('#inputTextareaEval1').value);","                } catch (errorCaught) {","                    console.error(errorCaught);","                }","            }","        };","        // log stderr and stdout to #outputTextareaStdout1","        ['error', 'log'].forEach(function (key) {","            console[key + '_original'] = console[key];","            console[key] = function () {","                var element;","                console[key + '_original'].apply(console, arguments);","                element = document.querySelector('#outputTextareaStdout1');","                if (!element) {","                    return;","                }","                // append text to #outputTextareaStdout1","                element.value += Array.from(arguments).map(function (arg) {","                    return typeof arg === 'string'","                        ? arg","                        : JSON.stringify(arg, null, 4);","                }).join(' ') + '\\n';","                // scroll textarea to bottom","                element.scrollTop = element.scrollHeight;","            };","        });","        // init event-handling","        ['change', 'click', 'keyup'].forEach(function (event) {","            Array.from(document.querySelectorAll('.on' + event)).forEach(function (element) {","                element.addEventListener(event, local.testRunBrowser);","            });","        });","        // run tests","        local.testRunBrowser();","        break;","","","","    // run node js-env code - post-init","    /* istanbul ignore next */","    case 'node':","        // export local","        module.exports = local;","        // require modules","        local.fs = require('fs');","        local.http = require('http');","        local.url = require('url');","        // init assets","        local.assetsDict = local.assetsDict || {};","        /* jslint-ignore-begin */","        local.assetsDict['/assets.index.template.html'] = '\\","<!doctype html>\\n\\","<html lang=\"en\">\\n\\","<head>\\n\\","<meta charset=\"UTF-8\">\\n\\","<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\\n\\","<title>{{env.npm_package_name}} (v{{env.npm_package_version}})</title>\\n\\","<style>\\n\\","/*csslint\\n\\","    box-sizing: false,\\n\\","    universal-selector: false\\n\\","*/\\n\\","* {\\n\\","    box-sizing: border-box;\\n\\","}\\n\\","body {\\n\\","    background: #dde;\\n\\","    font-family: Arial, Helvetica, sans-serif;\\n\\","    margin: 2rem;\\n\\","}\\n\\","body > * {\\n\\","    margin-bottom: 1rem;\\n\\","}\\n\\",".utility2FooterDiv {\\n\\","    margin-top: 20px;\\n\\","    text-align: center;\\n\\","}\\n\\","</style>\\n\\","<style>\\n\\","/*csslint\\n\\","*/\\n\\","textarea {\\n\\","    font-family: monospace;\\n\\","    height: 10rem;\\n\\","    width: 100%;\\n\\","}\\n\\","textarea[readonly] {\\n\\","    background: #ddd;\\n\\","}\\n\\","</style>\\n\\","</head>\\n\\","<body>\\n\\","<!-- utility2-comment\\n\\","<div id=\"ajaxProgressDiv1\" style=\"background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 0.5s, width 1.5s; width: 25%;\"></div>\\n\\","utility2-comment -->\\n\\","<h1>\\n\\","<!-- utility2-comment\\n\\","    <a\\n\\","        {{#if env.npm_package_homepage}}\\n\\","        href=\"{{env.npm_package_homepage}}\"\\n\\","        {{/if env.npm_package_homepage}}\\n\\","        target=\"_blank\"\\n\\","    >\\n\\","utility2-comment -->\\n\\","        {{env.npm_package_name}} (v{{env.npm_package_version}})\\n\\","<!-- utility2-comment\\n\\","    </a>\\n\\","utility2-comment -->\\n\\","</h1>\\n\\","<h3>{{env.npm_package_description}}</h3>\\n\\","<!-- utility2-comment\\n\\","<h4><a download href=\"assets.app.js\">download standalone app</a></h4>\\n\\","<button class=\"onclick onreset\" id=\"testRunButton1\">run internal test</button><br>\\n\\","<div id=\"testReportDiv1\" style=\"display: none;\"></div>\\n\\","utility2-comment -->\\n\\","\\n\\","\\n\\","\\n\\","<label>stderr and stdout</label>\\n\\","<textarea class=\"resettable\" id=\"outputTextareaStdout1\" readonly></textarea>\\n\\","<!-- utility2-comment\\n\\","{{#if isRollup}}\\n\\","<script src=\"assets.app.js\"></script>\\n\\","{{#unless isRollup}}\\n\\","utility2-comment -->\\n\\","<script src=\"assets.utility2.rollup.js\"></script>\\n\\","<script src=\"jsonp.utility2._stateInit?callback=window.utility2._stateInit\"></script>\\n\\","<script src=\"assets.npmtest_applicationinsights.rollup.js\"></script>\\n\\","<script src=\"assets.example.js\"></script>\\n\\","<script src=\"assets.test.js\"></script>\\n\\","<!-- utility2-comment\\n\\","{{/if isRollup}}\\n\\","utility2-comment -->\\n\\","<div class=\"utility2FooterDiv\">\\n\\","    [ this app was created with\\n\\","    <a href=\"https://github.com/kaizhu256/node-utility2\" target=\"_blank\">utility2</a>\\n\\","    ]\\n\\","</div>\\n\\","</body>\\n\\","</html>\\n\\","';","        /* jslint-ignore-end */","        if (local.templateRender) {","            local.assetsDict['/'] = local.templateRender(","                local.assetsDict['/assets.index.template.html'],","                {","                    env: local.objectSetDefault(local.env, {","                        npm_package_description: 'the greatest app in the world!',","                        npm_package_name: 'my-app',","                        npm_package_nameAlias: 'my_app',","                        npm_package_version: '0.0.1'","                    })","                }","            );","        } else {","            local.assetsDict['/'] = local.assetsDict['/assets.index.template.html']","                .replace((/\\{\\{env\\.(\\w+?)\\}\\}/g), function (match0, match1) {","                    // jslint-hack","                    String(match0);","                    switch (match1) {","                    case 'npm_package_description':","                        return 'the greatest app in the world!';","                    case 'npm_package_name':","                        return 'my-app';","                    case 'npm_package_nameAlias':","                        return 'my_app';","                    case 'npm_package_version':","                        return '0.0.1';","                    }","                });","        }","        // run the cli","        if (local.global.utility2_rollup || module !== require.main) {","            break;","        }","        local.assetsDict['/assets.example.js'] =","            local.assetsDict['/assets.example.js'] ||","            local.fs.readFileSync(__filename, 'utf8');","        local.assetsDict['/assets.npmtest_applicationinsights.rollup.js'] =","            local.assetsDict['/assets.npmtest_applicationinsights.rollup.js'] ||","            local.fs.readFileSync(","                // buildCustomOrg-hack","                local.npmtest_applicationinsights.__dirname +","                    '/lib.npmtest_applicationinsights.js',","                'utf8'","            ).replace((/^#!/), '//');","        local.assetsDict['/favicon.ico'] = local.assetsDict['/favicon.ico'] || '';","        // if $npm_config_timeout_exit exists,","        // then exit this process after $npm_config_timeout_exit ms","        if (Number(process.env.npm_config_timeout_exit)) {","            setTimeout(process.exit, Number(process.env.npm_config_timeout_exit));","        }","        // start server","        if (local.global.utility2_serverHttp1) {","            break;","        }","        process.env.PORT = process.env.PORT || '8081';","        console.error('server starting on port ' + process.env.PORT);","        local.http.createServer(function (request, response) {","            request.urlParsed = local.url.parse(request.url);","            if (local.assetsDict[request.urlParsed.pathname] !== undefined) {","                response.end(local.assetsDict[request.urlParsed.pathname]);","                return;","            }","            response.statusCode = 404;","            response.end();","        }).listen(process.env.PORT);","        break;","    }","}());",""],"l":{"26":2,"28":2,"33":2,"35":2,"37":2,"38":2,"39":2,"44":1,"51":2,"55":2,"59":2,"61":2,"69":1,"70":2,"76":2,"79":2,"82":2,"83":2,"85":1,"89":2,"92":1,"93":1,"94":1,"96":1,"97":1,"100":1,"101":1,"103":1,"106":1,"108":2,"114":1,"116":1,"118":1,"123":1,"124":2,"125":2,"126":2,"127":2,"128":2,"129":2,"130":1,"133":2,"134":2,"139":2,"143":1,"144":3,"145":1,"149":1,"150":1,"158":1,"160":1,"161":1,"162":1,"164":1,"166":1,"258":1,"259":1,"271":1,"274":6,"275":6,"277":1,"279":2,"281":1,"283":2,"288":1,"289":1,"291":1,"294":1,"302":1,"305":1,"306":1,"309":1,"310":1,"312":1,"313":1,"314":1,"315":1,"316":1,"317":1,"318":1,"320":1,"321":1,"323":1}},"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/applicationinsights.js":{"path":"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/applicationinsights.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":1,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":1,"37":0,"38":0,"39":0,"40":1,"41":0,"42":1,"43":0,"44":0,"45":0,"46":0,"47":1,"48":0,"49":0,"50":0,"51":0,"52":1,"53":0,"54":0,"55":0,"56":0,"57":1,"58":0,"59":0,"60":0,"61":0,"62":1,"63":0,"64":0,"65":0,"66":0,"67":1,"68":0,"69":0,"70":0,"71":0,"72":1,"73":0,"74":0,"75":0,"76":0,"77":1,"78":0,"79":0,"80":0,"81":0,"82":0,"83":1,"84":0,"85":0,"86":0,"87":1,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":1,"101":1,"102":1,"103":1,"104":1,"105":1,"106":1,"107":1,"108":1,"109":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0]},"f":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},"fnMap":{"1":{"name":"(anonymous_1)","line":14,"loc":{"start":{"line":14,"column":27},"end":{"line":14,"column":39}}},"2":{"name":"ApplicationInsights","line":15,"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":35}}},"3":{"name":"(anonymous_3)","line":22,"loc":{"start":{"line":22,"column":36},"end":{"line":22,"column":66}}},"4":{"name":"(anonymous_4)","line":31,"loc":{"start":{"line":31,"column":32},"end":{"line":31,"column":62}}},"5":{"name":"(anonymous_5)","line":52,"loc":{"start":{"line":52,"column":32},"end":{"line":52,"column":44}}},"6":{"name":"(anonymous_6)","line":78,"loc":{"start":{"line":78,"column":48},"end":{"line":78,"column":60}}},"7":{"name":"(anonymous_7)","line":88,"loc":{"start":{"line":88,"column":53},"end":{"line":88,"column":67}}},"8":{"name":"(anonymous_8)","line":96,"loc":{"start":{"line":96,"column":48},"end":{"line":96,"column":65}}},"9":{"name":"(anonymous_9)","line":108,"loc":{"start":{"line":108,"column":51},"end":{"line":108,"column":68}}},"10":{"name":"(anonymous_10)","line":120,"loc":{"start":{"line":120,"column":52},"end":{"line":120,"column":69}}},"11":{"name":"(anonymous_11)","line":132,"loc":{"start":{"line":132,"column":49},"end":{"line":132,"column":66}}},"12":{"name":"(anonymous_12)","line":144,"loc":{"start":{"line":144,"column":53},"end":{"line":144,"column":70}}},"13":{"name":"(anonymous_13)","line":156,"loc":{"start":{"line":156,"column":55},"end":{"line":156,"column":72}}},"14":{"name":"(anonymous_14)","line":169,"loc":{"start":{"line":169,"column":41},"end":{"line":169,"column":74}}},"15":{"name":"(anonymous_15)","line":180,"loc":{"start":{"line":180,"column":47},"end":{"line":180,"column":79}}},"16":{"name":"(anonymous_16)","line":189,"loc":{"start":{"line":189,"column":48},"end":{"line":189,"column":60}}},"17":{"name":"(anonymous_17)","line":197,"loc":{"start":{"line":197,"column":34},"end":{"line":197,"column":46}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":86}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":61}},"3":{"start":{"line":4,"column":0},"end":{"line":4,"column":67}},"4":{"start":{"line":5,"column":0},"end":{"line":5,"column":69}},"5":{"start":{"line":6,"column":0},"end":{"line":6,"column":75}},"6":{"start":{"line":7,"column":0},"end":{"line":7,"column":75}},"7":{"start":{"line":8,"column":0},"end":{"line":8,"column":41}},"8":{"start":{"line":9,"column":0},"end":{"line":9,"column":43}},"9":{"start":{"line":14,"column":0},"end":{"line":225,"column":5}},"10":{"start":{"line":15,"column":4},"end":{"line":16,"column":5}},"11":{"start":{"line":22,"column":4},"end":{"line":24,"column":6}},"12":{"start":{"line":23,"column":8},"end":{"line":23,"column":46}},"13":{"start":{"line":31,"column":4},"end":{"line":47,"column":6}},"14":{"start":{"line":32,"column":8},"end":{"line":42,"column":9}},"15":{"start":{"line":33,"column":12},"end":{"line":33,"column":91}},"16":{"start":{"line":34,"column":12},"end":{"line":34,"column":94}},"17":{"start":{"line":35,"column":12},"end":{"line":35,"column":100}},"18":{"start":{"line":36,"column":12},"end":{"line":36,"column":102}},"19":{"start":{"line":37,"column":12},"end":{"line":37,"column":108}},"20":{"start":{"line":38,"column":12},"end":{"line":38,"column":108}},"21":{"start":{"line":41,"column":12},"end":{"line":41,"column":64}},"22":{"start":{"line":43,"column":8},"end":{"line":45,"column":9}},"23":{"start":{"line":44,"column":12},"end":{"line":44,"column":98}},"24":{"start":{"line":46,"column":8},"end":{"line":46,"column":35}},"25":{"start":{"line":52,"column":4},"end":{"line":66,"column":6}},"26":{"start":{"line":53,"column":8},"end":{"line":64,"column":9}},"27":{"start":{"line":54,"column":12},"end":{"line":54,"column":50}},"28":{"start":{"line":55,"column":12},"end":{"line":55,"column":80}},"29":{"start":{"line":56,"column":12},"end":{"line":56,"column":86}},"30":{"start":{"line":57,"column":12},"end":{"line":57,"column":88}},"31":{"start":{"line":58,"column":12},"end":{"line":58,"column":103}},"32":{"start":{"line":59,"column":12},"end":{"line":59,"column":88}},"33":{"start":{"line":60,"column":12},"end":{"line":60,"column":92}},"34":{"start":{"line":63,"column":12},"end":{"line":63,"column":64}},"35":{"start":{"line":65,"column":8},"end":{"line":65,"column":35}},"36":{"start":{"line":78,"column":4},"end":{"line":83,"column":6}},"37":{"start":{"line":79,"column":8},"end":{"line":81,"column":9}},"38":{"start":{"line":80,"column":12},"end":{"line":80,"column":91}},"39":{"start":{"line":82,"column":8},"end":{"line":82,"column":20}},"40":{"start":{"line":88,"column":4},"end":{"line":90,"column":6}},"41":{"start":{"line":89,"column":8},"end":{"line":89,"column":84}},"42":{"start":{"line":96,"column":4},"end":{"line":102,"column":6}},"43":{"start":{"line":97,"column":8},"end":{"line":97,"column":47}},"44":{"start":{"line":98,"column":8},"end":{"line":100,"column":9}},"45":{"start":{"line":99,"column":12},"end":{"line":99,"column":55}},"46":{"start":{"line":101,"column":8},"end":{"line":101,"column":35}},"47":{"start":{"line":108,"column":4},"end":{"line":114,"column":6}},"48":{"start":{"line":109,"column":8},"end":{"line":109,"column":50}},"49":{"start":{"line":110,"column":8},"end":{"line":112,"column":9}},"50":{"start":{"line":111,"column":12},"end":{"line":111,"column":58}},"51":{"start":{"line":113,"column":8},"end":{"line":113,"column":35}},"52":{"start":{"line":120,"column":4},"end":{"line":126,"column":6}},"53":{"start":{"line":121,"column":8},"end":{"line":121,"column":51}},"54":{"start":{"line":122,"column":8},"end":{"line":124,"column":9}},"55":{"start":{"line":123,"column":12},"end":{"line":123,"column":59}},"56":{"start":{"line":125,"column":8},"end":{"line":125,"column":35}},"57":{"start":{"line":132,"column":4},"end":{"line":138,"column":6}},"58":{"start":{"line":133,"column":8},"end":{"line":133,"column":48}},"59":{"start":{"line":134,"column":8},"end":{"line":136,"column":9}},"60":{"start":{"line":135,"column":12},"end":{"line":135,"column":62}},"61":{"start":{"line":137,"column":8},"end":{"line":137,"column":35}},"62":{"start":{"line":144,"column":4},"end":{"line":150,"column":6}},"63":{"start":{"line":145,"column":8},"end":{"line":145,"column":52}},"64":{"start":{"line":146,"column":8},"end":{"line":148,"column":9}},"65":{"start":{"line":147,"column":12},"end":{"line":147,"column":62}},"66":{"start":{"line":149,"column":8},"end":{"line":149,"column":35}},"67":{"start":{"line":156,"column":4},"end":{"line":162,"column":6}},"68":{"start":{"line":157,"column":8},"end":{"line":157,"column":51}},"69":{"start":{"line":158,"column":8},"end":{"line":160,"column":9}},"70":{"start":{"line":159,"column":12},"end":{"line":159,"column":74}},"71":{"start":{"line":161,"column":8},"end":{"line":161,"column":35}},"72":{"start":{"line":169,"column":4},"end":{"line":175,"column":6}},"73":{"start":{"line":170,"column":8},"end":{"line":170,"column":51}},"74":{"start":{"line":171,"column":8},"end":{"line":173,"column":9}},"75":{"start":{"line":172,"column":12},"end":{"line":172,"column":85}},"76":{"start":{"line":174,"column":8},"end":{"line":174,"column":35}},"77":{"start":{"line":180,"column":4},"end":{"line":185,"column":6}},"78":{"start":{"line":181,"column":8},"end":{"line":181,"column":77}},"79":{"start":{"line":181,"column":47},"end":{"line":181,"column":75}},"80":{"start":{"line":182,"column":8},"end":{"line":182,"column":35}},"81":{"start":{"line":183,"column":8},"end":{"line":183,"column":56}},"82":{"start":{"line":184,"column":8},"end":{"line":184,"column":35}},"83":{"start":{"line":189,"column":4},"end":{"line":193,"column":6}},"84":{"start":{"line":190,"column":8},"end":{"line":190,"column":36}},"85":{"start":{"line":191,"column":8},"end":{"line":191,"column":39}},"86":{"start":{"line":192,"column":8},"end":{"line":192,"column":35}},"87":{"start":{"line":197,"column":4},"end":{"line":215,"column":6}},"88":{"start":{"line":198,"column":8},"end":{"line":198,"column":42}},"89":{"start":{"line":199,"column":8},"end":{"line":199,"column":47}},"90":{"start":{"line":200,"column":8},"end":{"line":202,"column":9}},"91":{"start":{"line":201,"column":12},"end":{"line":201,"column":51}},"92":{"start":{"line":203,"column":8},"end":{"line":205,"column":9}},"93":{"start":{"line":204,"column":12},"end":{"line":204,"column":54}},"94":{"start":{"line":206,"column":8},"end":{"line":208,"column":9}},"95":{"start":{"line":207,"column":12},"end":{"line":207,"column":55}},"96":{"start":{"line":209,"column":8},"end":{"line":211,"column":9}},"97":{"start":{"line":210,"column":12},"end":{"line":210,"column":58}},"98":{"start":{"line":212,"column":8},"end":{"line":214,"column":9}},"99":{"start":{"line":213,"column":12},"end":{"line":213,"column":58}},"100":{"start":{"line":216,"column":4},"end":{"line":216,"column":42}},"101":{"start":{"line":217,"column":4},"end":{"line":217,"column":45}},"102":{"start":{"line":218,"column":4},"end":{"line":218,"column":46}},"103":{"start":{"line":219,"column":4},"end":{"line":219,"column":43}},"104":{"start":{"line":220,"column":4},"end":{"line":220,"column":47}},"105":{"start":{"line":221,"column":4},"end":{"line":221,"column":47}},"106":{"start":{"line":222,"column":4},"end":{"line":222,"column":47}},"107":{"start":{"line":223,"column":4},"end":{"line":223,"column":43}},"108":{"start":{"line":224,"column":4},"end":{"line":224,"column":31}},"109":{"start":{"line":226,"column":0},"end":{"line":226,"column":37}}},"branchMap":{"1":{"line":32,"type":"if","locations":[{"start":{"line":32,"column":8},"end":{"line":32,"column":8}},{"start":{"line":32,"column":8},"end":{"line":32,"column":8}}]},"2":{"line":43,"type":"if","locations":[{"start":{"line":43,"column":8},"end":{"line":43,"column":8}},{"start":{"line":43,"column":8},"end":{"line":43,"column":8}}]},"3":{"line":43,"type":"binary-expr","locations":[{"start":{"line":43,"column":12},"end":{"line":43,"column":38}},{"start":{"line":43,"column":42},"end":{"line":43,"column":76}}]},"4":{"line":53,"type":"if","locations":[{"start":{"line":53,"column":8},"end":{"line":53,"column":8}},{"start":{"line":53,"column":8},"end":{"line":53,"column":8}}]},"5":{"line":79,"type":"if","locations":[{"start":{"line":79,"column":8},"end":{"line":79,"column":8}},{"start":{"line":79,"column":8},"end":{"line":79,"column":8}}]},"6":{"line":98,"type":"if","locations":[{"start":{"line":98,"column":8},"end":{"line":98,"column":8}},{"start":{"line":98,"column":8},"end":{"line":98,"column":8}}]},"7":{"line":110,"type":"if","locations":[{"start":{"line":110,"column":8},"end":{"line":110,"column":8}},{"start":{"line":110,"column":8},"end":{"line":110,"column":8}}]},"8":{"line":122,"type":"if","locations":[{"start":{"line":122,"column":8},"end":{"line":122,"column":8}},{"start":{"line":122,"column":8},"end":{"line":122,"column":8}}]},"9":{"line":134,"type":"if","locations":[{"start":{"line":134,"column":8},"end":{"line":134,"column":8}},{"start":{"line":134,"column":8},"end":{"line":134,"column":8}}]},"10":{"line":146,"type":"if","locations":[{"start":{"line":146,"column":8},"end":{"line":146,"column":8}},{"start":{"line":146,"column":8},"end":{"line":146,"column":8}}]},"11":{"line":158,"type":"if","locations":[{"start":{"line":158,"column":8},"end":{"line":158,"column":8}},{"start":{"line":158,"column":8},"end":{"line":158,"column":8}}]},"12":{"line":171,"type":"if","locations":[{"start":{"line":171,"column":8},"end":{"line":171,"column":8}},{"start":{"line":171,"column":8},"end":{"line":171,"column":8}}]},"13":{"line":171,"type":"binary-expr","locations":[{"start":{"line":171,"column":12},"end":{"line":171,"column":38}},{"start":{"line":171,"column":42},"end":{"line":171,"column":76}}]},"14":{"line":181,"type":"if","locations":[{"start":{"line":181,"column":8},"end":{"line":181,"column":8}},{"start":{"line":181,"column":8},"end":{"line":181,"column":8}}]},"15":{"line":200,"type":"if","locations":[{"start":{"line":200,"column":8},"end":{"line":200,"column":8}},{"start":{"line":200,"column":8},"end":{"line":200,"column":8}}]},"16":{"line":203,"type":"if","locations":[{"start":{"line":203,"column":8},"end":{"line":203,"column":8}},{"start":{"line":203,"column":8},"end":{"line":203,"column":8}}]},"17":{"line":206,"type":"if","locations":[{"start":{"line":206,"column":8},"end":{"line":206,"column":8}},{"start":{"line":206,"column":8},"end":{"line":206,"column":8}}]},"18":{"line":209,"type":"if","locations":[{"start":{"line":209,"column":8},"end":{"line":209,"column":8}},{"start":{"line":209,"column":8},"end":{"line":209,"column":8}}]},"19":{"line":212,"type":"if","locations":[{"start":{"line":212,"column":8},"end":{"line":212,"column":8}},{"start":{"line":212,"column":8},"end":{"line":212,"column":8}}]}},"code":["\"use strict\";","var CorrelationContextManager = require(\"./AutoCollection/CorrelationContextManager\"); // Keep this first","var AutoCollectConsole = require(\"./AutoCollection/Console\");","var AutoCollectExceptions = require(\"./AutoCollection/Exceptions\");","var AutoCollectPerformance = require(\"./AutoCollection/Performance\");","var AutoCollectClientRequests = require(\"./AutoCollection/ClientRequests\");","var AutoCollectServerRequests = require(\"./AutoCollection/ServerRequests\");","var Client = require(\"./Library/Client\");","var Logging = require(\"./Library/Logging\");","/**"," * The singleton meta class for the default client of the client. This class is used to setup/start and configure"," * the auto-collection behavior of the application insights module."," */","var ApplicationInsights = (function () {","    function ApplicationInsights() {","    }","    /**","     * Initializes a client with the given instrumentation key, if this is not specified, the value will be","     * read from the environment variable APPINSIGHTS_INSTRUMENTATIONKEY","     * @returns {ApplicationInsights/Client} a new client","     */","    ApplicationInsights.getClient = function (instrumentationKey) {","        return new Client(instrumentationKey);","    };","    /**","     * Initializes the default client of the client and sets the default configuration","     * @param instrumentationKey the instrumentation key to use. Optional, if this is not specified, the value will be","     * read from the environment variable APPINSIGHTS_INSTRUMENTATIONKEY","     * @returns {ApplicationInsights} this class","     */","    ApplicationInsights.setup = function (instrumentationKey) {","        if (!ApplicationInsights.client) {","            ApplicationInsights.client = ApplicationInsights.getClient(instrumentationKey);","            ApplicationInsights._console = new AutoCollectConsole(ApplicationInsights.client);","            ApplicationInsights._exceptions = new AutoCollectExceptions(ApplicationInsights.client);","            ApplicationInsights._performance = new AutoCollectPerformance(ApplicationInsights.client);","            ApplicationInsights._serverRequests = new AutoCollectServerRequests(ApplicationInsights.client);","            ApplicationInsights._clientRequests = new AutoCollectClientRequests(ApplicationInsights.client);","        }","        else {","            Logging.info(\"The default client is already setup\");","        }","        if (ApplicationInsights.client && ApplicationInsights.client.channel) {","            ApplicationInsights.client.channel.setOfflineMode(ApplicationInsights._isOfflineMode);","        }","        return ApplicationInsights;","    };","    /**","     * Starts automatic collection of telemetry. Prior to calling start no telemetry will be collected","     * @returns {ApplicationInsights} this class","     */","    ApplicationInsights.start = function () {","        if (!!this.client) {","            ApplicationInsights._isStarted = true;","            ApplicationInsights._console.enable(ApplicationInsights._isConsole);","            ApplicationInsights._exceptions.enable(ApplicationInsights._isExceptions);","            ApplicationInsights._performance.enable(ApplicationInsights._isPerformance);","            ApplicationInsights._serverRequests.useAutoCorrelation(ApplicationInsights._isCorrelating);","            ApplicationInsights._serverRequests.enable(ApplicationInsights._isRequests);","            ApplicationInsights._clientRequests.enable(ApplicationInsights._isDependencies);","        }","        else {","            Logging.warn(\"Start cannot be called before setup\");","        }","        return ApplicationInsights;","    };","    /**","     * Returns an object that is shared across all code handling a given request. This can be used similarly to thread-local storage in other languages.","     * Properties set on this object will be available to telemetry processors.","     *","     * Do not store sensitive information here.","     * Custom properties set on this object can be exposed in a future SDK release via outgoing HTTP headers.","     * This is to allow for correlating data cross-component.","     *","     * This method will return null if automatic dependency correlation is disabled.","     * @returns A plain object for request storage or null if automatic dependency correlation is disabled.","     */","    ApplicationInsights.getCorrelationContext = function () {","        if (this._isCorrelating) {","            return CorrelationContextManager.CorrelationContextManager.getCurrentContext();","        }","        return null;","    };","    /**","     * Returns a function that will get the same correlation context within its function body as the code executing this function.","     * Use this method if automatic dependency correlation is not propagating correctly to an asynchronous callback.","     */","    ApplicationInsights.wrapWithCorrelationContext = function (fn) {","        return CorrelationContextManager.CorrelationContextManager.wrapCallback(fn);","    };","    /**","     * Sets the state of console tracking (enabled by default)","     * @param value if true console activity will be sent to Application Insights","     * @returns {ApplicationInsights} this class","     */","    ApplicationInsights.setAutoCollectConsole = function (value) {","        ApplicationInsights._isConsole = value;","        if (ApplicationInsights._isStarted) {","            ApplicationInsights._console.enable(value);","        }","        return ApplicationInsights;","    };","    /**","     * Sets the state of exception tracking (enabled by default)","     * @param value if true uncaught exceptions will be sent to Application Insights","     * @returns {ApplicationInsights} this class","     */","    ApplicationInsights.setAutoCollectExceptions = function (value) {","        ApplicationInsights._isExceptions = value;","        if (ApplicationInsights._isStarted) {","            ApplicationInsights._exceptions.enable(value);","        }","        return ApplicationInsights;","    };","    /**","     * Sets the state of performance tracking (enabled by default)","     * @param value if true performance counters will be collected every second and sent to Application Insights","     * @returns {ApplicationInsights} this class","     */","    ApplicationInsights.setAutoCollectPerformance = function (value) {","        ApplicationInsights._isPerformance = value;","        if (ApplicationInsights._isStarted) {","            ApplicationInsights._performance.enable(value);","        }","        return ApplicationInsights;","    };","    /**","     * Sets the state of request tracking (enabled by default)","     * @param value if true requests will be sent to Application Insights","     * @returns {ApplicationInsights} this class","     */","    ApplicationInsights.setAutoCollectRequests = function (value) {","        ApplicationInsights._isRequests = value;","        if (ApplicationInsights._isStarted) {","            ApplicationInsights._serverRequests.enable(value);","        }","        return ApplicationInsights;","    };","    /**","     * Sets the state of dependency tracking (enabled by default)","     * @param value if true dependencies will be sent to Application Insights","     * @returns {ApplicationInsights} this class","     */","    ApplicationInsights.setAutoCollectDependencies = function (value) {","        ApplicationInsights._isDependencies = value;","        if (ApplicationInsights._isStarted) {","            ApplicationInsights._clientRequests.enable(value);","        }","        return ApplicationInsights;","    };","    /**","     * Sets the state of automatic dependency correlation (enabled by default)","     * @param value if true dependencies will be correlated with requests","     * @returns {ApplicationInsights} this class","     */","    ApplicationInsights.setAutoDependencyCorrelation = function (value) {","        ApplicationInsights._isCorrelating = value;","        if (ApplicationInsights._isStarted) {","            ApplicationInsights._serverRequests.useAutoCorrelation(value);","        }","        return ApplicationInsights;","    };","    /**","    * Enable or disable offline mode to cache events when client is offline (disabled by default)","    * @param value if true events that occured while client is offline will be cached on disk","    * @param resendInterval. The wait interval for resending cached events.","    * @returns {ApplicationInsights} this class","    */","    ApplicationInsights.setOfflineMode = function (value, resendInterval) {","        ApplicationInsights._isOfflineMode = value;","        if (ApplicationInsights.client && ApplicationInsights.client.channel) {","            ApplicationInsights.client.channel.setOfflineMode(value, resendInterval);","        }","        return ApplicationInsights;","    };","    /**","     * Enables verbose debug logging","     * @returns {ApplicationInsights} this class","     */","    ApplicationInsights.enableVerboseLogging = function (enableWarningLogging) {","        if (enableWarningLogging === void 0) { enableWarningLogging = true; }","        Logging.enableDebug = true;","        Logging.disableWarnings = !enableWarningLogging;","        return ApplicationInsights;","    };","    /**","     * Disables verbose debug and warning logging","     */","    ApplicationInsights.disableConsoleLogging = function () {","        Logging.enableDebug = false;","        Logging.disableWarnings = true;","        return ApplicationInsights;","    };","    /**","      * Disposes the default client and all the auto collectors so they can be reinitialized with different configuration","      */","    ApplicationInsights.dispose = function () {","        ApplicationInsights.client = null;","        ApplicationInsights._isStarted = false;","        if (ApplicationInsights._console) {","            ApplicationInsights._console.dispose();","        }","        if (ApplicationInsights._exceptions) {","            ApplicationInsights._exceptions.dispose();","        }","        if (ApplicationInsights._performance) {","            ApplicationInsights._performance.dispose();","        }","        if (ApplicationInsights._serverRequests) {","            ApplicationInsights._serverRequests.dispose();","        }","        if (ApplicationInsights._clientRequests) {","            ApplicationInsights._clientRequests.dispose();","        }","    };","    ApplicationInsights._isConsole = true;","    ApplicationInsights._isExceptions = true;","    ApplicationInsights._isPerformance = true;","    ApplicationInsights._isRequests = true;","    ApplicationInsights._isDependencies = true;","    ApplicationInsights._isOfflineMode = false;","    ApplicationInsights._isCorrelating = false;","    ApplicationInsights._isStarted = false;","    return ApplicationInsights;","}());","module.exports = ApplicationInsights;",""],"l":{"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"14":1,"15":1,"22":1,"23":0,"31":1,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"41":0,"43":0,"44":0,"46":0,"52":1,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"63":0,"65":0,"78":1,"79":0,"80":0,"82":0,"88":1,"89":0,"96":1,"97":0,"98":0,"99":0,"101":0,"108":1,"109":0,"110":0,"111":0,"113":0,"120":1,"121":0,"122":0,"123":0,"125":0,"132":1,"133":0,"134":0,"135":0,"137":0,"144":1,"145":0,"146":0,"147":0,"149":0,"156":1,"157":0,"158":0,"159":0,"161":0,"169":1,"170":0,"171":0,"172":0,"174":0,"180":1,"181":0,"182":0,"183":0,"184":0,"189":1,"190":0,"191":0,"192":0,"197":1,"198":0,"199":0,"200":0,"201":0,"203":0,"204":0,"206":0,"207":0,"209":0,"210":0,"212":0,"213":0,"216":1,"217":1,"218":1,"219":1,"220":1,"221":1,"222":1,"223":1,"224":1,"226":1}},"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/AutoCollection/CorrelationContextManager.js":{"path":"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/AutoCollection/CorrelationContextManager.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":1,"15":0,"16":0,"17":0,"18":0,"19":1,"20":0,"21":0,"22":0,"23":1,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":1,"35":0,"36":1,"37":0,"38":0,"39":1,"40":0,"41":0,"42":0,"43":0,"44":0,"45":1,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":1,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":1,"69":0,"70":1,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":1,"89":1,"90":1,"91":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0]},"f":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},"fnMap":{"1":{"name":"(anonymous_1)","line":3,"loc":{"start":{"line":3,"column":33},"end":{"line":3,"column":45}}},"2":{"name":"CorrelationContextManager","line":4,"loc":{"start":{"line":4,"column":4},"end":{"line":4,"column":41}}},"3":{"name":"(anonymous_3)","line":11,"loc":{"start":{"line":11,"column":50},"end":{"line":11,"column":62}}},"4":{"name":"(anonymous_4)","line":20,"loc":{"start":{"line":20,"column":54},"end":{"line":20,"column":102}}},"5":{"name":"(anonymous_5)","line":40,"loc":{"start":{"line":40,"column":47},"end":{"line":40,"column":70}}},"6":{"name":"(anonymous_6)","line":59,"loc":{"start":{"line":59,"column":45},"end":{"line":59,"column":59}}},"7":{"name":"(anonymous_7)","line":68,"loc":{"start":{"line":68,"column":39},"end":{"line":68,"column":51}}},"8":{"name":"(anonymous_8)","line":87,"loc":{"start":{"line":87,"column":40},"end":{"line":87,"column":52}}},"9":{"name":"(anonymous_9)","line":93,"loc":{"start":{"line":93,"column":56},"end":{"line":93,"column":68}}},"10":{"name":"(anonymous_10)","line":99,"loc":{"start":{"line":99,"column":48},"end":{"line":99,"column":66}}},"11":{"name":"(anonymous_11)","line":114,"loc":{"start":{"line":114,"column":43},"end":{"line":114,"column":55}}},"12":{"name":"(anonymous_12)","line":118,"loc":{"start":{"line":118,"column":55},"end":{"line":118,"column":67}}},"13":{"name":"(anonymous_13)","line":135,"loc":{"start":{"line":135,"column":44},"end":{"line":135,"column":67}}},"14":{"name":"(anonymous_14)","line":136,"loc":{"start":{"line":136,"column":28},"end":{"line":136,"column":50}}},"15":{"name":"(anonymous_15)","line":138,"loc":{"start":{"line":138,"column":33},"end":{"line":138,"column":45}}},"16":{"name":"(anonymous_16)","line":140,"loc":{"start":{"line":140,"column":31},"end":{"line":140,"column":43}}},"17":{"name":"(anonymous_17)","line":154,"loc":{"start":{"line":154,"column":43},"end":{"line":154,"column":55}}},"18":{"name":"AppInsightsAsyncCorrelatedErrorWrapper","line":157,"loc":{"start":{"line":157,"column":8},"end":{"line":157,"column":58}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":38}},"2":{"start":{"line":3,"column":0},"end":{"line":190,"column":5}},"3":{"start":{"line":4,"column":4},"end":{"line":5,"column":5}},"4":{"start":{"line":11,"column":4},"end":{"line":16,"column":6}},"5":{"start":{"line":12,"column":8},"end":{"line":14,"column":9}},"6":{"start":{"line":13,"column":12},"end":{"line":13,"column":24}},"7":{"start":{"line":15,"column":8},"end":{"line":15,"column":43}},"8":{"start":{"line":20,"column":4},"end":{"line":34,"column":6}},"9":{"start":{"line":21,"column":8},"end":{"line":21,"column":52}},"10":{"start":{"line":22,"column":8},"end":{"line":22,"column":43}},"11":{"start":{"line":23,"column":8},"end":{"line":32,"column":9}},"12":{"start":{"line":24,"column":12},"end":{"line":31,"column":14}},"13":{"start":{"line":33,"column":8},"end":{"line":33,"column":20}},"14":{"start":{"line":40,"column":4},"end":{"line":51,"column":6}},"15":{"start":{"line":41,"column":8},"end":{"line":50,"column":9}},"16":{"start":{"line":42,"column":12},"end":{"line":45,"column":15}},"17":{"start":{"line":46,"column":12},"end":{"line":46,"column":28}},"18":{"start":{"line":49,"column":12},"end":{"line":49,"column":17}},"19":{"start":{"line":59,"column":4},"end":{"line":64,"column":6}},"20":{"start":{"line":60,"column":8},"end":{"line":62,"column":9}},"21":{"start":{"line":61,"column":12},"end":{"line":61,"column":64}},"22":{"start":{"line":63,"column":8},"end":{"line":63,"column":18}},"23":{"start":{"line":68,"column":4},"end":{"line":83,"column":6}},"24":{"start":{"line":69,"column":8},"end":{"line":72,"column":9}},"25":{"start":{"line":70,"column":12},"end":{"line":70,"column":33}},"26":{"start":{"line":71,"column":12},"end":{"line":71,"column":19}},"27":{"start":{"line":74,"column":8},"end":{"line":74,"column":27}},"28":{"start":{"line":76,"column":8},"end":{"line":81,"column":9}},"29":{"start":{"line":77,"column":12},"end":{"line":77,"column":39}},"30":{"start":{"line":78,"column":12},"end":{"line":78,"column":30}},"31":{"start":{"line":79,"column":12},"end":{"line":79,"column":60}},"32":{"start":{"line":80,"column":12},"end":{"line":80,"column":30}},"33":{"start":{"line":82,"column":8},"end":{"line":82,"column":28}},"34":{"start":{"line":87,"column":4},"end":{"line":89,"column":6}},"35":{"start":{"line":88,"column":8},"end":{"line":88,"column":29}},"36":{"start":{"line":93,"column":4},"end":{"line":97,"column":6}},"37":{"start":{"line":95,"column":8},"end":{"line":95,"column":55}},"38":{"start":{"line":96,"column":8},"end":{"line":96,"column":98}},"39":{"start":{"line":99,"column":4},"end":{"line":108,"column":6}},"40":{"start":{"line":100,"column":8},"end":{"line":100,"column":23}},"41":{"start":{"line":101,"column":8},"end":{"line":106,"column":9}},"42":{"start":{"line":102,"column":12},"end":{"line":102,"column":34}},"43":{"start":{"line":105,"column":12},"end":{"line":105,"column":24}},"44":{"start":{"line":107,"column":8},"end":{"line":107,"column":19}},"45":{"start":{"line":114,"column":4},"end":{"line":132,"column":6}},"46":{"start":{"line":115,"column":8},"end":{"line":115,"column":50}},"47":{"start":{"line":116,"column":8},"end":{"line":131,"column":9}},"48":{"start":{"line":117,"column":12},"end":{"line":117,"column":64}},"49":{"start":{"line":118,"column":12},"end":{"line":130,"column":14}},"50":{"start":{"line":119,"column":16},"end":{"line":119,"column":65}},"51":{"start":{"line":120,"column":16},"end":{"line":120,"column":52}},"52":{"start":{"line":121,"column":16},"end":{"line":128,"column":17}},"53":{"start":{"line":122,"column":20},"end":{"line":122,"column":92}},"54":{"start":{"line":124,"column":21},"end":{"line":128,"column":17}},"55":{"start":{"line":126,"column":20},"end":{"line":126,"column":71}},"56":{"start":{"line":127,"column":20},"end":{"line":127,"column":107}},"57":{"start":{"line":129,"column":16},"end":{"line":129,"column":46}},"58":{"start":{"line":135,"column":4},"end":{"line":151,"column":6}},"59":{"start":{"line":136,"column":8},"end":{"line":150,"column":11}},"60":{"start":{"line":137,"column":12},"end":{"line":137,"column":42}},"61":{"start":{"line":138,"column":12},"end":{"line":149,"column":14}},"62":{"start":{"line":139,"column":16},"end":{"line":139,"column":54}},"63":{"start":{"line":140,"column":16},"end":{"line":147,"column":18}},"64":{"start":{"line":141,"column":20},"end":{"line":146,"column":21}},"65":{"start":{"line":142,"column":24},"end":{"line":142,"column":61}},"66":{"start":{"line":145,"column":24},"end":{"line":145,"column":68}},"67":{"start":{"line":148,"column":16},"end":{"line":148,"column":27}},"68":{"start":{"line":154,"column":4},"end":{"line":186,"column":6}},"69":{"start":{"line":155,"column":8},"end":{"line":155,"column":32}},"70":{"start":{"line":157,"column":8},"end":{"line":174,"column":9}},"71":{"start":{"line":158,"column":12},"end":{"line":160,"column":13}},"72":{"start":{"line":159,"column":16},"end":{"line":159,"column":144}},"73":{"start":{"line":161,"column":12},"end":{"line":161,"column":40}},"74":{"start":{"line":164,"column":12},"end":{"line":164,"column":83}},"75":{"start":{"line":167,"column":12},"end":{"line":172,"column":13}},"76":{"start":{"line":168,"column":16},"end":{"line":168,"column":44}},"77":{"start":{"line":169,"column":16},"end":{"line":169,"column":74}},"78":{"start":{"line":170,"column":16},"end":{"line":170,"column":81}},"79":{"start":{"line":171,"column":16},"end":{"line":171,"column":103}},"80":{"start":{"line":173,"column":12},"end":{"line":173,"column":24}},"81":{"start":{"line":176,"column":8},"end":{"line":176,"column":74}},"82":{"start":{"line":178,"column":8},"end":{"line":178,"column":53}},"83":{"start":{"line":179,"column":8},"end":{"line":184,"column":9}},"84":{"start":{"line":180,"column":12},"end":{"line":180,"column":40}},"85":{"start":{"line":181,"column":12},"end":{"line":183,"column":13}},"86":{"start":{"line":182,"column":16},"end":{"line":182,"column":145}},"87":{"start":{"line":185,"column":8},"end":{"line":185,"column":62}},"88":{"start":{"line":187,"column":4},"end":{"line":187,"column":46}},"89":{"start":{"line":188,"column":4},"end":{"line":188,"column":53}},"90":{"start":{"line":189,"column":4},"end":{"line":189,"column":37}},"91":{"start":{"line":191,"column":0},"end":{"line":191,"column":62}}},"branchMap":{"1":{"line":12,"type":"if","locations":[{"start":{"line":12,"column":8},"end":{"line":12,"column":8}},{"start":{"line":12,"column":8},"end":{"line":12,"column":8}}]},"2":{"line":21,"type":"binary-expr","locations":[{"start":{"line":21,"column":22},"end":{"line":21,"column":33}},{"start":{"line":21,"column":37},"end":{"line":21,"column":51}}]},"3":{"line":22,"type":"binary-expr","locations":[{"start":{"line":22,"column":19},"end":{"line":22,"column":27}},{"start":{"line":22,"column":31},"end":{"line":22,"column":42}}]},"4":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":8},"end":{"line":23,"column":8}},{"start":{"line":23,"column":8},"end":{"line":23,"column":8}}]},"5":{"line":41,"type":"if","locations":[{"start":{"line":41,"column":8},"end":{"line":41,"column":8}},{"start":{"line":41,"column":8},"end":{"line":41,"column":8}}]},"6":{"line":43,"type":"binary-expr","locations":[{"start":{"line":43,"column":32},"end":{"line":43,"column":39}},{"start":{"line":43,"column":43},"end":{"line":43,"column":69}},{"start":{"line":43,"column":74},"end":{"line":43,"column":83}}]},"7":{"line":60,"type":"if","locations":[{"start":{"line":60,"column":8},"end":{"line":60,"column":8}},{"start":{"line":60,"column":8},"end":{"line":60,"column":8}}]},"8":{"line":69,"type":"if","locations":[{"start":{"line":69,"column":8},"end":{"line":69,"column":8}},{"start":{"line":69,"column":8},"end":{"line":69,"column":8}}]},"9":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":8},"end":{"line":76,"column":8}},{"start":{"line":76,"column":8},"end":{"line":76,"column":8}}]},"10":{"line":96,"type":"binary-expr","locations":[{"start":{"line":96,"column":15},"end":{"line":96,"column":39}},{"start":{"line":96,"column":44},"end":{"line":96,"column":68}},{"start":{"line":96,"column":72},"end":{"line":96,"column":96}}]},"11":{"line":116,"type":"if","locations":[{"start":{"line":116,"column":8},"end":{"line":116,"column":8}},{"start":{"line":116,"column":8},"end":{"line":116,"column":8}}]},"12":{"line":116,"type":"binary-expr","locations":[{"start":{"line":116,"column":12},"end":{"line":116,"column":17}},{"start":{"line":116,"column":21},"end":{"line":116,"column":38}}]},"13":{"line":121,"type":"if","locations":[{"start":{"line":121,"column":16},"end":{"line":121,"column":16}},{"start":{"line":121,"column":16},"end":{"line":121,"column":16}}]},"14":{"line":124,"type":"if","locations":[{"start":{"line":124,"column":21},"end":{"line":124,"column":21}},{"start":{"line":124,"column":21},"end":{"line":124,"column":21}}]},"15":{"line":124,"type":"binary-expr","locations":[{"start":{"line":124,"column":25},"end":{"line":124,"column":49}},{"start":{"line":124,"column":53},"end":{"line":124,"column":102}}]},"16":{"line":141,"type":"if","locations":[{"start":{"line":141,"column":20},"end":{"line":141,"column":20}},{"start":{"line":141,"column":20},"end":{"line":141,"column":20}}]},"17":{"line":141,"type":"binary-expr","locations":[{"start":{"line":141,"column":24},"end":{"line":141,"column":33}},{"start":{"line":141,"column":37},"end":{"line":141,"column":78}}]},"18":{"line":158,"type":"if","locations":[{"start":{"line":158,"column":12},"end":{"line":158,"column":12}},{"start":{"line":158,"column":12},"end":{"line":158,"column":12}}]},"19":{"line":181,"type":"if","locations":[{"start":{"line":181,"column":12},"end":{"line":181,"column":12}},{"start":{"line":181,"column":12},"end":{"line":181,"column":12}}]}},"code":["\"use strict\";","var Util = require(\"../Library/Util\");","var CorrelationContextManager = (function () {","    function CorrelationContextManager() {","    }","    /**","     *  Provides the current Context.","     *  The context is the most recent one entered into for the current","     *  logical chain of execution, including across asynchronous calls.","     */","    CorrelationContextManager.getCurrentContext = function () {","        if (!CorrelationContextManager.enabled) {","            return null;","        }","        return Zone.current.get(\"context\");","    };","    /**","     *  A helper to generate objects conforming to the CorrelationContext interface","     */","    CorrelationContextManager.generateContextObject = function (parentId, operationName, operationId) {","        operationId = operationId || Util.newGuid();","        parentId = parentId || operationId;","        if (this.enabled) {","            return {","                operation: {","                    name: operationName,","                    id: operationId,","                    parentId: parentId","                },","                customProperties: {}","            };","        }","        return null;","    };","    /**","     *  Runs a function inside a given Context.","     *  All logical children of the execution path that entered this Context","     *  will receive this Context object on calls to GetCurrentContext.","     */","    CorrelationContextManager.runWithContext = function (context, fn) {","        if (CorrelationContextManager.enabled) {","            var newZone = Zone.current.fork({","                name: \"AI-\" + ((context && context.operation.parentId) || \"Unknown\"),","                properties: { context: context }","            });","            newZone.run(fn);","        }","        else {","            fn();","        }","    };","    /**","     *  Patches a callback to restore the correct Context when getCurrentContext","     *  is run within it. This is necessary if automatic correlation fails to work","     *  with user-included libraries.","     *","     *  The supplied callback will be given the same context that was present for","     *  the call to wrapCallback.  */","    CorrelationContextManager.wrapCallback = function (fn) {","        if (CorrelationContextManager.enabled) {","            return Zone.current.wrap(fn, \"User-wrapped method\");","        }","        return fn;","    };","    /**","     *  Enables the CorrelationContextManager.","     */","    CorrelationContextManager.enable = function () {","        if (!this.isNodeVersionCompatible()) {","            this.enabled = false;","            return;","        }","        // Load in Zone.js","        require(\"zone.js\");","        // Run patches for Zone.js","        if (!this.hasEverEnabled) {","            this.hasEverEnabled = true;","            this.patchError();","            this.patchTimers([\"setTimeout\", \"setInterval\"]);","            this.patchRedis();","        }","        this.enabled = true;","    };","    /**","     *  Disables the CorrelationContextManager.","     */","    CorrelationContextManager.disable = function () {","        this.enabled = false;","    };","    /**","     *  Reports if the CorrelationContextManager is able to run in this environment","     */","    CorrelationContextManager.isNodeVersionCompatible = function () {","        // Unit tests warn of errors < 3.3 from timer patching. All versions before 4 were 0.x","        var nodeVer = process.versions.node.split(\".\");","        return parseInt(nodeVer[0]) > 3 || (parseInt(nodeVer[0]) > 2 && parseInt(nodeVer[1]) > 2);","    };","    // Patch methods that manually go async that Zone doesn't catch","    CorrelationContextManager.requireForPatch = function (module) {","        var req = null;","        try {","            req = require(module);","        }","        catch (e) {","            return null;","        }","        return req;","    };","    // A good example of patching a third party library to respect context.","    // send_command is always used in this library to send data out.","    // By overwriting the function to capture the callback provided to it,","    // and wrapping that callback, we ensure that consumers of this library","    // will have context persisted.","    CorrelationContextManager.patchRedis = function () {","        var redis = this.requireForPatch(\"redis\");","        if (redis && redis.RedisClient) {","            var orig = redis.RedisClient.prototype.send_command;","            redis.RedisClient.prototype.send_command = function () {","                var args = Array.prototype.slice.call(arguments);","                var lastArg = args[args.length - 1];","                if (typeof lastArg === \"function\") {","                    args[args.length - 1] = Zone.current.wrap(lastArg, \"AI.CCM.patchRedis\");","                }","                else if (lastArg instanceof Array && typeof lastArg[lastArg.length - 1] === \"function\") {","                    // The last argument can be an array!","                    var lastIndexLastArg = lastArg[lastArg.length - 1];","                    lastArg[lastArg.length - 1] = Zone.current.wrap(lastIndexLastArg, \"AI.CCM.patchRedis\");","                }","                return orig.apply(this, args);","            };","        }","    };","    // Zone.js breaks concatenation of timer return values.","    // This fixes that.","    CorrelationContextManager.patchTimers = function (methodNames) {","        methodNames.forEach(function (methodName) {","            var orig = global[methodName];","            global[methodName] = function () {","                var ret = orig.apply(this, arguments);","                ret.toString = function () {","                    if (this.data && typeof this.data.handleId !== 'undefined') {","                        return this.data.handleId.toString();","                    }","                    else {","                        return Object.prototype.toString.call(this);","                    }","                };","                return ret;","            };","        });","    };","    // Zone.js breaks deepEqual on error objects (by making internal properties enumerable).","    // This fixes that by subclassing the error object and making all properties not enumerable","    CorrelationContextManager.patchError = function () {","        var orig = global.Error;","        // New error handler","        function AppInsightsAsyncCorrelatedErrorWrapper() {","            if (!(this instanceof AppInsightsAsyncCorrelatedErrorWrapper)) {","                return AppInsightsAsyncCorrelatedErrorWrapper.apply(Object.create(AppInsightsAsyncCorrelatedErrorWrapper.prototype), arguments);","            }","            orig.apply(this, arguments);","            // getOwnPropertyNames should be a superset of Object.keys...","            // This appears to not always be the case","            var props = Object.getOwnPropertyNames(this).concat(Object.keys(this));","            // Zone.js will automatically create some hidden properties at read time.","            // We need to proactively make those not enumerable as well as the currently visible properties","            for (var i = 0; i < props.length; i++) {","                var propertyName = props[i];","                var hiddenPropertyName = Zone['__symbol__'](propertyName);","                Object.defineProperty(this, propertyName, { enumerable: false });","                Object.defineProperty(this, hiddenPropertyName, { enumerable: false, writable: true });","            }","            return this;","        }","        // Inherit from the Zone.js error handler","        AppInsightsAsyncCorrelatedErrorWrapper.prototype = orig.prototype;","        // We need this loop to copy outer methods like Error.captureStackTrace","        var props = Object.getOwnPropertyNames(orig);","        for (var i = 0; i < props.length; i++) {","            var propertyName = props[i];","            if (!AppInsightsAsyncCorrelatedErrorWrapper[propertyName]) {","                Object.defineProperty(AppInsightsAsyncCorrelatedErrorWrapper, propertyName, Object.getOwnPropertyDescriptor(orig, propertyName));","            }","        }","        global.Error = AppInsightsAsyncCorrelatedErrorWrapper;","    };","    CorrelationContextManager.enabled = false;","    CorrelationContextManager.hasEverEnabled = false;","    return CorrelationContextManager;","}());","exports.CorrelationContextManager = CorrelationContextManager;",""],"l":{"2":1,"3":1,"4":1,"11":1,"12":0,"13":0,"15":0,"20":1,"21":0,"22":0,"23":0,"24":0,"33":0,"40":1,"41":0,"42":0,"46":0,"49":0,"59":1,"60":0,"61":0,"63":0,"68":1,"69":0,"70":0,"71":0,"74":0,"76":0,"77":0,"78":0,"79":0,"80":0,"82":0,"87":1,"88":0,"93":1,"95":0,"96":0,"99":1,"100":0,"101":0,"102":0,"105":0,"107":0,"114":1,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"124":0,"126":0,"127":0,"129":0,"135":1,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"145":0,"148":0,"154":1,"155":0,"157":1,"158":0,"159":0,"161":0,"164":0,"167":0,"168":0,"169":0,"170":0,"171":0,"173":0,"176":0,"178":0,"179":0,"180":0,"181":0,"182":0,"185":0,"187":1,"188":1,"189":1,"191":1}},"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/Library/Util.js":{"path":"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/Library/Util.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":1,"18":0,"19":0,"20":0,"21":1,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":1,"30":0,"31":1,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":1,"40":0,"41":1,"42":0,"43":1,"44":0,"45":1,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":1,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":1,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":1,"84":1,"85":1,"86":1},"b":{"1":[0,0],"2":[0,0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0,0],"19":[0,0],"20":[0,0,0],"21":[0,0],"22":[0,1]},"f":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},"fnMap":{"1":{"name":"(anonymous_1)","line":4,"loc":{"start":{"line":4,"column":12},"end":{"line":4,"column":24}}},"2":{"name":"Util","line":5,"loc":{"start":{"line":5,"column":4},"end":{"line":5,"column":20}}},"3":{"name":"(anonymous_3)","line":10,"loc":{"start":{"line":10,"column":21},"end":{"line":10,"column":45}}},"4":{"name":"(anonymous_4)","line":29,"loc":{"start":{"line":29,"column":16},"end":{"line":29,"column":31}}},"5":{"name":"(anonymous_5)","line":41,"loc":{"start":{"line":41,"column":30},"end":{"line":41,"column":47}}},"6":{"name":"(anonymous_6)","line":42,"loc":{"start":{"line":42,"column":21},"end":{"line":42,"column":37}}},"7":{"name":"(anonymous_7)","line":45,"loc":{"start":{"line":45,"column":28},"end":{"line":45,"column":41}}},"8":{"name":"(anonymous_8)","line":55,"loc":{"start":{"line":55,"column":20},"end":{"line":55,"column":32}}},"9":{"name":"(anonymous_9)","line":61,"loc":{"start":{"line":61,"column":19},"end":{"line":61,"column":31}}},"10":{"name":"(anonymous_10)","line":84,"loc":{"start":{"line":84,"column":19},"end":{"line":84,"column":34}}},"11":{"name":"(anonymous_11)","line":90,"loc":{"start":{"line":90,"column":19},"end":{"line":90,"column":34}}},"12":{"name":"(anonymous_12)","line":96,"loc":{"start":{"line":96,"column":18},"end":{"line":96,"column":33}}},"13":{"name":"(anonymous_13)","line":102,"loc":{"start":{"line":102,"column":24},"end":{"line":102,"column":43}}},"14":{"name":"(anonymous_14)","line":121,"loc":{"start":{"line":121,"column":29},"end":{"line":121,"column":44}}},"15":{"name":"(anonymous_15)","line":149,"loc":{"start":{"line":149,"column":39},"end":{"line":149,"column":69}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":25}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":35}},"3":{"start":{"line":4,"column":0},"end":{"line":165,"column":5}},"4":{"start":{"line":5,"column":4},"end":{"line":6,"column":5}},"5":{"start":{"line":10,"column":4},"end":{"line":25,"column":6}},"6":{"start":{"line":11,"column":8},"end":{"line":11,"column":23}},"7":{"start":{"line":12,"column":8},"end":{"line":23,"column":9}},"8":{"start":{"line":13,"column":12},"end":{"line":13,"column":40}},"9":{"start":{"line":14,"column":12},"end":{"line":14,"column":44}},"10":{"start":{"line":15,"column":12},"end":{"line":22,"column":13}},"11":{"start":{"line":16,"column":16},"end":{"line":16,"column":40}},"12":{"start":{"line":17,"column":16},"end":{"line":17,"column":43}},"13":{"start":{"line":18,"column":16},"end":{"line":21,"column":17}},"14":{"start":{"line":19,"column":20},"end":{"line":19,"column":83}},"15":{"start":{"line":20,"column":20},"end":{"line":20,"column":26}},"16":{"start":{"line":24,"column":8},"end":{"line":24,"column":21}},"17":{"start":{"line":29,"column":4},"end":{"line":36,"column":6}},"18":{"start":{"line":30,"column":8},"end":{"line":35,"column":9}},"19":{"start":{"line":31,"column":12},"end":{"line":31,"column":49}},"20":{"start":{"line":34,"column":12},"end":{"line":34,"column":22}},"21":{"start":{"line":41,"column":4},"end":{"line":51,"column":6}},"22":{"start":{"line":42,"column":8},"end":{"line":44,"column":10}},"23":{"start":{"line":43,"column":12},"end":{"line":43,"column":56}},"24":{"start":{"line":45,"column":8},"end":{"line":47,"column":10}},"25":{"start":{"line":46,"column":12},"end":{"line":46,"column":79}},"26":{"start":{"line":48,"column":8},"end":{"line":48,"column":50}},"27":{"start":{"line":49,"column":8},"end":{"line":49,"column":59}},"28":{"start":{"line":50,"column":8},"end":{"line":50,"column":43}},"29":{"start":{"line":55,"column":4},"end":{"line":57,"column":6}},"30":{"start":{"line":56,"column":8},"end":{"line":56,"column":49}},"31":{"start":{"line":61,"column":4},"end":{"line":80,"column":6}},"32":{"start":{"line":62,"column":8},"end":{"line":62,"column":105}},"33":{"start":{"line":64,"column":8},"end":{"line":64,"column":26}},"34":{"start":{"line":65,"column":8},"end":{"line":76,"column":9}},"35":{"start":{"line":66,"column":12},"end":{"line":66,"column":34}},"36":{"start":{"line":67,"column":12},"end":{"line":75,"column":47}},"37":{"start":{"line":78,"column":8},"end":{"line":78,"column":69}},"38":{"start":{"line":79,"column":8},"end":{"line":79,"column":155}},"39":{"start":{"line":84,"column":4},"end":{"line":86,"column":6}},"40":{"start":{"line":85,"column":8},"end":{"line":85,"column":72}},"41":{"start":{"line":90,"column":4},"end":{"line":92,"column":6}},"42":{"start":{"line":91,"column":8},"end":{"line":91,"column":36}},"43":{"start":{"line":96,"column":4},"end":{"line":98,"column":6}},"44":{"start":{"line":97,"column":8},"end":{"line":97,"column":71}},"45":{"start":{"line":102,"column":4},"end":{"line":117,"column":6}},"46":{"start":{"line":103,"column":8},"end":{"line":105,"column":9}},"47":{"start":{"line":104,"column":12},"end":{"line":104,"column":24}},"48":{"start":{"line":106,"column":8},"end":{"line":106,"column":37}},"49":{"start":{"line":107,"column":8},"end":{"line":107,"column":55}},"50":{"start":{"line":108,"column":8},"end":{"line":108,"column":62}},"51":{"start":{"line":109,"column":8},"end":{"line":109,"column":68}},"52":{"start":{"line":110,"column":8},"end":{"line":110,"column":63}},"53":{"start":{"line":111,"column":8},"end":{"line":111,"column":75}},"54":{"start":{"line":112,"column":8},"end":{"line":112,"column":47}},"55":{"start":{"line":113,"column":8},"end":{"line":113,"column":47}},"56":{"start":{"line":114,"column":8},"end":{"line":114,"column":51}},"57":{"start":{"line":115,"column":8},"end":{"line":115,"column":50}},"58":{"start":{"line":116,"column":8},"end":{"line":116,"column":66}},"59":{"start":{"line":121,"column":4},"end":{"line":144,"column":6}},"60":{"start":{"line":122,"column":8},"end":{"line":122,"column":16}},"61":{"start":{"line":123,"column":8},"end":{"line":142,"column":9}},"62":{"start":{"line":124,"column":12},"end":{"line":124,"column":21}},"63":{"start":{"line":125,"column":12},"end":{"line":138,"column":13}},"64":{"start":{"line":126,"column":16},"end":{"line":126,"column":42}},"65":{"start":{"line":127,"column":16},"end":{"line":127,"column":51}},"66":{"start":{"line":128,"column":16},"end":{"line":136,"column":17}},"67":{"start":{"line":129,"column":20},"end":{"line":135,"column":21}},"68":{"start":{"line":130,"column":24},"end":{"line":130,"column":55}},"69":{"start":{"line":133,"column":24},"end":{"line":133,"column":99}},"70":{"start":{"line":134,"column":24},"end":{"line":134,"column":33}},"71":{"start":{"line":137,"column":16},"end":{"line":137,"column":72}},"72":{"start":{"line":141,"column":12},"end":{"line":141,"column":68}},"73":{"start":{"line":143,"column":8},"end":{"line":143,"column":19}},"74":{"start":{"line":149,"column":4},"end":{"line":161,"column":6}},"75":{"start":{"line":150,"column":8},"end":{"line":150,"column":104}},"76":{"start":{"line":151,"column":8},"end":{"line":153,"column":9}},"77":{"start":{"line":152,"column":12},"end":{"line":152,"column":24}},"78":{"start":{"line":154,"column":8},"end":{"line":159,"column":9}},"79":{"start":{"line":155,"column":12},"end":{"line":155,"column":97}},"80":{"start":{"line":156,"column":12},"end":{"line":158,"column":13}},"81":{"start":{"line":157,"column":16},"end":{"line":157,"column":29}},"82":{"start":{"line":160,"column":8},"end":{"line":160,"column":20}},"83":{"start":{"line":162,"column":4},"end":{"line":162,"column":36}},"84":{"start":{"line":163,"column":4},"end":{"line":163,"column":68}},"85":{"start":{"line":164,"column":4},"end":{"line":164,"column":16}},"86":{"start":{"line":166,"column":0},"end":{"line":166,"column":22}}},"branchMap":{"1":{"line":12,"type":"if","locations":[{"start":{"line":12,"column":8},"end":{"line":12,"column":8}},{"start":{"line":12,"column":8},"end":{"line":12,"column":8}}]},"2":{"line":12,"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":16}},{"start":{"line":12,"column":20},"end":{"line":12,"column":31}},{"start":{"line":12,"column":35},"end":{"line":12,"column":61}}]},"3":{"line":18,"type":"if","locations":[{"start":{"line":18,"column":16},"end":{"line":18,"column":16}},{"start":{"line":18,"column":16},"end":{"line":18,"column":16}}]},"4":{"line":18,"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":26}},{"start":{"line":18,"column":30},"end":{"line":18,"column":62}}]},"5":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":8},"end":{"line":30,"column":8}},{"start":{"line":30,"column":8},"end":{"line":30,"column":8}}]},"6":{"line":103,"type":"if","locations":[{"start":{"line":103,"column":8},"end":{"line":103,"column":8}},{"start":{"line":103,"column":8},"end":{"line":103,"column":8}}]},"7":{"line":103,"type":"binary-expr","locations":[{"start":{"line":103,"column":12},"end":{"line":103,"column":26}},{"start":{"line":103,"column":30},"end":{"line":103,"column":41}}]},"8":{"line":111,"type":"cond-expr","locations":[{"start":{"line":111,"column":31},"end":{"line":111,"column":40}},{"start":{"line":111,"column":43},"end":{"line":111,"column":74}}]},"9":{"line":111,"type":"cond-expr","locations":[{"start":{"line":111,"column":61},"end":{"line":111,"column":69}},{"start":{"line":111,"column":72},"end":{"line":111,"column":74}}]},"10":{"line":112,"type":"cond-expr","locations":[{"start":{"line":112,"column":31},"end":{"line":112,"column":40}},{"start":{"line":112,"column":43},"end":{"line":112,"column":46}}]},"11":{"line":113,"type":"cond-expr","locations":[{"start":{"line":113,"column":31},"end":{"line":113,"column":40}},{"start":{"line":113,"column":43},"end":{"line":113,"column":46}}]},"12":{"line":114,"type":"cond-expr","locations":[{"start":{"line":114,"column":33},"end":{"line":114,"column":43}},{"start":{"line":114,"column":46},"end":{"line":114,"column":50}}]},"13":{"line":115,"type":"cond-expr","locations":[{"start":{"line":115,"column":34},"end":{"line":115,"column":44}},{"start":{"line":115,"column":47},"end":{"line":115,"column":49}}]},"14":{"line":123,"type":"if","locations":[{"start":{"line":123,"column":8},"end":{"line":123,"column":8}},{"start":{"line":123,"column":8},"end":{"line":123,"column":8}}]},"15":{"line":128,"type":"if","locations":[{"start":{"line":128,"column":16},"end":{"line":128,"column":16}},{"start":{"line":128,"column":16},"end":{"line":128,"column":16}}]},"16":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":20},"end":{"line":129,"column":20}},{"start":{"line":129,"column":20},"end":{"line":129,"column":20}}]},"17":{"line":129,"type":"binary-expr","locations":[{"start":{"line":129,"column":24},"end":{"line":129,"column":40}},{"start":{"line":129,"column":44},"end":{"line":129,"column":83}}]},"18":{"line":150,"type":"binary-expr","locations":[{"start":{"line":150,"column":30},"end":{"line":150,"column":36}},{"start":{"line":150,"column":40},"end":{"line":150,"column":53}},{"start":{"line":150,"column":57},"end":{"line":150,"column":103}}]},"19":{"line":151,"type":"if","locations":[{"start":{"line":151,"column":8},"end":{"line":151,"column":8}},{"start":{"line":151,"column":8},"end":{"line":151,"column":8}}]},"20":{"line":151,"type":"binary-expr","locations":[{"start":{"line":151,"column":12},"end":{"line":151,"column":28}},{"start":{"line":151,"column":32},"end":{"line":151,"column":59}},{"start":{"line":151,"column":63},"end":{"line":151,"column":74}}]},"21":{"line":156,"type":"if","locations":[{"start":{"line":156,"column":12},"end":{"line":156,"column":12}},{"start":{"line":156,"column":12},"end":{"line":156,"column":12}}]},"22":{"line":163,"type":"cond-expr","locations":[{"start":{"line":163,"column":54},"end":{"line":163,"column":62}},{"start":{"line":163,"column":65},"end":{"line":163,"column":67}}]}},"code":["\"use strict\";","var url = require(\"url\");","var Logging = require(\"./Logging\");","var Util = (function () {","    function Util() {","    }","    /**","     * helper method to access userId and sessionId cookie","     */","    Util.getCookie = function (name, cookie) {","        var value = \"\";","        if (name && name.length && typeof cookie === \"string\") {","            var cookieName = name + \"=\";","            var cookies = cookie.split(\";\");","            for (var i = 0; i < cookies.length; i++) {","                var cookie = cookies[i];","                cookie = Util.trim(cookie);","                if (cookie && cookie.indexOf(cookieName) === 0) {","                    value = cookie.substring(cookieName.length, cookies[i].length);","                    break;","                }","            }","        }","        return value;","    };","    /**","     * helper method to trim strings (IE8 does not implement String.prototype.trim)","     */","    Util.trim = function (str) {","        if (typeof str === \"string\") {","            return str.replace(/^\\s+|\\s+$/g, \"\");","        }","        else {","            return \"\";","        }","    };","    /**","     * Convert an array of int32 to Base64 (no '==' at the end).","     * MSB first.","     */","    Util.int32ArrayToBase64 = function (array) {","        var toChar = function (v, i) {","            return String.fromCharCode((v >> i) & 0xFF);","        };","        var int32AsString = function (v) {","            return toChar(v, 24) + toChar(v, 16) + toChar(v, 8) + toChar(v, 0);","        };","        var x = array.map(int32AsString).join(\"\");","        var s = new Buffer(x, \"binary\").toString(\"base64\");","        return s.substr(0, s.indexOf(\"=\"));","    };","    /**","     * generate a random 32bit number (-0x80000000..0x7FFFFFFF).","     */","    Util.random32 = function () {","        return (0x100000000 * Math.random()) | 0;","    };","    /**","     * generate GUID","     */","    Util.newGuid = function () {","        var hexValues = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"A\", \"B\", \"C\", \"D\", \"E\", \"F\"];","        // c.f. rfc4122 (UUID version 4 = xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx)","        var oct = \"\", tmp;","        for (var a = 0; a < 4; a++) {","            tmp = Util.random32();","            oct +=","                hexValues[tmp & 0xF] +","                    hexValues[tmp >> 4 & 0xF] +","                    hexValues[tmp >> 8 & 0xF] +","                    hexValues[tmp >> 12 & 0xF] +","                    hexValues[tmp >> 16 & 0xF] +","                    hexValues[tmp >> 20 & 0xF] +","                    hexValues[tmp >> 24 & 0xF] +","                    hexValues[tmp >> 28 & 0xF];","        }","        // \"Set the two most significant bits (bits 6 and 7) of the clock_seq_hi_and_reserved to zero and one, respectively\"","        var clockSequenceHi = hexValues[8 + (Math.random() * 4) | 0];","        return oct.substr(0, 8) + \"-\" + oct.substr(9, 4) + \"-4\" + oct.substr(13, 3) + \"-\" + clockSequenceHi + oct.substr(16, 3) + \"-\" + oct.substr(19, 12);","    };","    /**","     * Check if an object is of type Array","     */","    Util.isArray = function (obj) {","        return Object.prototype.toString.call(obj) === \"[object Array]\";","    };","    /**","     * Check if an object is of type Error","     */","    Util.isError = function (obj) {","        return obj instanceof Error;","    };","    /**","     * Check if an object is of type Date","     */","    Util.isDate = function (obj) {","        return Object.prototype.toString.call(obj) === \"[object Date]\";","    };","    /**","     * Convert ms to c# time span format","     */","    Util.msToTimeSpan = function (totalms) {","        if (isNaN(totalms) || totalms < 0) {","            totalms = 0;","        }","        var ms = \"\" + totalms % 1000;","        var sec = \"\" + Math.floor(totalms / 1000) % 60;","        var min = \"\" + Math.floor(totalms / (1000 * 60)) % 60;","        var hour = \"\" + Math.floor(totalms / (1000 * 60 * 60)) % 24;","        var days = Math.floor(totalms / (1000 * 60 * 60 * 24));","        ms = ms.length === 1 ? \"00\" + ms : ms.length === 2 ? \"0\" + ms : ms;","        sec = sec.length < 2 ? \"0\" + sec : sec;","        min = min.length < 2 ? \"0\" + min : min;","        hour = hour.length < 2 ? \"0\" + hour : hour;","        var daysText = days > 0 ? days + \".\" : \"\";","        return daysText + hour + \":\" + min + \":\" + sec + \".\" + ms;","    };","    /**","     * Validate that an object is of type { [key: string]: string }","     */","    Util.validateStringMap = function (obj) {","        var map;","        if (typeof obj === \"object\") {","            map = {};","            for (var field in obj) {","                var property = obj[field];","                var propertyType = typeof property;","                if (propertyType !== \"string\") {","                    if (property != null && typeof property.toString === \"function\") {","                        property = property.toString();","                    }","                    else {","                        Logging.info(\"key: \" + field + \", invalid property type: \" + propertyType);","                        continue;","                    }","                }","                map[field] = property.trim(0, Util.MAX_PROPERTY_LENGTH);","            }","        }","        else {","            Logging.info(\"Invalid properties dropped from payload\");","        }","        return map;","    };","    /**","     * Checks if a request url is not on a excluded domain list","     * and if it is safe to add correlation headers (x-ms-request-source-ikey, x-ms-request-target-ikey)","     */","    Util.canIncludeCorrelationHeader = function (client, requestUrl) {","        var excludedDomains = client && client.config && client.config.correlationHeaderExcludedDomains;","        if (!excludedDomains || excludedDomains.length == 0 || !requestUrl) {","            return true;","        }","        for (var i = 0; i < excludedDomains.length; i++) {","            var regex = new RegExp(excludedDomains[i].replace(/\\./g, \"\\.\").replace(/\\*/g, \".*\"));","            if (regex.test(url.parse(requestUrl).hostname)) {","                return false;","            }","        }","        return true;","    };","    Util.MAX_PROPERTY_LENGTH = 1024;","    Util.document = typeof document !== \"undefined\" ? document : {};","    return Util;","}());","module.exports = Util;",""],"l":{"2":1,"3":1,"4":1,"5":1,"10":1,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"24":0,"29":1,"30":0,"31":0,"34":0,"41":1,"42":0,"43":0,"45":0,"46":0,"48":0,"49":0,"50":0,"55":1,"56":0,"61":1,"62":0,"64":0,"65":0,"66":0,"67":0,"78":0,"79":0,"84":1,"85":0,"90":1,"91":0,"96":1,"97":0,"102":1,"103":0,"104":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"121":1,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"133":0,"134":0,"137":0,"141":0,"143":0,"149":1,"150":0,"151":0,"152":0,"154":0,"155":0,"156":0,"157":0,"160":0,"162":1,"163":1,"164":1,"166":1}},"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/Library/Logging.js":{"path":"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/Library/Logging.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1,"16":1,"17":1,"18":1,"19":1},"b":{"1":[0,0],"2":[0,0]},"f":{"1":1,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"(anonymous_1)","line":2,"loc":{"start":{"line":2,"column":15},"end":{"line":2,"column":27}}},"2":{"name":"Logging","line":3,"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":23}}},"3":{"name":"(anonymous_3)","line":5,"loc":{"start":{"line":5,"column":19},"end":{"line":5,"column":38}}},"4":{"name":"(anonymous_4)","line":14,"loc":{"start":{"line":14,"column":19},"end":{"line":14,"column":38}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":27,"column":5}},"2":{"start":{"line":3,"column":4},"end":{"line":4,"column":5}},"3":{"start":{"line":5,"column":4},"end":{"line":13,"column":6}},"4":{"start":{"line":6,"column":8},"end":{"line":6,"column":32}},"5":{"start":{"line":7,"column":8},"end":{"line":9,"column":9}},"6":{"start":{"line":8,"column":12},"end":{"line":8,"column":51}},"7":{"start":{"line":10,"column":8},"end":{"line":12,"column":9}},"8":{"start":{"line":11,"column":12},"end":{"line":11,"column":64}},"9":{"start":{"line":14,"column":4},"end":{"line":22,"column":6}},"10":{"start":{"line":15,"column":8},"end":{"line":15,"column":32}},"11":{"start":{"line":16,"column":8},"end":{"line":18,"column":9}},"12":{"start":{"line":17,"column":12},"end":{"line":17,"column":51}},"13":{"start":{"line":19,"column":8},"end":{"line":21,"column":9}},"14":{"start":{"line":20,"column":12},"end":{"line":20,"column":64}},"15":{"start":{"line":23,"column":4},"end":{"line":23,"column":32}},"16":{"start":{"line":24,"column":4},"end":{"line":24,"column":36}},"17":{"start":{"line":25,"column":4},"end":{"line":25,"column":41}},"18":{"start":{"line":26,"column":4},"end":{"line":26,"column":19}},"19":{"start":{"line":28,"column":0},"end":{"line":28,"column":25}}},"branchMap":{"1":{"line":10,"type":"if","locations":[{"start":{"line":10,"column":8},"end":{"line":10,"column":8}},{"start":{"line":10,"column":8},"end":{"line":10,"column":8}}]},"2":{"line":19,"type":"if","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":8}},{"start":{"line":19,"column":8},"end":{"line":19,"column":8}}]}},"code":["\"use strict\";","var Logging = (function () {","    function Logging() {","    }","    Logging.info = function (message) {","        var optionalParams = [];","        for (var _i = 1; _i < arguments.length; _i++) {","            optionalParams[_i - 1] = arguments[_i];","        }","        if (Logging.enableDebug) {","            console.info(Logging.TAG + message, optionalParams);","        }","    };","    Logging.warn = function (message) {","        var optionalParams = [];","        for (var _i = 1; _i < arguments.length; _i++) {","            optionalParams[_i - 1] = arguments[_i];","        }","        if (!Logging.disableWarnings) {","            console.warn(Logging.TAG + message, optionalParams);","        }","    };","    Logging.enableDebug = false;","    Logging.disableWarnings = false;","    Logging.TAG = \"ApplicationInsights:\";","    return Logging;","}());","module.exports = Logging;",""],"l":{"2":1,"3":1,"5":1,"6":0,"7":0,"8":0,"10":0,"11":0,"14":1,"15":0,"16":0,"17":0,"19":0,"20":0,"23":1,"24":1,"25":1,"26":1,"28":1}},"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/AutoCollection/Console.js":{"path":"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/AutoCollection/Console.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":1,"8":1,"9":0,"10":1,"11":0,"12":1,"13":1,"14":1},"b":{"1":[0,0]},"f":{"1":1,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"(anonymous_1)","line":2,"loc":{"start":{"line":2,"column":26},"end":{"line":2,"column":38}}},"2":{"name":"AutoCollectConsole","line":3,"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":40}}},"3":{"name":"(anonymous_3)","line":10,"loc":{"start":{"line":10,"column":42},"end":{"line":10,"column":63}}},"4":{"name":"(anonymous_4)","line":13,"loc":{"start":{"line":13,"column":49},"end":{"line":13,"column":61}}},"5":{"name":"(anonymous_5)","line":16,"loc":{"start":{"line":16,"column":43},"end":{"line":16,"column":55}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":21,"column":5}},"2":{"start":{"line":3,"column":4},"end":{"line":9,"column":5}},"3":{"start":{"line":4,"column":8},"end":{"line":6,"column":9}},"4":{"start":{"line":5,"column":12},"end":{"line":5,"column":121}},"5":{"start":{"line":7,"column":8},"end":{"line":7,"column":30}},"6":{"start":{"line":8,"column":8},"end":{"line":8,"column":43}},"7":{"start":{"line":10,"column":4},"end":{"line":12,"column":6}},"8":{"start":{"line":13,"column":4},"end":{"line":15,"column":6}},"9":{"start":{"line":14,"column":8},"end":{"line":14,"column":35}},"10":{"start":{"line":16,"column":4},"end":{"line":18,"column":6}},"11":{"start":{"line":17,"column":8},"end":{"line":17,"column":43}},"12":{"start":{"line":19,"column":4},"end":{"line":19,"column":80}},"13":{"start":{"line":20,"column":4},"end":{"line":20,"column":30}},"14":{"start":{"line":22,"column":0},"end":{"line":22,"column":36}}},"branchMap":{"1":{"line":4,"type":"if","locations":[{"start":{"line":4,"column":8},"end":{"line":4,"column":8}},{"start":{"line":4,"column":8},"end":{"line":4,"column":8}}]}},"code":["\"use strict\";","var AutoCollectConsole = (function () {","    function AutoCollectConsole(client) {","        if (!!AutoCollectConsole.INSTANCE) {","            throw new Error(\"Console logging adapter tracking should be configured from the applicationInsights object\");","        }","        this._client = client;","        AutoCollectConsole.INSTANCE = this;","    }","    AutoCollectConsole.prototype.enable = function (isEnabled) {","        // todo: investigate feasibility/utility of this; does it make sense to have a logging adapter in node?","    };","    AutoCollectConsole.prototype.isInitialized = function () {","        return this._isInitialized;","    };","    AutoCollectConsole.prototype.dispose = function () {","        AutoCollectConsole.INSTANCE = null;","    };","    AutoCollectConsole._methodNames = [\"debug\", \"info\", \"log\", \"warn\", \"error\"];","    return AutoCollectConsole;","}());","module.exports = AutoCollectConsole;",""],"l":{"2":1,"3":1,"4":0,"5":0,"7":0,"8":0,"10":1,"13":1,"14":0,"16":1,"17":0,"19":1,"20":1,"22":1}},"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/AutoCollection/Exceptions.js":{"path":"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/AutoCollection/Exceptions.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":1,"10":0,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":1,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":1,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":1,"85":0,"86":0,"87":1,"88":1,"89":1,"90":1,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":1,"107":1,"108":1,"109":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0]},"f":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":1,"10":0},"fnMap":{"1":{"name":"(anonymous_1)","line":5,"loc":{"start":{"line":5,"column":29},"end":{"line":5,"column":41}}},"2":{"name":"AutoCollectExceptions","line":6,"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":43}}},"3":{"name":"(anonymous_3)","line":13,"loc":{"start":{"line":13,"column":52},"end":{"line":13,"column":64}}},"4":{"name":"(anonymous_4)","line":16,"loc":{"start":{"line":16,"column":45},"end":{"line":16,"column":66}}},"5":{"name":"(anonymous_5)","line":22,"loc":{"start":{"line":22,"column":29},"end":{"line":22,"column":55}}},"6":{"name":"(anonymous_6)","line":54,"loc":{"start":{"line":54,"column":45},"end":{"line":54,"column":99}}},"7":{"name":"(anonymous_7)","line":72,"loc":{"start":{"line":72,"column":39},"end":{"line":72,"column":56}}},"8":{"name":"(anonymous_8)","line":117,"loc":{"start":{"line":117,"column":46},"end":{"line":117,"column":58}}},"9":{"name":"(anonymous_9)","line":124,"loc":{"start":{"line":124,"column":19},"end":{"line":124,"column":31}}},"10":{"name":"_StackFrame","line":125,"loc":{"start":{"line":125,"column":4},"end":{"line":125,"column":39}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":54}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":38}},"3":{"start":{"line":5,"column":0},"end":{"line":123,"column":5}},"4":{"start":{"line":6,"column":4},"end":{"line":12,"column":5}},"5":{"start":{"line":7,"column":8},"end":{"line":9,"column":9}},"6":{"start":{"line":8,"column":12},"end":{"line":8,"column":107}},"7":{"start":{"line":10,"column":8},"end":{"line":10,"column":46}},"8":{"start":{"line":11,"column":8},"end":{"line":11,"column":30}},"9":{"start":{"line":13,"column":4},"end":{"line":15,"column":6}},"10":{"start":{"line":14,"column":8},"end":{"line":14,"column":35}},"11":{"start":{"line":16,"column":4},"end":{"line":46,"column":6}},"12":{"start":{"line":17,"column":8},"end":{"line":17,"column":25}},"13":{"start":{"line":18,"column":8},"end":{"line":45,"column":9}},"14":{"start":{"line":19,"column":12},"end":{"line":19,"column":39}},"15":{"start":{"line":20,"column":12},"end":{"line":20,"column":28}},"16":{"start":{"line":21,"column":12},"end":{"line":34,"column":13}},"17":{"start":{"line":22,"column":16},"end":{"line":29,"column":18}},"18":{"start":{"line":23,"column":20},"end":{"line":23,"column":84}},"19":{"start":{"line":24,"column":20},"end":{"line":24,"column":67}},"20":{"start":{"line":25,"column":20},"end":{"line":25,"column":64}},"21":{"start":{"line":26,"column":20},"end":{"line":28,"column":21}},"22":{"start":{"line":27,"column":24},"end":{"line":27,"column":36}},"23":{"start":{"line":30,"column":16},"end":{"line":30,"column":72}},"24":{"start":{"line":31,"column":16},"end":{"line":31,"column":73}},"25":{"start":{"line":32,"column":16},"end":{"line":32,"column":79}},"26":{"start":{"line":33,"column":16},"end":{"line":33,"column":80}},"27":{"start":{"line":37,"column":12},"end":{"line":44,"column":13}},"28":{"start":{"line":38,"column":16},"end":{"line":38,"column":91}},"29":{"start":{"line":39,"column":16},"end":{"line":39,"column":92}},"30":{"start":{"line":40,"column":16},"end":{"line":40,"column":58}},"31":{"start":{"line":41,"column":16},"end":{"line":41,"column":58}},"32":{"start":{"line":42,"column":16},"end":{"line":42,"column":53}},"33":{"start":{"line":43,"column":16},"end":{"line":43,"column":53}},"34":{"start":{"line":54,"column":4},"end":{"line":71,"column":6}},"35":{"start":{"line":55,"column":8},"end":{"line":55,"column":70}},"36":{"start":{"line":56,"column":8},"end":{"line":56,"column":42}},"37":{"start":{"line":57,"column":8},"end":{"line":57,"column":80}},"38":{"start":{"line":58,"column":8},"end":{"line":58,"column":46}},"39":{"start":{"line":59,"column":8},"end":{"line":59,"column":34}},"40":{"start":{"line":60,"column":8},"end":{"line":60,"column":35}},"41":{"start":{"line":61,"column":8},"end":{"line":61,"column":80}},"42":{"start":{"line":62,"column":8},"end":{"line":62,"column":49}},"43":{"start":{"line":63,"column":8},"end":{"line":63,"column":47}},"44":{"start":{"line":64,"column":8},"end":{"line":64,"column":62}},"45":{"start":{"line":65,"column":8},"end":{"line":65,"column":126}},"46":{"start":{"line":66,"column":8},"end":{"line":66,"column":52}},"47":{"start":{"line":67,"column":8},"end":{"line":67,"column":56}},"48":{"start":{"line":68,"column":8},"end":{"line":68,"column":70}},"49":{"start":{"line":69,"column":8},"end":{"line":69,"column":34}},"50":{"start":{"line":70,"column":8},"end":{"line":70,"column":20}},"51":{"start":{"line":72,"column":4},"end":{"line":116,"column":6}},"52":{"start":{"line":73,"column":8},"end":{"line":73,"column":36}},"53":{"start":{"line":74,"column":8},"end":{"line":114,"column":9}},"54":{"start":{"line":75,"column":12},"end":{"line":75,"column":43}},"55":{"start":{"line":76,"column":12},"end":{"line":76,"column":29}},"56":{"start":{"line":77,"column":12},"end":{"line":77,"column":26}},"57":{"start":{"line":78,"column":12},"end":{"line":78,"column":37}},"58":{"start":{"line":79,"column":12},"end":{"line":86,"column":13}},"59":{"start":{"line":80,"column":16},"end":{"line":80,"column":38}},"60":{"start":{"line":81,"column":16},"end":{"line":85,"column":17}},"61":{"start":{"line":82,"column":20},"end":{"line":82,"column":74}},"62":{"start":{"line":83,"column":20},"end":{"line":83,"column":64}},"63":{"start":{"line":84,"column":20},"end":{"line":84,"column":50}},"64":{"start":{"line":89,"column":12},"end":{"line":89,"column":58}},"65":{"start":{"line":90,"column":12},"end":{"line":113,"column":13}},"66":{"start":{"line":91,"column":16},"end":{"line":91,"column":29}},"67":{"start":{"line":92,"column":16},"end":{"line":92,"column":51}},"68":{"start":{"line":93,"column":16},"end":{"line":93,"column":29}},"69":{"start":{"line":94,"column":16},"end":{"line":94,"column":40}},"70":{"start":{"line":95,"column":16},"end":{"line":95,"column":42}},"71":{"start":{"line":96,"column":16},"end":{"line":112,"column":17}},"72":{"start":{"line":98,"column":20},"end":{"line":98,"column":62}},"73":{"start":{"line":99,"column":20},"end":{"line":99,"column":63}},"74":{"start":{"line":100,"column":20},"end":{"line":100,"column":42}},"75":{"start":{"line":101,"column":20},"end":{"line":106,"column":21}},"76":{"start":{"line":103,"column":24},"end":{"line":103,"column":71}},"77":{"start":{"line":104,"column":24},"end":{"line":104,"column":66}},"78":{"start":{"line":105,"column":24},"end":{"line":105,"column":30}},"79":{"start":{"line":108,"column":20},"end":{"line":108,"column":40}},"80":{"start":{"line":109,"column":20},"end":{"line":109,"column":42}},"81":{"start":{"line":110,"column":20},"end":{"line":110,"column":27}},"82":{"start":{"line":111,"column":20},"end":{"line":111,"column":28}},"83":{"start":{"line":115,"column":8},"end":{"line":115,"column":27}},"84":{"start":{"line":117,"column":4},"end":{"line":120,"column":6}},"85":{"start":{"line":118,"column":8},"end":{"line":118,"column":46}},"86":{"start":{"line":119,"column":8},"end":{"line":119,"column":36}},"87":{"start":{"line":121,"column":4},"end":{"line":121,"column":42}},"88":{"start":{"line":122,"column":4},"end":{"line":122,"column":33}},"89":{"start":{"line":124,"column":0},"end":{"line":149,"column":5}},"90":{"start":{"line":125,"column":4},"end":{"line":143,"column":5}},"91":{"start":{"line":126,"column":8},"end":{"line":126,"column":29}},"92":{"start":{"line":127,"column":8},"end":{"line":127,"column":27}},"93":{"start":{"line":128,"column":8},"end":{"line":128,"column":36}},"94":{"start":{"line":129,"column":8},"end":{"line":129,"column":41}},"95":{"start":{"line":130,"column":8},"end":{"line":130,"column":53}},"96":{"start":{"line":131,"column":8},"end":{"line":135,"column":9}},"97":{"start":{"line":132,"column":12},"end":{"line":132,"column":63}},"98":{"start":{"line":133,"column":12},"end":{"line":133,"column":69}},"99":{"start":{"line":134,"column":12},"end":{"line":134,"column":50}},"100":{"start":{"line":136,"column":8},"end":{"line":136,"column":47}},"101":{"start":{"line":137,"column":8},"end":{"line":137,"column":49}},"102":{"start":{"line":138,"column":8},"end":{"line":138,"column":49}},"103":{"start":{"line":140,"column":8},"end":{"line":140,"column":49}},"104":{"start":{"line":141,"column":8},"end":{"line":141,"column":57}},"105":{"start":{"line":142,"column":8},"end":{"line":142,"column":56}},"106":{"start":{"line":146,"column":4},"end":{"line":146,"column":91}},"107":{"start":{"line":147,"column":4},"end":{"line":147,"column":30}},"108":{"start":{"line":148,"column":4},"end":{"line":148,"column":23}},"109":{"start":{"line":150,"column":0},"end":{"line":150,"column":39}}},"branchMap":{"1":{"line":7,"type":"if","locations":[{"start":{"line":7,"column":8},"end":{"line":7,"column":8}},{"start":{"line":7,"column":8},"end":{"line":7,"column":8}}]},"2":{"line":18,"type":"if","locations":[{"start":{"line":18,"column":8},"end":{"line":18,"column":8}},{"start":{"line":18,"column":8},"end":{"line":18,"column":8}}]},"3":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":12},"end":{"line":21,"column":12}},{"start":{"line":21,"column":12},"end":{"line":21,"column":12}}]},"4":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":20},"end":{"line":26,"column":20}},{"start":{"line":26,"column":20},"end":{"line":26,"column":20}}]},"5":{"line":37,"type":"if","locations":[{"start":{"line":37,"column":12},"end":{"line":37,"column":12}},{"start":{"line":37,"column":12},"end":{"line":37,"column":12}}]},"6":{"line":65,"type":"binary-expr","locations":[{"start":{"line":65,"column":40},"end":{"line":65,"column":82}},{"start":{"line":65,"column":86},"end":{"line":65,"column":125}}]},"7":{"line":74,"type":"if","locations":[{"start":{"line":74,"column":8},"end":{"line":74,"column":8}},{"start":{"line":74,"column":8},"end":{"line":74,"column":8}}]},"8":{"line":81,"type":"if","locations":[{"start":{"line":81,"column":16},"end":{"line":81,"column":16}},{"start":{"line":81,"column":16},"end":{"line":81,"column":16}}]},"9":{"line":90,"type":"if","locations":[{"start":{"line":90,"column":12},"end":{"line":90,"column":12}},{"start":{"line":90,"column":12},"end":{"line":90,"column":12}}]},"10":{"line":101,"type":"if","locations":[{"start":{"line":101,"column":20},"end":{"line":101,"column":20}},{"start":{"line":101,"column":20},"end":{"line":101,"column":20}}]},"11":{"line":131,"type":"if","locations":[{"start":{"line":131,"column":8},"end":{"line":131,"column":8}},{"start":{"line":131,"column":8},"end":{"line":131,"column":8}}]},"12":{"line":131,"type":"binary-expr","locations":[{"start":{"line":131,"column":12},"end":{"line":131,"column":19}},{"start":{"line":131,"column":23},"end":{"line":131,"column":42}}]},"13":{"line":132,"type":"binary-expr","locations":[{"start":{"line":132,"column":26},"end":{"line":132,"column":47}},{"start":{"line":132,"column":51},"end":{"line":132,"column":62}}]},"14":{"line":133,"type":"binary-expr","locations":[{"start":{"line":133,"column":28},"end":{"line":133,"column":49}},{"start":{"line":133,"column":53},"end":{"line":133,"column":68}}]},"15":{"line":134,"type":"binary-expr","locations":[{"start":{"line":134,"column":24},"end":{"line":134,"column":44}},{"start":{"line":134,"column":48},"end":{"line":134,"column":49}}]}},"code":["///<reference path=\"..\\typings\\globals\\node\\index.d.ts\" />","\"use strict\";","var ContractsModule = require(\"../Library/Contracts\");","var Util = require(\"../Library/Util\");","var AutoCollectExceptions = (function () {","    function AutoCollectExceptions(client) {","        if (!!AutoCollectExceptions.INSTANCE) {","            throw new Error(\"Exception tracking should be configured from the applicationInsights object\");","        }","        AutoCollectExceptions.INSTANCE = this;","        this._client = client;","    }","    AutoCollectExceptions.prototype.isInitialized = function () {","        return this._isInitialized;","    };","    AutoCollectExceptions.prototype.enable = function (isEnabled) {","        var _this = this;","        if (isEnabled) {","            this._isInitialized = true;","            var self = this;","            if (!this._exceptionListenerHandle) {","                var handle = function (reThrow, error) {","                    var data = AutoCollectExceptions.getExceptionData(error, false);","                    var envelope = _this._client.getEnvelope(data);","                    _this._client.channel.handleCrash(envelope);","                    if (reThrow) {","                        throw error;","                    }","                };","                this._exceptionListenerHandle = handle.bind(this, true);","                this._rejectionListenerHandle = handle.bind(this, false);","                process.on(\"uncaughtException\", this._exceptionListenerHandle);","                process.on(\"unhandledRejection\", this._rejectionListenerHandle);","            }","        }","        else {","            if (this._exceptionListenerHandle) {","                process.removeListener(\"uncaughtException\", this._exceptionListenerHandle);","                process.removeListener(\"unhandledRejection\", this._rejectionListenerHandle);","                this._exceptionListenerHandle = undefined;","                this._rejectionListenerHandle = undefined;","                delete this._exceptionListenerHandle;","                delete this._rejectionListenerHandle;","            }","        }","    };","    /**","     * Track an exception","     * @param error the exception to track","     * @param handledAt where this exception was handled (leave null for unhandled)","     * @param properties additional properties","     * @param measurements metrics associated with this event, displayed in Metrics Explorer on the portal. Defaults to empty.","     */","    AutoCollectExceptions.getExceptionData = function (error, isHandled, properties, measurements) {","        var exception = new ContractsModule.Contracts.ExceptionData();","        exception.properties = properties;","        exception.severityLevel = ContractsModule.Contracts.SeverityLevel.Error;","        exception.measurements = measurements;","        exception.exceptions = [];","        var stack = error[\"stack\"];","        var exceptionDetails = new ContractsModule.Contracts.ExceptionDetails();","        exceptionDetails.message = error.message;","        exceptionDetails.typeName = error.name;","        exceptionDetails.parsedStack = this.parseStack(stack);","        exceptionDetails.hasFullStack = Util.isArray(exceptionDetails.parsedStack) && exceptionDetails.parsedStack.length > 0;","        exception.exceptions.push(exceptionDetails);","        var data = new ContractsModule.Contracts.Data();","        data.baseType = \"Microsoft.ApplicationInsights.ExceptionData\";","        data.baseData = exception;","        return data;","    };","    AutoCollectExceptions.parseStack = function (stack) {","        var parsedStack = undefined;","        if (typeof stack === \"string\") {","            var frames = stack.split(\"\\n\");","            parsedStack = [];","            var level = 0;","            var totalSizeInBytes = 0;","            for (var i = 0; i <= frames.length; i++) {","                var frame = frames[i];","                if (_StackFrame.regex.test(frame)) {","                    var parsedFrame = new _StackFrame(frames[i], level++);","                    totalSizeInBytes += parsedFrame.sizeInBytes;","                    parsedStack.push(parsedFrame);","                }","            }","            // DP Constraint - exception parsed stack must be < 32KB","            // remove frames from the middle to meet the threshold","            var exceptionParsedStackThreshold = 32 * 1024;","            if (totalSizeInBytes > exceptionParsedStackThreshold) {","                var left = 0;","                var right = parsedStack.length - 1;","                var size = 0;","                var acceptedLeft = left;","                var acceptedRight = right;","                while (left < right) {","                    // check size","                    var lSize = parsedStack[left].sizeInBytes;","                    var rSize = parsedStack[right].sizeInBytes;","                    size += lSize + rSize;","                    if (size > exceptionParsedStackThreshold) {","                        // remove extra frames from the middle","                        var howMany = acceptedRight - acceptedLeft + 1;","                        parsedStack.splice(acceptedLeft, howMany);","                        break;","                    }","                    // update pointers","                    acceptedLeft = left;","                    acceptedRight = right;","                    left++;","                    right--;","                }","            }","        }","        return parsedStack;","    };","    AutoCollectExceptions.prototype.dispose = function () {","        AutoCollectExceptions.INSTANCE = null;","        this._isInitialized = false;","    };","    AutoCollectExceptions.INSTANCE = null;","    return AutoCollectExceptions;","}());","var _StackFrame = (function () {","    function _StackFrame(frame, level) {","        this.sizeInBytes = 0;","        this.level = level;","        this.method = \"<no_method>\";","        this.assembly = Util.trim(frame);","        var matches = frame.match(_StackFrame.regex);","        if (matches && matches.length >= 5) {","            this.method = Util.trim(matches[2]) || this.method;","            this.fileName = Util.trim(matches[4]) || \"<no_filename>\";","            this.line = parseInt(matches[5]) || 0;","        }","        this.sizeInBytes += this.method.length;","        this.sizeInBytes += this.fileName.length;","        this.sizeInBytes += this.assembly.length;","        // todo: these might need to be removed depending on how the back-end settles on their size calculation","        this.sizeInBytes += _StackFrame.baseSize;","        this.sizeInBytes += this.level.toString().length;","        this.sizeInBytes += this.line.toString().length;","    }","    // regex to match stack frames from ie/chrome/ff","    // methodName=$2, fileName=$4, lineNo=$5, column=$6","    _StackFrame.regex = /^([\\s]+at)?(.*?)(\\@|\\s\\(|\\s)([^\\(\\@\\n]+):([0-9]+):([0-9]+)(\\)?)$/;","    _StackFrame.baseSize = 58; //'{\"method\":\"\",\"level\":,\"assembly\":\"\",\"fileName\":\"\",\"line\":}'.length","    return _StackFrame;","}());","module.exports = AutoCollectExceptions;",""],"l":{"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"10":0,"11":0,"13":1,"14":0,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"30":0,"31":0,"32":0,"33":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"54":1,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"72":1,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"98":0,"99":0,"100":0,"101":0,"103":0,"104":0,"105":0,"108":0,"109":0,"110":0,"111":0,"115":0,"117":1,"118":0,"119":0,"121":1,"122":1,"124":1,"125":1,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"136":0,"137":0,"138":0,"140":0,"141":0,"142":0,"146":1,"147":1,"148":1,"150":1}},"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/Library/Contracts.js":{"path":"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/Library/Contracts.js","s":{"1":1,"2":10,"3":0,"4":0,"5":1,"6":10,"7":10,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":1,"58":1,"59":0,"60":0,"61":0,"62":0,"63":0,"64":1,"65":1,"66":1,"67":1,"68":1,"69":0,"70":0,"71":0,"72":0,"73":0,"74":1,"75":1,"76":1,"77":1,"78":1,"79":0,"80":0,"81":0,"82":0,"83":1,"84":1,"85":1,"86":1,"87":1,"88":0,"89":0,"90":0,"91":0,"92":0,"93":1,"94":1,"95":1,"96":1,"97":1,"98":1,"99":1,"100":1,"101":0,"102":0,"103":1,"104":1,"105":1,"106":1,"107":0,"108":1,"109":1,"110":1,"111":1,"112":1,"113":0,"114":0,"115":0,"116":0,"117":0,"118":1,"119":1,"120":1,"121":1,"122":1,"123":0,"124":0,"125":0,"126":0,"127":0,"128":1,"129":1,"130":1,"131":1,"132":1,"133":0,"134":0,"135":0,"136":0,"137":1,"138":1,"139":1,"140":1,"141":1,"142":1,"143":1,"144":1,"145":1,"146":1,"147":0,"148":0,"149":0,"150":0,"151":0,"152":1,"153":1,"154":1,"155":1,"156":1,"157":0,"158":0,"159":0,"160":0,"161":0,"162":1,"163":1,"164":1,"165":1,"166":1,"167":0,"168":0,"169":0,"170":0,"171":1,"172":1,"173":1,"174":1,"175":1,"176":0,"177":0,"178":0,"179":0,"180":0,"181":1,"182":1},"b":{"1":[1,1,1],"2":[0,0],"3":[0,10],"4":[1,1],"5":[1,1],"6":[1,1]},"f":{"1":10,"2":10,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":1,"11":0,"12":1,"13":0,"14":1,"15":0,"16":1,"17":0,"18":1,"19":0,"20":1,"21":0,"22":1,"23":0,"24":1,"25":0,"26":1,"27":0,"28":1,"29":0,"30":1,"31":0,"32":1,"33":0,"34":1,"35":0,"36":1,"37":0,"38":1,"39":0,"40":1,"41":0},"fnMap":{"1":{"name":"(anonymous_1)","line":5,"loc":{"start":{"line":5,"column":44},"end":{"line":5,"column":60}}},"2":{"name":"__","line":7,"loc":{"start":{"line":7,"column":4},"end":{"line":7,"column":18}}},"3":{"name":"(anonymous_3)","line":11,"loc":{"start":{"line":11,"column":1},"end":{"line":11,"column":22}}},"4":{"name":"(anonymous_4)","line":12,"loc":{"start":{"line":12,"column":5},"end":{"line":12,"column":30}}},"5":{"name":"(anonymous_5)","line":17,"loc":{"start":{"line":17,"column":5},"end":{"line":17,"column":30}}},"6":{"name":"(anonymous_6)","line":25,"loc":{"start":{"line":25,"column":26},"end":{"line":25,"column":38}}},"7":{"name":"ContextTagKeys","line":26,"loc":{"start":{"line":26,"column":8},"end":{"line":26,"column":34}}},"8":{"name":"(anonymous_8)","line":55,"loc":{"start":{"line":55,"column":18},"end":{"line":55,"column":30}}},"9":{"name":"Domain","line":56,"loc":{"start":{"line":56,"column":8},"end":{"line":56,"column":26}}},"10":{"name":"(anonymous_10)","line":61,"loc":{"start":{"line":61,"column":16},"end":{"line":61,"column":28}}},"11":{"name":"Data","line":62,"loc":{"start":{"line":62,"column":8},"end":{"line":62,"column":24}}},"12":{"name":"(anonymous_12)","line":67,"loc":{"start":{"line":67,"column":20},"end":{"line":67,"column":32}}},"13":{"name":"Envelope","line":68,"loc":{"start":{"line":68,"column":8},"end":{"line":68,"column":28}}},"14":{"name":"(anonymous_14)","line":80,"loc":{"start":{"line":80,"column":21},"end":{"line":80,"column":39}}},"15":{"name":"EventData","line":82,"loc":{"start":{"line":82,"column":8},"end":{"line":82,"column":29}}},"16":{"name":"(anonymous_16)","line":92,"loc":{"start":{"line":92,"column":23},"end":{"line":92,"column":41}}},"17":{"name":"MessageData","line":94,"loc":{"start":{"line":94,"column":8},"end":{"line":94,"column":31}}},"18":{"name":"(anonymous_18)","line":103,"loc":{"start":{"line":103,"column":25},"end":{"line":103,"column":43}}},"19":{"name":"ExceptionData","line":105,"loc":{"start":{"line":105,"column":8},"end":{"line":105,"column":33}}},"20":{"name":"(anonymous_20)","line":115,"loc":{"start":{"line":115,"column":22},"end":{"line":115,"column":34}}},"21":{"name":"StackFrame","line":116,"loc":{"start":{"line":116,"column":8},"end":{"line":116,"column":30}}},"22":{"name":"(anonymous_22)","line":121,"loc":{"start":{"line":121,"column":28},"end":{"line":121,"column":40}}},"23":{"name":"ExceptionDetails","line":122,"loc":{"start":{"line":122,"column":8},"end":{"line":122,"column":36}}},"24":{"name":"(anonymous_24)","line":129,"loc":{"start":{"line":129,"column":21},"end":{"line":129,"column":33}}},"25":{"name":"DataPoint","line":130,"loc":{"start":{"line":130,"column":8},"end":{"line":130,"column":29}}},"26":{"name":"(anonymous_26)","line":136,"loc":{"start":{"line":136,"column":22},"end":{"line":136,"column":40}}},"27":{"name":"MetricData","line":138,"loc":{"start":{"line":138,"column":8},"end":{"line":138,"column":30}}},"28":{"name":"(anonymous_28)","line":148,"loc":{"start":{"line":148,"column":24},"end":{"line":148,"column":42}}},"29":{"name":"PageViewData","line":150,"loc":{"start":{"line":150,"column":8},"end":{"line":150,"column":32}}},"30":{"name":"(anonymous_30)","line":160,"loc":{"start":{"line":160,"column":28},"end":{"line":160,"column":46}}},"31":{"name":"PageViewPerfData","line":162,"loc":{"start":{"line":162,"column":8},"end":{"line":162,"column":36}}},"32":{"name":"(anonymous_32)","line":171,"loc":{"start":{"line":171,"column":41},"end":{"line":171,"column":53}}},"33":{"name":"RemoteDependencyDataConstants","line":172,"loc":{"start":{"line":172,"column":8},"end":{"line":172,"column":49}}},"34":{"name":"(anonymous_34)","line":178,"loc":{"start":{"line":178,"column":32},"end":{"line":178,"column":50}}},"35":{"name":"RemoteDependencyData","line":180,"loc":{"start":{"line":180,"column":8},"end":{"line":180,"column":40}}},"36":{"name":"(anonymous_36)","line":190,"loc":{"start":{"line":190,"column":24},"end":{"line":190,"column":42}}},"37":{"name":"AjaxCallData","line":192,"loc":{"start":{"line":192,"column":8},"end":{"line":192,"column":32}}},"38":{"name":"(anonymous_38)","line":202,"loc":{"start":{"line":202,"column":23},"end":{"line":202,"column":41}}},"39":{"name":"RequestData","line":204,"loc":{"start":{"line":204,"column":8},"end":{"line":204,"column":31}}},"40":{"name":"(anonymous_40)","line":213,"loc":{"start":{"line":213,"column":34},"end":{"line":213,"column":52}}},"41":{"name":"PerformanceCounterData","line":215,"loc":{"start":{"line":215,"column":8},"end":{"line":215,"column":42}}}},"statementMap":{"1":{"start":{"line":5,"column":0},"end":{"line":9,"column":2}},"2":{"start":{"line":6,"column":4},"end":{"line":6,"column":58}},"3":{"start":{"line":6,"column":21},"end":{"line":6,"column":58}},"4":{"start":{"line":6,"column":46},"end":{"line":6,"column":58}},"5":{"start":{"line":7,"column":4},"end":{"line":7,"column":43}},"6":{"start":{"line":7,"column":20},"end":{"line":7,"column":41}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":89}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":14}},"9":{"start":{"line":11,"column":0},"end":{"line":225,"column":62}},"10":{"start":{"line":12,"column":4},"end":{"line":15,"column":66}},"11":{"start":{"line":13,"column":8},"end":{"line":13,"column":72}},"12":{"start":{"line":14,"column":8},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":48}},"14":{"start":{"line":17,"column":4},"end":{"line":23,"column":66}},"15":{"start":{"line":18,"column":8},"end":{"line":18,"column":64}},"16":{"start":{"line":19,"column":8},"end":{"line":19,"column":72}},"17":{"start":{"line":20,"column":8},"end":{"line":20,"column":64}},"18":{"start":{"line":21,"column":8},"end":{"line":21,"column":60}},"19":{"start":{"line":22,"column":8},"end":{"line":22,"column":66}},"20":{"start":{"line":24,"column":4},"end":{"line":24,"column":48}},"21":{"start":{"line":25,"column":4},"end":{"line":53,"column":9}},"22":{"start":{"line":26,"column":8},"end":{"line":51,"column":9}},"23":{"start":{"line":27,"column":12},"end":{"line":27,"column":59}},"24":{"start":{"line":28,"column":12},"end":{"line":28,"column":43}},"25":{"start":{"line":29,"column":12},"end":{"line":29,"column":51}},"26":{"start":{"line":30,"column":12},"end":{"line":30,"column":49}},"27":{"start":{"line":31,"column":12},"end":{"line":31,"column":53}},"28":{"start":{"line":32,"column":12},"end":{"line":32,"column":57}},"29":{"start":{"line":33,"column":12},"end":{"line":33,"column":47}},"30":{"start":{"line":34,"column":12},"end":{"line":34,"column":47}},"31":{"start":{"line":35,"column":12},"end":{"line":35,"column":49}},"32":{"start":{"line":36,"column":12},"end":{"line":36,"column":53}},"33":{"start":{"line":37,"column":12},"end":{"line":37,"column":61}},"34":{"start":{"line":38,"column":12},"end":{"line":38,"column":75}},"35":{"start":{"line":39,"column":12},"end":{"line":39,"column":79}},"36":{"start":{"line":40,"column":12},"end":{"line":40,"column":45}},"37":{"start":{"line":41,"column":12},"end":{"line":41,"column":55}},"38":{"start":{"line":42,"column":12},"end":{"line":42,"column":53}},"39":{"start":{"line":43,"column":12},"end":{"line":43,"column":49}},"40":{"start":{"line":44,"column":12},"end":{"line":44,"column":39}},"41":{"start":{"line":45,"column":12},"end":{"line":45,"column":55}},"42":{"start":{"line":46,"column":12},"end":{"line":46,"column":45}},"43":{"start":{"line":47,"column":12},"end":{"line":47,"column":61}},"44":{"start":{"line":48,"column":12},"end":{"line":48,"column":63}},"45":{"start":{"line":49,"column":12},"end":{"line":49,"column":67}},"46":{"start":{"line":50,"column":12},"end":{"line":50,"column":59}},"47":{"start":{"line":52,"column":8},"end":{"line":52,"column":30}},"48":{"start":{"line":54,"column":4},"end":{"line":54,"column":46}},"49":{"start":{"line":55,"column":4},"end":{"line":59,"column":9}},"50":{"start":{"line":56,"column":8},"end":{"line":57,"column":9}},"51":{"start":{"line":58,"column":8},"end":{"line":58,"column":22}},"52":{"start":{"line":60,"column":4},"end":{"line":60,"column":30}},"53":{"start":{"line":61,"column":4},"end":{"line":65,"column":9}},"54":{"start":{"line":62,"column":8},"end":{"line":63,"column":9}},"55":{"start":{"line":64,"column":8},"end":{"line":64,"column":20}},"56":{"start":{"line":66,"column":4},"end":{"line":66,"column":26}},"57":{"start":{"line":67,"column":4},"end":{"line":78,"column":9}},"58":{"start":{"line":68,"column":8},"end":{"line":76,"column":9}},"59":{"start":{"line":69,"column":12},"end":{"line":69,"column":25}},"60":{"start":{"line":71,"column":12},"end":{"line":71,"column":27}},"61":{"start":{"line":73,"column":12},"end":{"line":73,"column":27}},"62":{"start":{"line":74,"column":12},"end":{"line":74,"column":36}},"63":{"start":{"line":75,"column":12},"end":{"line":75,"column":27}},"64":{"start":{"line":77,"column":8},"end":{"line":77,"column":24}},"65":{"start":{"line":79,"column":4},"end":{"line":79,"column":34}},"66":{"start":{"line":80,"column":4},"end":{"line":90,"column":25}},"67":{"start":{"line":81,"column":8},"end":{"line":81,"column":37}},"68":{"start":{"line":82,"column":8},"end":{"line":88,"column":9}},"69":{"start":{"line":83,"column":12},"end":{"line":83,"column":30}},"70":{"start":{"line":84,"column":12},"end":{"line":84,"column":25}},"71":{"start":{"line":85,"column":12},"end":{"line":85,"column":33}},"72":{"start":{"line":86,"column":12},"end":{"line":86,"column":35}},"73":{"start":{"line":87,"column":12},"end":{"line":87,"column":30}},"74":{"start":{"line":89,"column":8},"end":{"line":89,"column":25}},"75":{"start":{"line":91,"column":4},"end":{"line":91,"column":36}},"76":{"start":{"line":92,"column":4},"end":{"line":101,"column":25}},"77":{"start":{"line":93,"column":8},"end":{"line":93,"column":39}},"78":{"start":{"line":94,"column":8},"end":{"line":99,"column":9}},"79":{"start":{"line":95,"column":12},"end":{"line":95,"column":30}},"80":{"start":{"line":96,"column":12},"end":{"line":96,"column":25}},"81":{"start":{"line":97,"column":12},"end":{"line":97,"column":33}},"82":{"start":{"line":98,"column":12},"end":{"line":98,"column":30}},"83":{"start":{"line":100,"column":8},"end":{"line":100,"column":27}},"84":{"start":{"line":102,"column":4},"end":{"line":102,"column":40}},"85":{"start":{"line":103,"column":4},"end":{"line":113,"column":25}},"86":{"start":{"line":104,"column":8},"end":{"line":104,"column":41}},"87":{"start":{"line":105,"column":8},"end":{"line":111,"column":9}},"88":{"start":{"line":106,"column":12},"end":{"line":106,"column":30}},"89":{"start":{"line":107,"column":12},"end":{"line":107,"column":25}},"90":{"start":{"line":108,"column":12},"end":{"line":108,"column":33}},"91":{"start":{"line":109,"column":12},"end":{"line":109,"column":33}},"92":{"start":{"line":110,"column":12},"end":{"line":110,"column":35}},"93":{"start":{"line":112,"column":8},"end":{"line":112,"column":29}},"94":{"start":{"line":114,"column":4},"end":{"line":114,"column":44}},"95":{"start":{"line":115,"column":4},"end":{"line":119,"column":9}},"96":{"start":{"line":116,"column":8},"end":{"line":117,"column":9}},"97":{"start":{"line":118,"column":8},"end":{"line":118,"column":26}},"98":{"start":{"line":120,"column":4},"end":{"line":120,"column":38}},"99":{"start":{"line":121,"column":4},"end":{"line":127,"column":9}},"100":{"start":{"line":122,"column":8},"end":{"line":125,"column":9}},"101":{"start":{"line":123,"column":12},"end":{"line":123,"column":37}},"102":{"start":{"line":124,"column":12},"end":{"line":124,"column":34}},"103":{"start":{"line":126,"column":8},"end":{"line":126,"column":32}},"104":{"start":{"line":128,"column":4},"end":{"line":128,"column":50}},"105":{"start":{"line":129,"column":4},"end":{"line":134,"column":9}},"106":{"start":{"line":130,"column":8},"end":{"line":132,"column":9}},"107":{"start":{"line":131,"column":12},"end":{"line":131,"column":60}},"108":{"start":{"line":133,"column":8},"end":{"line":133,"column":25}},"109":{"start":{"line":135,"column":4},"end":{"line":135,"column":36}},"110":{"start":{"line":136,"column":4},"end":{"line":146,"column":25}},"111":{"start":{"line":137,"column":8},"end":{"line":137,"column":38}},"112":{"start":{"line":138,"column":8},"end":{"line":144,"column":9}},"113":{"start":{"line":139,"column":12},"end":{"line":139,"column":30}},"114":{"start":{"line":140,"column":12},"end":{"line":140,"column":25}},"115":{"start":{"line":141,"column":12},"end":{"line":141,"column":30}},"116":{"start":{"line":142,"column":12},"end":{"line":142,"column":33}},"117":{"start":{"line":143,"column":12},"end":{"line":143,"column":30}},"118":{"start":{"line":145,"column":8},"end":{"line":145,"column":26}},"119":{"start":{"line":147,"column":4},"end":{"line":147,"column":38}},"120":{"start":{"line":148,"column":4},"end":{"line":158,"column":28}},"121":{"start":{"line":149,"column":8},"end":{"line":149,"column":40}},"122":{"start":{"line":150,"column":8},"end":{"line":156,"column":9}},"123":{"start":{"line":151,"column":12},"end":{"line":151,"column":30}},"124":{"start":{"line":152,"column":12},"end":{"line":152,"column":25}},"125":{"start":{"line":153,"column":12},"end":{"line":153,"column":33}},"126":{"start":{"line":154,"column":12},"end":{"line":154,"column":35}},"127":{"start":{"line":155,"column":12},"end":{"line":155,"column":30}},"128":{"start":{"line":157,"column":8},"end":{"line":157,"column":28}},"129":{"start":{"line":159,"column":4},"end":{"line":159,"column":42}},"130":{"start":{"line":160,"column":4},"end":{"line":169,"column":31}},"131":{"start":{"line":161,"column":8},"end":{"line":161,"column":44}},"132":{"start":{"line":162,"column":8},"end":{"line":167,"column":9}},"133":{"start":{"line":163,"column":12},"end":{"line":163,"column":30}},"134":{"start":{"line":164,"column":12},"end":{"line":164,"column":25}},"135":{"start":{"line":165,"column":12},"end":{"line":165,"column":33}},"136":{"start":{"line":166,"column":12},"end":{"line":166,"column":35}},"137":{"start":{"line":168,"column":8},"end":{"line":168,"column":32}},"138":{"start":{"line":170,"column":4},"end":{"line":170,"column":50}},"139":{"start":{"line":171,"column":4},"end":{"line":176,"column":9}},"140":{"start":{"line":172,"column":8},"end":{"line":173,"column":9}},"141":{"start":{"line":174,"column":8},"end":{"line":174,"column":57}},"142":{"start":{"line":175,"column":8},"end":{"line":175,"column":45}},"143":{"start":{"line":177,"column":4},"end":{"line":177,"column":76}},"144":{"start":{"line":178,"column":4},"end":{"line":188,"column":25}},"145":{"start":{"line":179,"column":8},"end":{"line":179,"column":48}},"146":{"start":{"line":180,"column":8},"end":{"line":186,"column":9}},"147":{"start":{"line":181,"column":12},"end":{"line":181,"column":30}},"148":{"start":{"line":182,"column":12},"end":{"line":182,"column":25}},"149":{"start":{"line":183,"column":12},"end":{"line":183,"column":32}},"150":{"start":{"line":184,"column":12},"end":{"line":184,"column":33}},"151":{"start":{"line":185,"column":12},"end":{"line":185,"column":35}},"152":{"start":{"line":187,"column":8},"end":{"line":187,"column":36}},"153":{"start":{"line":189,"column":4},"end":{"line":189,"column":58}},"154":{"start":{"line":190,"column":4},"end":{"line":200,"column":31}},"155":{"start":{"line":191,"column":8},"end":{"line":191,"column":40}},"156":{"start":{"line":192,"column":8},"end":{"line":198,"column":9}},"157":{"start":{"line":193,"column":12},"end":{"line":193,"column":30}},"158":{"start":{"line":194,"column":12},"end":{"line":194,"column":25}},"159":{"start":{"line":195,"column":12},"end":{"line":195,"column":33}},"160":{"start":{"line":196,"column":12},"end":{"line":196,"column":35}},"161":{"start":{"line":197,"column":12},"end":{"line":197,"column":30}},"162":{"start":{"line":199,"column":8},"end":{"line":199,"column":28}},"163":{"start":{"line":201,"column":4},"end":{"line":201,"column":42}},"164":{"start":{"line":202,"column":4},"end":{"line":211,"column":25}},"165":{"start":{"line":203,"column":8},"end":{"line":203,"column":39}},"166":{"start":{"line":204,"column":8},"end":{"line":209,"column":9}},"167":{"start":{"line":205,"column":12},"end":{"line":205,"column":30}},"168":{"start":{"line":206,"column":12},"end":{"line":206,"column":25}},"169":{"start":{"line":207,"column":12},"end":{"line":207,"column":33}},"170":{"start":{"line":208,"column":12},"end":{"line":208,"column":35}},"171":{"start":{"line":210,"column":8},"end":{"line":210,"column":27}},"172":{"start":{"line":212,"column":4},"end":{"line":212,"column":40}},"173":{"start":{"line":213,"column":4},"end":{"line":223,"column":25}},"174":{"start":{"line":214,"column":8},"end":{"line":214,"column":50}},"175":{"start":{"line":215,"column":8},"end":{"line":221,"column":9}},"176":{"start":{"line":216,"column":12},"end":{"line":216,"column":30}},"177":{"start":{"line":217,"column":12},"end":{"line":217,"column":25}},"178":{"start":{"line":218,"column":12},"end":{"line":218,"column":50}},"179":{"start":{"line":219,"column":12},"end":{"line":219,"column":33}},"180":{"start":{"line":220,"column":12},"end":{"line":220,"column":30}},"181":{"start":{"line":222,"column":8},"end":{"line":222,"column":38}},"182":{"start":{"line":224,"column":4},"end":{"line":224,"column":62}}},"branchMap":{"1":{"line":5,"type":"binary-expr","locations":[{"start":{"line":5,"column":17},"end":{"line":5,"column":21}},{"start":{"line":5,"column":25},"end":{"line":5,"column":39}},{"start":{"line":5,"column":44},"end":{"line":9,"column":1}}]},"2":{"line":6,"type":"if","locations":[{"start":{"line":6,"column":21},"end":{"line":6,"column":21}},{"start":{"line":6,"column":21},"end":{"line":6,"column":21}}]},"3":{"line":8,"type":"cond-expr","locations":[{"start":{"line":8,"column":31},"end":{"line":8,"column":47}},{"start":{"line":8,"column":51},"end":{"line":8,"column":87}}]},"4":{"line":15,"type":"binary-expr","locations":[{"start":{"line":15,"column":7},"end":{"line":15,"column":30}},{"start":{"line":15,"column":35},"end":{"line":15,"column":63}}]},"5":{"line":23,"type":"binary-expr","locations":[{"start":{"line":23,"column":7},"end":{"line":23,"column":30}},{"start":{"line":23,"column":35},"end":{"line":23,"column":63}}]},"6":{"line":225,"type":"binary-expr","locations":[{"start":{"line":225,"column":15},"end":{"line":225,"column":32}},{"start":{"line":225,"column":37},"end":{"line":225,"column":59}}]}},"code":["// this file is manually constructed and many types and fields here are deprecated.","// Need to switch to use Declarations\\Constracts\\Generated instead","// This will be consistent with JavaScript SDK","\"use strict\";","var __extends = (this && this.__extends) || function (d, b) {","    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];","    function __() { this.constructor = d; }","    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());","};","var Contracts;","(function (Contracts) {","    (function (DataPointType) {","        DataPointType[DataPointType[\"Measurement\"] = 0] = \"Measurement\";","        DataPointType[DataPointType[\"Aggregation\"] = 1] = \"Aggregation\";","    })(Contracts.DataPointType || (Contracts.DataPointType = {}));","    var DataPointType = Contracts.DataPointType;","    (function (SeverityLevel) {","        SeverityLevel[SeverityLevel[\"Verbose\"] = 0] = \"Verbose\";","        SeverityLevel[SeverityLevel[\"Information\"] = 1] = \"Information\";","        SeverityLevel[SeverityLevel[\"Warning\"] = 2] = \"Warning\";","        SeverityLevel[SeverityLevel[\"Error\"] = 3] = \"Error\";","        SeverityLevel[SeverityLevel[\"Critical\"] = 4] = \"Critical\";","    })(Contracts.SeverityLevel || (Contracts.SeverityLevel = {}));","    var SeverityLevel = Contracts.SeverityLevel;","    var ContextTagKeys = (function () {","        function ContextTagKeys() {","            this.applicationVersion = \"ai.application.ver\";","            this.deviceId = \"ai.device.id\";","            this.deviceLocale = \"ai.device.locale\";","            this.deviceModel = \"ai.device.model\";","            this.deviceOEMName = \"ai.device.oemName\";","            this.deviceOSVersion = \"ai.device.osVersion\";","            this.deviceType = \"ai.device.type\";","            this.locationIp = \"ai.location.ip\";","            this.operationId = \"ai.operation.id\";","            this.operationName = \"ai.operation.name\";","            this.operationParentId = \"ai.operation.parentId\";","            this.operationSyntheticSource = \"ai.operation.syntheticSource\";","            this.operationCorrelationVector = \"ai.operation.correlationVector\";","            this.sessionId = \"ai.session.id\";","            this.sessionIsFirst = \"ai.session.isFirst\";","            this.userAccountId = \"ai.user.accountId\";","            this.userAgent = \"ai.user.userAgent\";","            this.userId = \"ai.user.id\";","            this.userAuthUserId = \"ai.user.authUserId\";","            this.cloudRole = \"ai.cloud.role\";","            this.cloudRoleInstance = \"ai.cloud.roleInstance\";","            this.internalSdkVersion = \"ai.internal.sdkVersion\";","            this.internalAgentVersion = \"ai.internal.agentVersion\";","            this.internalNodeName = \"ai.internal.nodeName\";","        }","        return ContextTagKeys;","    }());","    Contracts.ContextTagKeys = ContextTagKeys;","    var Domain = (function () {","        function Domain() {","        }","        return Domain;","    }());","    Contracts.Domain = Domain;","    var Data = (function () {","        function Data() {","        }","        return Data;","    }());","    Contracts.Data = Data;","    var Envelope = (function () {","        function Envelope() {","            this.ver = 1;","            // the 'name' property must be initialized before 'tags' and/or 'data'.","            this.name = \"\";","            // the 'time' property must be initialized before 'tags' and/or 'data'.","            this.time = \"\";","            this.sampleRate = 100.0;","            this.tags = {};","        }","        return Envelope;","    }());","    Contracts.Envelope = Envelope;","    var EventData = (function (_super) {","        __extends(EventData, _super);","        function EventData() {","            _super.call(this);","            this.ver = 2;","            this.properties = {};","            this.measurements = {};","            _super.call(this);","        }","        return EventData;","    }(Contracts.Domain));","    Contracts.EventData = EventData;","    var MessageData = (function (_super) {","        __extends(MessageData, _super);","        function MessageData() {","            _super.call(this);","            this.ver = 2;","            this.properties = {};","            _super.call(this);","        }","        return MessageData;","    }(Contracts.Domain));","    Contracts.MessageData = MessageData;","    var ExceptionData = (function (_super) {","        __extends(ExceptionData, _super);","        function ExceptionData() {","            _super.call(this);","            this.ver = 2;","            this.exceptions = [];","            this.properties = {};","            this.measurements = {};","        }","        return ExceptionData;","    }(Contracts.Domain));","    Contracts.ExceptionData = ExceptionData;","    var StackFrame = (function () {","        function StackFrame() {","        }","        return StackFrame;","    }());","    Contracts.StackFrame = StackFrame;","    var ExceptionDetails = (function () {","        function ExceptionDetails() {","            this.hasFullStack = true;","            this.parsedStack = [];","        }","        return ExceptionDetails;","    }());","    Contracts.ExceptionDetails = ExceptionDetails;","    var DataPoint = (function () {","        function DataPoint() {","            this.kind = Contracts.DataPointType.Measurement;","        }","        return DataPoint;","    }());","    Contracts.DataPoint = DataPoint;","    var MetricData = (function (_super) {","        __extends(MetricData, _super);","        function MetricData() {","            _super.call(this);","            this.ver = 2;","            this.metrics = [];","            this.properties = {};","            _super.call(this);","        }","        return MetricData;","    }(Contracts.Domain));","    Contracts.MetricData = MetricData;","    var PageViewData = (function (_super) {","        __extends(PageViewData, _super);","        function PageViewData() {","            _super.call(this);","            this.ver = 2;","            this.properties = {};","            this.measurements = {};","            _super.call(this);","        }","        return PageViewData;","    }(Contracts.EventData));","    Contracts.PageViewData = PageViewData;","    var PageViewPerfData = (function (_super) {","        __extends(PageViewPerfData, _super);","        function PageViewPerfData() {","            _super.call(this);","            this.ver = 2;","            this.properties = {};","            this.measurements = {};","        }","        return PageViewPerfData;","    }(Contracts.PageViewData));","    Contracts.PageViewPerfData = PageViewPerfData;","    var RemoteDependencyDataConstants = (function () {","        function RemoteDependencyDataConstants() {","        }","        RemoteDependencyDataConstants.TYPE_HTTP = \"Http\";","        return RemoteDependencyDataConstants;","    }());","    Contracts.RemoteDependencyDataConstants = RemoteDependencyDataConstants;","    var RemoteDependencyData = (function (_super) {","        __extends(RemoteDependencyData, _super);","        function RemoteDependencyData() {","            _super.call(this);","            this.ver = 2;","            this.success = true;","            this.properties = {};","            this.measurements = {};","        }","        return RemoteDependencyData;","    }(Contracts.Domain));","    Contracts.RemoteDependencyData = RemoteDependencyData;","    var AjaxCallData = (function (_super) {","        __extends(AjaxCallData, _super);","        function AjaxCallData() {","            _super.call(this);","            this.ver = 2;","            this.properties = {};","            this.measurements = {};","            _super.call(this);","        }","        return AjaxCallData;","    }(Contracts.PageViewData));","    Contracts.AjaxCallData = AjaxCallData;","    var RequestData = (function (_super) {","        __extends(RequestData, _super);","        function RequestData() {","            _super.call(this);","            this.ver = 2;","            this.properties = {};","            this.measurements = {};","        }","        return RequestData;","    }(Contracts.Domain));","    Contracts.RequestData = RequestData;","    var PerformanceCounterData = (function (_super) {","        __extends(PerformanceCounterData, _super);","        function PerformanceCounterData() {","            _super.call(this);","            this.ver = 2;","            this.kind = DataPointType.Aggregation;","            this.properties = {};","            _super.call(this);","        }","        return PerformanceCounterData;","    }(Contracts.Domain));","    Contracts.PerformanceCounterData = PerformanceCounterData;","})(Contracts = exports.Contracts || (exports.Contracts = {}));",""],"l":{"5":1,"6":10,"7":10,"8":10,"10":1,"11":1,"12":1,"13":1,"14":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"52":1,"54":1,"55":1,"56":1,"58":1,"60":1,"61":1,"62":1,"64":1,"66":1,"67":1,"68":1,"69":0,"71":0,"73":0,"74":0,"75":0,"77":1,"79":1,"80":1,"81":1,"82":1,"83":0,"84":0,"85":0,"86":0,"87":0,"89":1,"91":1,"92":1,"93":1,"94":1,"95":0,"96":0,"97":0,"98":0,"100":1,"102":1,"103":1,"104":1,"105":1,"106":0,"107":0,"108":0,"109":0,"110":0,"112":1,"114":1,"115":1,"116":1,"118":1,"120":1,"121":1,"122":1,"123":0,"124":0,"126":1,"128":1,"129":1,"130":1,"131":0,"133":1,"135":1,"136":1,"137":1,"138":1,"139":0,"140":0,"141":0,"142":0,"143":0,"145":1,"147":1,"148":1,"149":1,"150":1,"151":0,"152":0,"153":0,"154":0,"155":0,"157":1,"159":1,"160":1,"161":1,"162":1,"163":0,"164":0,"165":0,"166":0,"168":1,"170":1,"171":1,"172":1,"174":1,"175":1,"177":1,"178":1,"179":1,"180":1,"181":0,"182":0,"183":0,"184":0,"185":0,"187":1,"189":1,"190":1,"191":1,"192":1,"193":0,"194":0,"195":0,"196":0,"197":0,"199":1,"201":1,"202":1,"203":1,"204":1,"205":0,"206":0,"207":0,"208":0,"210":1,"212":1,"213":1,"214":1,"215":1,"216":0,"217":0,"218":0,"219":0,"220":0,"222":1,"224":1}},"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/AutoCollection/Performance.js":{"path":"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/AutoCollection/Performance.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":1,"35":0,"36":1,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":1,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":1,"60":0,"61":0,"62":0,"63":1,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":1,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":1,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":1,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":1,"164":0,"165":0,"166":1,"167":1,"168":1,"169":1,"170":1},"b":{"1":[1,1],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0,0,0,0,0],"15":[0,0],"16":[0,0,0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0]},"f":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},"fnMap":{"1":{"name":"(anonymous_1)","line":8,"loc":{"start":{"line":8,"column":1},"end":{"line":8,"column":28}}},"2":{"name":"(anonymous_2)","line":16,"loc":{"start":{"line":16,"column":30},"end":{"line":16,"column":42}}},"3":{"name":"AutoCollectPerformance","line":17,"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":44}}},"4":{"name":"(anonymous_4)","line":25,"loc":{"start":{"line":25,"column":46},"end":{"line":25,"column":67}}},"5":{"name":"(anonymous_5)","line":39,"loc":{"start":{"line":39,"column":43},"end":{"line":39,"column":55}}},"6":{"name":"(anonymous_6)","line":49,"loc":{"start":{"line":49,"column":53},"end":{"line":49,"column":65}}},"7":{"name":"(anonymous_7)","line":52,"loc":{"start":{"line":52,"column":51},"end":{"line":52,"column":63}}},"8":{"name":"(anonymous_8)","line":56,"loc":{"start":{"line":56,"column":28},"end":{"line":56,"column":49}}},"9":{"name":"(anonymous_9)","line":57,"loc":{"start":{"line":57,"column":34},"end":{"line":57,"column":63}}},"10":{"name":"(anonymous_10)","line":67,"loc":{"start":{"line":67,"column":42},"end":{"line":67,"column":71}}},"11":{"name":"(anonymous_11)","line":76,"loc":{"start":{"line":76,"column":36},"end":{"line":76,"column":48}}},"12":{"name":"(anonymous_12)","line":86,"loc":{"start":{"line":86,"column":56},"end":{"line":86,"column":68}}},"13":{"name":"(anonymous_13)","line":92,"loc":{"start":{"line":92,"column":63},"end":{"line":92,"column":93}}},"14":{"name":"(anonymous_14)","line":132,"loc":{"start":{"line":132,"column":49},"end":{"line":132,"column":61}}},"15":{"name":"(anonymous_15)","line":181,"loc":{"start":{"line":181,"column":52},"end":{"line":181,"column":64}}},"16":{"name":"(anonymous_16)","line":196,"loc":{"start":{"line":196,"column":53},"end":{"line":196,"column":65}}},"17":{"name":"(anonymous_17)","line":222,"loc":{"start":{"line":222,"column":47},"end":{"line":222,"column":59}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":23}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":54}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":44}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":20}},"6":{"start":{"line":8,"column":0},"end":{"line":15,"column":46}},"7":{"start":{"line":9,"column":4},"end":{"line":9,"column":76}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":80}},"9":{"start":{"line":11,"column":4},"end":{"line":11,"column":78}},"10":{"start":{"line":12,"column":4},"end":{"line":12,"column":74}},"11":{"start":{"line":13,"column":4},"end":{"line":13,"column":90}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":90}},"13":{"start":{"line":16,"column":0},"end":{"line":230,"column":5}},"14":{"start":{"line":17,"column":4},"end":{"line":24,"column":5}},"15":{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},"16":{"start":{"line":19,"column":12},"end":{"line":19,"column":109}},"17":{"start":{"line":21,"column":8},"end":{"line":21,"column":47}},"18":{"start":{"line":22,"column":8},"end":{"line":22,"column":36}},"19":{"start":{"line":23,"column":8},"end":{"line":23,"column":30}},"20":{"start":{"line":25,"column":4},"end":{"line":48,"column":6}},"21":{"start":{"line":26,"column":8},"end":{"line":26,"column":25}},"22":{"start":{"line":27,"column":8},"end":{"line":27,"column":36}},"23":{"start":{"line":28,"column":8},"end":{"line":30,"column":9}},"24":{"start":{"line":29,"column":12},"end":{"line":29,"column":31}},"25":{"start":{"line":31,"column":8},"end":{"line":47,"column":9}},"26":{"start":{"line":32,"column":12},"end":{"line":40,"column":13}},"27":{"start":{"line":33,"column":16},"end":{"line":33,"column":43}},"28":{"start":{"line":34,"column":16},"end":{"line":38,"column":18}},"29":{"start":{"line":39,"column":16},"end":{"line":39,"column":100}},"30":{"start":{"line":39,"column":57},"end":{"line":39,"column":89}},"31":{"start":{"line":43,"column":12},"end":{"line":46,"column":13}},"32":{"start":{"line":44,"column":16},"end":{"line":44,"column":44}},"33":{"start":{"line":45,"column":16},"end":{"line":45,"column":41}},"34":{"start":{"line":49,"column":4},"end":{"line":51,"column":6}},"35":{"start":{"line":50,"column":8},"end":{"line":50,"column":35}},"36":{"start":{"line":52,"column":4},"end":{"line":66,"column":6}},"37":{"start":{"line":53,"column":8},"end":{"line":53,"column":25}},"38":{"start":{"line":54,"column":8},"end":{"line":54,"column":35}},"39":{"start":{"line":55,"column":8},"end":{"line":55,"column":47}},"40":{"start":{"line":56,"column":8},"end":{"line":65,"column":10}},"41":{"start":{"line":57,"column":12},"end":{"line":64,"column":15}},"42":{"start":{"line":58,"column":16},"end":{"line":60,"column":17}},"43":{"start":{"line":59,"column":20},"end":{"line":59,"column":75}},"44":{"start":{"line":61,"column":16},"end":{"line":63,"column":17}},"45":{"start":{"line":62,"column":20},"end":{"line":62,"column":49}},"46":{"start":{"line":67,"column":4},"end":{"line":85,"column":6}},"47":{"start":{"line":68,"column":8},"end":{"line":68,"column":25}},"48":{"start":{"line":69,"column":8},"end":{"line":69,"column":30}},"49":{"start":{"line":70,"column":8},"end":{"line":73,"column":9}},"50":{"start":{"line":71,"column":12},"end":{"line":71,"column":124}},"51":{"start":{"line":72,"column":12},"end":{"line":72,"column":19}},"52":{"start":{"line":75,"column":8},"end":{"line":84,"column":9}},"53":{"start":{"line":76,"column":12},"end":{"line":83,"column":15}},"54":{"start":{"line":77,"column":16},"end":{"line":77,"column":36}},"55":{"start":{"line":78,"column":16},"end":{"line":78,"column":62}},"56":{"start":{"line":79,"column":16},"end":{"line":79,"column":60}},"57":{"start":{"line":80,"column":16},"end":{"line":82,"column":17}},"58":{"start":{"line":81,"column":20},"end":{"line":81,"column":70}},"59":{"start":{"line":86,"column":4},"end":{"line":90,"column":6}},"60":{"start":{"line":87,"column":8},"end":{"line":87,"column":25}},"61":{"start":{"line":88,"column":8},"end":{"line":88,"column":28}},"62":{"start":{"line":89,"column":8},"end":{"line":89,"column":29}},"63":{"start":{"line":92,"column":4},"end":{"line":131,"column":6}},"64":{"start":{"line":93,"column":8},"end":{"line":93,"column":80}},"65":{"start":{"line":95,"column":8},"end":{"line":120,"column":9}},"66":{"start":{"line":97,"column":16},"end":{"line":97,"column":52}},"67":{"start":{"line":98,"column":16},"end":{"line":98,"column":60}},"68":{"start":{"line":99,"column":16},"end":{"line":99,"column":22}},"69":{"start":{"line":101,"column":16},"end":{"line":101,"column":51}},"70":{"start":{"line":102,"column":16},"end":{"line":102,"column":59}},"71":{"start":{"line":103,"column":16},"end":{"line":103,"column":22}},"72":{"start":{"line":105,"column":16},"end":{"line":105,"column":65}},"73":{"start":{"line":106,"column":16},"end":{"line":106,"column":56}},"74":{"start":{"line":107,"column":16},"end":{"line":107,"column":22}},"75":{"start":{"line":109,"column":16},"end":{"line":109,"column":52}},"76":{"start":{"line":110,"column":16},"end":{"line":110,"column":57}},"77":{"start":{"line":111,"column":16},"end":{"line":111,"column":22}},"78":{"start":{"line":113,"column":16},"end":{"line":113,"column":65}},"79":{"start":{"line":114,"column":16},"end":{"line":114,"column":66}},"80":{"start":{"line":115,"column":16},"end":{"line":115,"column":22}},"81":{"start":{"line":117,"column":16},"end":{"line":117,"column":54}},"82":{"start":{"line":118,"column":16},"end":{"line":118,"column":60}},"83":{"start":{"line":119,"column":16},"end":{"line":119,"column":22}},"84":{"start":{"line":121,"column":8},"end":{"line":121,"column":29}},"85":{"start":{"line":122,"column":8},"end":{"line":122,"column":78}},"86":{"start":{"line":123,"column":8},"end":{"line":123,"column":31}},"87":{"start":{"line":124,"column":8},"end":{"line":124,"column":31}},"88":{"start":{"line":125,"column":8},"end":{"line":125,"column":30}},"89":{"start":{"line":126,"column":8},"end":{"line":126,"column":33}},"90":{"start":{"line":127,"column":8},"end":{"line":127,"column":56}},"91":{"start":{"line":128,"column":8},"end":{"line":128,"column":79}},"92":{"start":{"line":129,"column":8},"end":{"line":129,"column":35}},"93":{"start":{"line":130,"column":8},"end":{"line":130,"column":33}},"94":{"start":{"line":132,"column":4},"end":{"line":180,"column":6}},"95":{"start":{"line":135,"column":8},"end":{"line":135,"column":29}},"96":{"start":{"line":136,"column":8},"end":{"line":178,"column":9}},"97":{"start":{"line":137,"column":12},"end":{"line":137,"column":30}},"98":{"start":{"line":138,"column":12},"end":{"line":138,"column":29}},"99":{"start":{"line":139,"column":12},"end":{"line":139,"column":30}},"100":{"start":{"line":140,"column":12},"end":{"line":140,"column":30}},"101":{"start":{"line":141,"column":12},"end":{"line":141,"column":29}},"102":{"start":{"line":142,"column":12},"end":{"line":167,"column":13}},"103":{"start":{"line":143,"column":16},"end":{"line":143,"column":34}},"104":{"start":{"line":144,"column":16},"end":{"line":144,"column":48}},"105":{"start":{"line":145,"column":16},"end":{"line":145,"column":47}},"106":{"start":{"line":146,"column":16},"end":{"line":146,"column":38}},"107":{"start":{"line":147,"column":16},"end":{"line":147,"column":38}},"108":{"start":{"line":148,"column":16},"end":{"line":148,"column":38}},"109":{"start":{"line":149,"column":16},"end":{"line":149,"column":46}},"110":{"start":{"line":151,"column":16},"end":{"line":151,"column":62}},"111":{"start":{"line":152,"column":16},"end":{"line":152,"column":34}},"112":{"start":{"line":154,"column":16},"end":{"line":154,"column":59}},"113":{"start":{"line":155,"column":16},"end":{"line":155,"column":32}},"114":{"start":{"line":157,"column":16},"end":{"line":157,"column":62}},"115":{"start":{"line":158,"column":16},"end":{"line":158,"column":34}},"116":{"start":{"line":160,"column":16},"end":{"line":160,"column":62}},"117":{"start":{"line":161,"column":16},"end":{"line":161,"column":34}},"118":{"start":{"line":163,"column":16},"end":{"line":163,"column":59}},"119":{"start":{"line":164,"column":16},"end":{"line":164,"column":32}},"120":{"start":{"line":165,"column":16},"end":{"line":165,"column":66}},"121":{"start":{"line":166,"column":16},"end":{"line":166,"column":70}},"122":{"start":{"line":168,"column":12},"end":{"line":168,"column":46}},"123":{"start":{"line":169,"column":12},"end":{"line":169,"column":95}},"124":{"start":{"line":170,"column":12},"end":{"line":170,"column":87}},"125":{"start":{"line":171,"column":12},"end":{"line":171,"column":85}},"126":{"start":{"line":172,"column":12},"end":{"line":172,"column":87}},"127":{"start":{"line":173,"column":12},"end":{"line":173,"column":87}},"128":{"start":{"line":174,"column":12},"end":{"line":174,"column":85}},"129":{"start":{"line":176,"column":12},"end":{"line":176,"column":99}},"130":{"start":{"line":177,"column":12},"end":{"line":177,"column":124}},"131":{"start":{"line":179,"column":8},"end":{"line":179,"column":30}},"132":{"start":{"line":181,"column":4},"end":{"line":195,"column":6}},"133":{"start":{"line":182,"column":8},"end":{"line":182,"column":37}},"134":{"start":{"line":183,"column":8},"end":{"line":183,"column":35}},"135":{"start":{"line":184,"column":8},"end":{"line":184,"column":41}},"136":{"start":{"line":185,"column":8},"end":{"line":185,"column":55}},"137":{"start":{"line":186,"column":8},"end":{"line":186,"column":60}},"138":{"start":{"line":187,"column":8},"end":{"line":187,"column":57}},"139":{"start":{"line":188,"column":8},"end":{"line":188,"column":57}},"140":{"start":{"line":189,"column":8},"end":{"line":189,"column":59}},"141":{"start":{"line":190,"column":8},"end":{"line":190,"column":66}},"142":{"start":{"line":191,"column":8},"end":{"line":191,"column":71}},"143":{"start":{"line":193,"column":8},"end":{"line":193,"column":79}},"144":{"start":{"line":194,"column":8},"end":{"line":194,"column":76}},"145":{"start":{"line":196,"column":4},"end":{"line":221,"column":6}},"146":{"start":{"line":198,"column":8},"end":{"line":198,"column":46}},"147":{"start":{"line":199,"column":8},"end":{"line":203,"column":10}},"148":{"start":{"line":204,"column":8},"end":{"line":204,"column":98}},"149":{"start":{"line":205,"column":8},"end":{"line":205,"column":116}},"150":{"start":{"line":206,"column":8},"end":{"line":206,"column":58}},"151":{"start":{"line":207,"column":8},"end":{"line":207,"column":46}},"152":{"start":{"line":208,"column":8},"end":{"line":219,"column":9}},"153":{"start":{"line":209,"column":12},"end":{"line":209,"column":67}},"154":{"start":{"line":210,"column":12},"end":{"line":210,"column":79}},"155":{"start":{"line":211,"column":12},"end":{"line":211,"column":83}},"156":{"start":{"line":212,"column":12},"end":{"line":212,"column":96}},"157":{"start":{"line":213,"column":12},"end":{"line":213,"column":76}},"158":{"start":{"line":214,"column":12},"end":{"line":214,"column":89}},"159":{"start":{"line":215,"column":12},"end":{"line":215,"column":118}},"160":{"start":{"line":217,"column":12},"end":{"line":217,"column":89}},"161":{"start":{"line":218,"column":12},"end":{"line":218,"column":129}},"162":{"start":{"line":220,"column":8},"end":{"line":220,"column":38}},"163":{"start":{"line":222,"column":4},"end":{"line":225,"column":6}},"164":{"start":{"line":223,"column":8},"end":{"line":223,"column":47}},"165":{"start":{"line":224,"column":8},"end":{"line":224,"column":36}},"166":{"start":{"line":226,"column":4},"end":{"line":226,"column":50}},"167":{"start":{"line":227,"column":4},"end":{"line":227,"column":56}},"168":{"start":{"line":228,"column":4},"end":{"line":228,"column":57}},"169":{"start":{"line":229,"column":4},"end":{"line":229,"column":34}},"170":{"start":{"line":231,"column":0},"end":{"line":231,"column":40}}},"branchMap":{"1":{"line":15,"type":"binary-expr","locations":[{"start":{"line":15,"column":3},"end":{"line":15,"column":18}},{"start":{"line":15,"column":23},"end":{"line":15,"column":43}}]},"2":{"line":18,"type":"if","locations":[{"start":{"line":18,"column":8},"end":{"line":18,"column":8}},{"start":{"line":18,"column":8},"end":{"line":18,"column":8}}]},"3":{"line":28,"type":"if","locations":[{"start":{"line":28,"column":8},"end":{"line":28,"column":8}},{"start":{"line":28,"column":8},"end":{"line":28,"column":8}}]},"4":{"line":28,"type":"binary-expr","locations":[{"start":{"line":28,"column":12},"end":{"line":28,"column":27}},{"start":{"line":28,"column":31},"end":{"line":28,"column":51}}]},"5":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":8},"end":{"line":31,"column":8}},{"start":{"line":31,"column":8},"end":{"line":31,"column":8}}]},"6":{"line":32,"type":"if","locations":[{"start":{"line":32,"column":12},"end":{"line":32,"column":12}},{"start":{"line":32,"column":12},"end":{"line":32,"column":12}}]},"7":{"line":43,"type":"if","locations":[{"start":{"line":43,"column":12},"end":{"line":43,"column":12}},{"start":{"line":43,"column":12},"end":{"line":43,"column":12}}]},"8":{"line":58,"type":"if","locations":[{"start":{"line":58,"column":16},"end":{"line":58,"column":16}},{"start":{"line":58,"column":16},"end":{"line":58,"column":16}}]},"9":{"line":61,"type":"if","locations":[{"start":{"line":61,"column":16},"end":{"line":61,"column":16}},{"start":{"line":61,"column":16},"end":{"line":61,"column":16}}]},"10":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":8},"end":{"line":70,"column":8}},{"start":{"line":70,"column":8},"end":{"line":70,"column":8}}]},"11":{"line":70,"type":"binary-expr","locations":[{"start":{"line":70,"column":12},"end":{"line":70,"column":20}},{"start":{"line":70,"column":24},"end":{"line":70,"column":33}}]},"12":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":8},"end":{"line":75,"column":8}},{"start":{"line":75,"column":8},"end":{"line":75,"column":8}}]},"13":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":16},"end":{"line":80,"column":16}},{"start":{"line":80,"column":16},"end":{"line":80,"column":16}}]},"14":{"line":95,"type":"switch","locations":[{"start":{"line":96,"column":12},"end":{"line":99,"column":22}},{"start":{"line":100,"column":12},"end":{"line":103,"column":22}},{"start":{"line":104,"column":12},"end":{"line":107,"column":22}},{"start":{"line":108,"column":12},"end":{"line":111,"column":22}},{"start":{"line":112,"column":12},"end":{"line":115,"column":22}},{"start":{"line":116,"column":12},"end":{"line":119,"column":22}}]},"15":{"line":136,"type":"if","locations":[{"start":{"line":136,"column":8},"end":{"line":136,"column":8}},{"start":{"line":136,"column":8},"end":{"line":136,"column":8}}]},"16":{"line":136,"type":"binary-expr","locations":[{"start":{"line":136,"column":12},"end":{"line":136,"column":16}},{"start":{"line":136,"column":20},"end":{"line":136,"column":31}},{"start":{"line":136,"column":35},"end":{"line":136,"column":49}},{"start":{"line":136,"column":53},"end":{"line":136,"column":90}}]},"17":{"line":142,"type":"binary-expr","locations":[{"start":{"line":142,"column":28},"end":{"line":142,"column":34}},{"start":{"line":142,"column":38},"end":{"line":142,"column":53}}]},"18":{"line":151,"type":"binary-expr","locations":[{"start":{"line":151,"column":28},"end":{"line":151,"column":55}},{"start":{"line":151,"column":60},"end":{"line":151,"column":61}}]},"19":{"line":154,"type":"binary-expr","locations":[{"start":{"line":154,"column":27},"end":{"line":154,"column":52}},{"start":{"line":154,"column":57},"end":{"line":154,"column":58}}]},"20":{"line":157,"type":"binary-expr","locations":[{"start":{"line":157,"column":28},"end":{"line":157,"column":55}},{"start":{"line":157,"column":60},"end":{"line":157,"column":61}}]},"21":{"line":160,"type":"binary-expr","locations":[{"start":{"line":160,"column":28},"end":{"line":160,"column":55}},{"start":{"line":160,"column":60},"end":{"line":160,"column":61}}]},"22":{"line":163,"type":"binary-expr","locations":[{"start":{"line":163,"column":27},"end":{"line":163,"column":52}},{"start":{"line":163,"column":57},"end":{"line":163,"column":58}}]},"23":{"line":165,"type":"binary-expr","locations":[{"start":{"line":165,"column":29},"end":{"line":165,"column":59}},{"start":{"line":165,"column":64},"end":{"line":165,"column":65}}]},"24":{"line":169,"type":"binary-expr","locations":[{"start":{"line":169,"column":33},"end":{"line":169,"column":88}},{"start":{"line":169,"column":93},"end":{"line":169,"column":94}}]},"25":{"line":185,"type":"binary-expr","locations":[{"start":{"line":185,"column":40},"end":{"line":185,"column":48}},{"start":{"line":185,"column":52},"end":{"line":185,"column":53}}]},"26":{"line":186,"type":"binary-expr","locations":[{"start":{"line":186,"column":45},"end":{"line":186,"column":53}},{"start":{"line":186,"column":57},"end":{"line":186,"column":58}}]},"27":{"line":204,"type":"binary-expr","locations":[{"start":{"line":204,"column":32},"end":{"line":204,"column":91}},{"start":{"line":204,"column":96},"end":{"line":204,"column":97}}]},"28":{"line":205,"type":"binary-expr","locations":[{"start":{"line":205,"column":38},"end":{"line":205,"column":109}},{"start":{"line":205,"column":114},"end":{"line":205,"column":115}}]},"29":{"line":208,"type":"if","locations":[{"start":{"line":208,"column":8},"end":{"line":208,"column":8}},{"start":{"line":208,"column":8},"end":{"line":208,"column":8}}]}},"code":["///<reference path=\"..\\typings\\globals\\node\\index.d.ts\" />","\"use strict\";","var http = require(\"http\");","var os = require(\"os\");","var ContractsModule = require(\"../Library/Contracts\");","var Logging = require(\"../Library/Logging\");","var PerfCounterType;","(function (PerfCounterType) {","    PerfCounterType[PerfCounterType[\"ProcessorTime\"] = 0] = \"ProcessorTime\";","    PerfCounterType[PerfCounterType[\"AvailableMemory\"] = 1] = \"AvailableMemory\";","    PerfCounterType[PerfCounterType[\"RequestsPerSec\"] = 2] = \"RequestsPerSec\";","    PerfCounterType[PerfCounterType[\"PrivateBytes\"] = 3] = \"PrivateBytes\";","    PerfCounterType[PerfCounterType[\"RequestExecutionTime\"] = 4] = \"RequestExecutionTime\";","    PerfCounterType[PerfCounterType[\"PercentProcessorTime\"] = 5] = \"PercentProcessorTime\";","})(PerfCounterType || (PerfCounterType = {}));","var AutoCollectPerformance = (function () {","    function AutoCollectPerformance(client) {","        if (!!AutoCollectPerformance.INSTANCE) {","            throw new Error(\"Performance tracking should be configured from the applicationInsights object\");","        }","        AutoCollectPerformance.INSTANCE = this;","        this._isInitialized = false;","        this._client = client;","    }","    AutoCollectPerformance.prototype.enable = function (isEnabled) {","        var _this = this;","        this._isEnabled = isEnabled;","        if (this._isEnabled && !this._isInitialized) {","            this._initialize();","        }","        if (isEnabled) {","            if (!this._handle) {","                this._lastCpus = os.cpus();","                this._lastRequests = {","                    totalRequestCount: AutoCollectPerformance._totalRequestCount,","                    totalFailedRequestCount: AutoCollectPerformance._totalFailedRequestCount,","                    time: +new Date","                };","                this._handle = setInterval(function () { return _this.trackPerformance(); }, 10000);","            }","        }","        else {","            if (this._handle) {","                clearInterval(this._handle);","                this._handle = undefined;","            }","        }","    };","    AutoCollectPerformance.prototype.isInitialized = function () {","        return this._isInitialized;","    };","    AutoCollectPerformance.prototype._initialize = function () {","        var _this = this;","        this._isInitialized = true;","        var originalServer = http.createServer;","        http.createServer = function (onRequest) {","            return originalServer(function (request, response) {","                if (_this._isEnabled) {","                    AutoCollectPerformance.countRequest(request, response);","                }","                if (typeof onRequest === \"function\") {","                    onRequest(request, response);","                }","            });","        };","    };","    AutoCollectPerformance.countRequest = function (request, response) {","        var _this = this;","        var start = +new Date;","        if (!request || !response) {","            Logging.warn(\"AutoCollectPerformance.countRequest was called with invalid parameters: \", !!request, !!response);","            return;","        }","        // response listeners","        if (typeof response.once === \"function\") {","            response.once(\"finish\", function () {","                var end = +new Date;","                _this._lastRequestExecutionTime = end - start;","                AutoCollectPerformance._totalRequestCount++;","                if (response.statusCode >= 400) {","                    AutoCollectPerformance._totalFailedRequestCount++;","                }","            });","        }","    };","    AutoCollectPerformance.prototype.trackPerformance = function () {","        this._trackCpu();","        this._trackMemory();","        this._trackNetwork();","    };","    // this is necessary to accommodate some point-in-time UI quirks","    AutoCollectPerformance.prototype._trackLegacyPerformance = function (counterType, value) {","        var perfmetric = new ContractsModule.Contracts.PerformanceCounterData();","        // semantic descriptions of these can be found here: https://support.microsoft.com/en-us/kb/815159/","        switch (counterType) {","            case PerfCounterType.ProcessorTime:","                perfmetric.categoryName = \"Process\";","                perfmetric.counterName = \"% Processor Time\";","                break;","            case PerfCounterType.AvailableMemory:","                perfmetric.categoryName = \"Memory\";","                perfmetric.counterName = \"Available Bytes\";","                break;","            case PerfCounterType.RequestsPerSec:","                perfmetric.categoryName = \"ASP.NET Applications\";","                perfmetric.counterName = \"Requests/Sec\";","                break;","            case PerfCounterType.PrivateBytes:","                perfmetric.categoryName = \"Process\";","                perfmetric.counterName = \"Private Bytes\";","                break;","            case PerfCounterType.RequestExecutionTime:","                perfmetric.categoryName = \"ASP.NET Applications\";","                perfmetric.counterName = \"Request Execution Time\";","                break;","            case PerfCounterType.PercentProcessorTime:","                perfmetric.categoryName = \"Processor\";","                perfmetric.counterName = \"% Processor Time\";","                break;","        }","        perfmetric.count = 1;","        perfmetric.kind = ContractsModule.Contracts.DataPointType.Aggregation;","        perfmetric.max = value;","        perfmetric.min = value;","        perfmetric.stdDev = 0;","        perfmetric.value = value;","        var data = new ContractsModule.Contracts.Data();","        data.baseType = \"Microsoft.ApplicationInsights.PerformanceCounterData\";","        data.baseData = perfmetric;","        this._client.track(data);","    };","    AutoCollectPerformance.prototype._trackCpu = function () {","        // this reports total ms spent in each category since the OS was booted, to calculate percent it is necessary","        // to find the delta since the last measurement","        var cpus = os.cpus();","        if (cpus && cpus.length && this._lastCpus && cpus.length === this._lastCpus.length) {","            var totalUser = 0;","            var totalSys = 0;","            var totalNice = 0;","            var totalIdle = 0;","            var totalIrq = 0;","            for (var i = 0; !!cpus && i < cpus.length; i++) {","                var cpu = cpus[i];","                var lastCpu = this._lastCpus[i];","                var name = \"% cpu(\" + i + \") \";","                var model = cpu.model;","                var speed = cpu.speed;","                var times = cpu.times;","                var lastTimes = lastCpu.times;","                // user cpu time (or) % CPU time spent in user space","                var user = (times.user - lastTimes.user) || 0;","                totalUser += user;","                // system cpu time (or) % CPU time spent in kernel space","                var sys = (times.sys - lastTimes.sys) || 0;","                totalSys += sys;","                // user nice cpu time (or) % CPU time spent on low priority processes","                var nice = (times.nice - lastTimes.nice) || 0;","                totalNice += nice;","                // idle cpu time (or) % CPU time spent idle","                var idle = (times.idle - lastTimes.idle) || 0;","                totalIdle += idle;","                // irq (or) % CPU time spent servicing/handling hardware interrupts","                var irq = (times.irq - lastTimes.irq) || 0;","                totalIrq += irq;","                var total = (user + sys + nice + idle + irq) || 1; // don\"t let this be 0 since it is a divisor","                this._client.trackMetric(name + \"user\", user / total);","            }","            var combinedName = \"% total cpu \";","            var combinedTotal = (totalUser + totalSys + totalNice + totalIdle + totalIrq) || 1;","            this._client.trackMetric(combinedName + \"user\", totalUser / combinedTotal);","            this._client.trackMetric(combinedName + \"sys\", totalSys / combinedTotal);","            this._client.trackMetric(combinedName + \"nice\", totalNice / combinedTotal);","            this._client.trackMetric(combinedName + \"idle\", totalIdle / combinedTotal);","            this._client.trackMetric(combinedName + \"irq\", totalIrq / combinedTotal);","            // todo: remove this legacy counter once the UI updates (~june 2015)","            this._trackLegacyPerformance(PerfCounterType.ProcessorTime, totalUser / combinedTotal);","            this._trackLegacyPerformance(PerfCounterType.PercentProcessorTime, (combinedTotal - totalIdle) / combinedTotal);","        }","        this._lastCpus = cpus;","    };","    AutoCollectPerformance.prototype._trackMemory = function () {","        var totalMem = os.totalmem();","        var freeMem = os.freemem();","        var usedMem = totalMem - freeMem;","        var percentUsedMem = usedMem / (totalMem || 1);","        var percentAvailableMem = freeMem / (totalMem || 1);","        this._client.trackMetric(\"Memory Used\", usedMem);","        this._client.trackMetric(\"Memory Free\", freeMem);","        this._client.trackMetric(\"Memory Total\", totalMem);","        this._client.trackMetric(\"% Memory Used\", percentUsedMem);","        this._client.trackMetric(\"% Memory Free\", percentAvailableMem);","        // todo: remove this legacy counter once the UI updates (~june 2015)","        this._trackLegacyPerformance(PerfCounterType.AvailableMemory, freeMem);","        this._trackLegacyPerformance(PerfCounterType.PrivateBytes, usedMem);","    };","    AutoCollectPerformance.prototype._trackNetwork = function () {","        // track total request counters","        var lastRequests = this._lastRequests;","        var requests = {","            totalRequestCount: AutoCollectPerformance._totalRequestCount,","            totalFailedRequestCount: AutoCollectPerformance._totalFailedRequestCount,","            time: +new Date","        };","        var intervalRequests = (requests.totalRequestCount - lastRequests.totalRequestCount) || 0;","        var intervalFailedRequests = (requests.totalFailedRequestCount - lastRequests.totalFailedRequestCount) || 0;","        var elapsedMs = requests.time - lastRequests.time;","        var elapsedSeconds = elapsedMs / 1000;","        if (elapsedMs > 0) {","            var requestsPerSec = intervalRequests / elapsedSeconds;","            var failedRequestsPerSec = intervalFailedRequests / elapsedSeconds;","            this._client.trackMetric(\"Total Requests\", requests.totalRequestCount);","            this._client.trackMetric(\"Total Failed Requests\", requests.totalFailedRequestCount);","            this._client.trackMetric(\"Requests per Second\", requestsPerSec);","            this._client.trackMetric(\"Failed Requests per Second\", failedRequestsPerSec);","            this._client.trackMetric(\"Last Request Execution Time\", AutoCollectPerformance._lastRequestExecutionTime);","            // todo: remove this legacy counter once the UI updates (~june 2015)","            this._trackLegacyPerformance(PerfCounterType.RequestsPerSec, requestsPerSec);","            this._trackLegacyPerformance(PerfCounterType.RequestExecutionTime, AutoCollectPerformance._lastRequestExecutionTime);","        }","        this._lastRequests = requests;","    };","    AutoCollectPerformance.prototype.dispose = function () {","        AutoCollectPerformance.INSTANCE = null;","        this._isInitialized = false;","    };","    AutoCollectPerformance._totalRequestCount = 0;","    AutoCollectPerformance._totalFailedRequestCount = 0;","    AutoCollectPerformance._lastRequestExecutionTime = 0;","    return AutoCollectPerformance;","}());","module.exports = AutoCollectPerformance;",""],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"16":1,"17":1,"18":0,"19":0,"21":0,"22":0,"23":0,"25":1,"26":0,"27":0,"28":0,"29":0,"31":0,"32":0,"33":0,"34":0,"39":0,"43":0,"44":0,"45":0,"49":1,"50":0,"52":1,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"61":0,"62":0,"67":1,"68":0,"69":0,"70":0,"71":0,"72":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"86":1,"87":0,"88":0,"89":0,"92":1,"93":0,"95":0,"97":0,"98":0,"99":0,"101":0,"102":0,"103":0,"105":0,"106":0,"107":0,"109":0,"110":0,"111":0,"113":0,"114":0,"115":0,"117":0,"118":0,"119":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"132":1,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"151":0,"152":0,"154":0,"155":0,"157":0,"158":0,"160":0,"161":0,"163":0,"164":0,"165":0,"166":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"176":0,"177":0,"179":0,"181":1,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"193":0,"194":0,"196":1,"198":0,"199":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"217":0,"218":0,"220":0,"222":1,"223":0,"224":0,"226":1,"227":1,"228":1,"229":1,"231":1}},"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/AutoCollection/ClientRequests.js":{"path":"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/AutoCollection/ClientRequests.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":0,"17":1,"18":0,"19":1,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":1,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":1,"58":0,"59":0,"60":1,"61":1,"62":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0,0],"6":[0,0],"7":[0,0],"8":[0,0,0],"9":[0,0],"10":[0,0,0],"11":[0,0],"12":[0,0,0,0,0,0],"13":[0,0]},"f":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},"fnMap":{"1":{"name":"(anonymous_1)","line":9,"loc":{"start":{"line":9,"column":33},"end":{"line":9,"column":45}}},"2":{"name":"AutoCollectClientRequests","line":10,"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":47}}},"3":{"name":"(anonymous_3)","line":17,"loc":{"start":{"line":17,"column":49},"end":{"line":17,"column":70}}},"4":{"name":"(anonymous_4)","line":23,"loc":{"start":{"line":23,"column":56},"end":{"line":23,"column":68}}},"5":{"name":"(anonymous_5)","line":26,"loc":{"start":{"line":26,"column":54},"end":{"line":26,"column":66}}},"6":{"name":"(anonymous_6)","line":30,"loc":{"start":{"line":30,"column":23},"end":{"line":30,"column":42}}},"7":{"name":"(anonymous_7)","line":46,"loc":{"start":{"line":46,"column":28},"end":{"line":46,"column":47}}},"8":{"name":"(anonymous_8)","line":63,"loc":{"start":{"line":63,"column":45},"end":{"line":63,"column":100}}},"9":{"name":"(anonymous_9)","line":81,"loc":{"start":{"line":81,"column":35},"end":{"line":81,"column":55}}},"10":{"name":"(anonymous_10)","line":86,"loc":{"start":{"line":86,"column":32},"end":{"line":86,"column":45}}},"11":{"name":"(anonymous_11)","line":93,"loc":{"start":{"line":93,"column":50},"end":{"line":93,"column":62}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":29}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":44}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":38}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":74}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":59}},"7":{"start":{"line":9,"column":0},"end":{"line":99,"column":5}},"8":{"start":{"line":10,"column":4},"end":{"line":16,"column":5}},"9":{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},"10":{"start":{"line":12,"column":12},"end":{"line":12,"column":112}},"11":{"start":{"line":14,"column":8},"end":{"line":14,"column":50}},"12":{"start":{"line":15,"column":8},"end":{"line":15,"column":30}},"13":{"start":{"line":17,"column":4},"end":{"line":22,"column":6}},"14":{"start":{"line":18,"column":8},"end":{"line":18,"column":36}},"15":{"start":{"line":19,"column":8},"end":{"line":21,"column":9}},"16":{"start":{"line":20,"column":12},"end":{"line":20,"column":31}},"17":{"start":{"line":23,"column":4},"end":{"line":25,"column":6}},"18":{"start":{"line":24,"column":8},"end":{"line":24,"column":35}},"19":{"start":{"line":26,"column":4},"end":{"line":58,"column":6}},"20":{"start":{"line":27,"column":8},"end":{"line":27,"column":25}},"21":{"start":{"line":28,"column":8},"end":{"line":28,"column":35}},"22":{"start":{"line":29,"column":8},"end":{"line":29,"column":43}},"23":{"start":{"line":30,"column":8},"end":{"line":40,"column":10}},"24":{"start":{"line":31,"column":12},"end":{"line":31,"column":33}},"25":{"start":{"line":32,"column":12},"end":{"line":34,"column":13}},"26":{"start":{"line":33,"column":16},"end":{"line":33,"column":52}},"27":{"start":{"line":35,"column":12},"end":{"line":35,"column":107}},"28":{"start":{"line":36,"column":12},"end":{"line":38,"column":13}},"29":{"start":{"line":37,"column":16},"end":{"line":37,"column":88}},"30":{"start":{"line":39,"column":12},"end":{"line":39,"column":27}},"31":{"start":{"line":44,"column":8},"end":{"line":57,"column":9}},"32":{"start":{"line":45,"column":12},"end":{"line":45,"column":55}},"33":{"start":{"line":46,"column":12},"end":{"line":56,"column":14}},"34":{"start":{"line":47,"column":16},"end":{"line":47,"column":37}},"35":{"start":{"line":48,"column":16},"end":{"line":50,"column":17}},"36":{"start":{"line":49,"column":20},"end":{"line":49,"column":56}},"37":{"start":{"line":51,"column":16},"end":{"line":51,"column":126}},"38":{"start":{"line":52,"column":16},"end":{"line":54,"column":17}},"39":{"start":{"line":53,"column":20},"end":{"line":53,"column":92}},"40":{"start":{"line":55,"column":16},"end":{"line":55,"column":31}},"41":{"start":{"line":63,"column":4},"end":{"line":92,"column":6}},"42":{"start":{"line":64,"column":8},"end":{"line":67,"column":9}},"43":{"start":{"line":65,"column":12},"end":{"line":65,"column":140}},"44":{"start":{"line":66,"column":12},"end":{"line":66,"column":19}},"45":{"start":{"line":68,"column":8},"end":{"line":68,"column":77}},"46":{"start":{"line":73,"column":8},"end":{"line":78,"column":9}},"47":{"start":{"line":77,"column":12},"end":{"line":77,"column":126}},"48":{"start":{"line":80,"column":8},"end":{"line":91,"column":9}},"49":{"start":{"line":81,"column":12},"end":{"line":85,"column":15}},"50":{"start":{"line":82,"column":16},"end":{"line":82,"column":63}},"51":{"start":{"line":83,"column":16},"end":{"line":83,"column":136}},"52":{"start":{"line":84,"column":16},"end":{"line":84,"column":79}},"53":{"start":{"line":86,"column":12},"end":{"line":90,"column":15}},"54":{"start":{"line":87,"column":16},"end":{"line":87,"column":53}},"55":{"start":{"line":88,"column":16},"end":{"line":88,"column":115}},"56":{"start":{"line":89,"column":16},"end":{"line":89,"column":79}},"57":{"start":{"line":93,"column":4},"end":{"line":96,"column":6}},"58":{"start":{"line":94,"column":8},"end":{"line":94,"column":50}},"59":{"start":{"line":95,"column":8},"end":{"line":95,"column":36}},"60":{"start":{"line":97,"column":4},"end":{"line":97,"column":98}},"61":{"start":{"line":98,"column":4},"end":{"line":98,"column":37}},"62":{"start":{"line":100,"column":0},"end":{"line":100,"column":43}}},"branchMap":{"1":{"line":11,"type":"if","locations":[{"start":{"line":11,"column":8},"end":{"line":11,"column":8}},{"start":{"line":11,"column":8},"end":{"line":11,"column":8}}]},"2":{"line":19,"type":"if","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":8}},{"start":{"line":19,"column":8},"end":{"line":19,"column":8}}]},"3":{"line":19,"type":"binary-expr","locations":[{"start":{"line":19,"column":12},"end":{"line":19,"column":27}},{"start":{"line":19,"column":31},"end":{"line":19,"column":51}}]},"4":{"line":36,"type":"if","locations":[{"start":{"line":36,"column":12},"end":{"line":36,"column":12}},{"start":{"line":36,"column":12},"end":{"line":36,"column":12}}]},"5":{"line":36,"type":"binary-expr","locations":[{"start":{"line":36,"column":16},"end":{"line":36,"column":23}},{"start":{"line":36,"column":27},"end":{"line":36,"column":34}},{"start":{"line":36,"column":38},"end":{"line":36,"column":104}}]},"6":{"line":44,"type":"if","locations":[{"start":{"line":44,"column":8},"end":{"line":44,"column":8}},{"start":{"line":44,"column":8},"end":{"line":44,"column":8}}]},"7":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":16},"end":{"line":52,"column":16}},{"start":{"line":52,"column":16},"end":{"line":52,"column":16}}]},"8":{"line":52,"type":"binary-expr","locations":[{"start":{"line":52,"column":20},"end":{"line":52,"column":27}},{"start":{"line":52,"column":31},"end":{"line":52,"column":38}},{"start":{"line":52,"column":42},"end":{"line":52,"column":108}}]},"9":{"line":64,"type":"if","locations":[{"start":{"line":64,"column":8},"end":{"line":64,"column":8}},{"start":{"line":64,"column":8},"end":{"line":64,"column":8}}]},"10":{"line":64,"type":"binary-expr","locations":[{"start":{"line":64,"column":12},"end":{"line":64,"column":27}},{"start":{"line":64,"column":31},"end":{"line":64,"column":39}},{"start":{"line":64,"column":43},"end":{"line":64,"column":50}}]},"11":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":8},"end":{"line":73,"column":8}},{"start":{"line":73,"column":8},"end":{"line":73,"column":8}}]},"12":{"line":73,"type":"binary-expr","locations":[{"start":{"line":73,"column":12},"end":{"line":73,"column":25}},{"start":{"line":73,"column":29},"end":{"line":73,"column":65}},{"start":{"line":74,"column":12},"end":{"line":74,"column":76}},{"start":{"line":75,"column":12},"end":{"line":75,"column":32}},{"start":{"line":75,"column":36},"end":{"line":75,"column":56}},{"start":{"line":76,"column":12},"end":{"line":76,"column":88}}]},"13":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":8},"end":{"line":80,"column":8}},{"start":{"line":80,"column":8},"end":{"line":80,"column":8}}]}},"code":["///<reference path=\"..\\typings\\globals\\node\\index.d.ts\" />","\"use strict\";","var http = require(\"http\");","var https = require(\"https\");","var Logging = require(\"../Library/Logging\");","var Util = require(\"../Library/Util\");","var RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");","var ClientRequestParser = require(\"./ClientRequestParser\");","var AutoCollectClientRequests = (function () {","    function AutoCollectClientRequests(client) {","        if (!!AutoCollectClientRequests.INSTANCE) {","            throw new Error(\"Client request tracking should be configured from the applicationInsights object\");","        }","        AutoCollectClientRequests.INSTANCE = this;","        this._client = client;","    }","    AutoCollectClientRequests.prototype.enable = function (isEnabled) {","        this._isEnabled = isEnabled;","        if (this._isEnabled && !this._isInitialized) {","            this._initialize();","        }","    };","    AutoCollectClientRequests.prototype.isInitialized = function () {","        return this._isInitialized;","    };","    AutoCollectClientRequests.prototype._initialize = function () {","        var _this = this;","        this._isInitialized = true;","        var originalRequest = http.request;","        http.request = function (options) {","            var requestArgs = [];","            for (var _i = 1; _i < arguments.length; _i++) {","                requestArgs[_i - 1] = arguments[_i];","            }","            var request = originalRequest.call.apply(originalRequest, [http, options].concat(requestArgs));","            if (request && options && !options[AutoCollectClientRequests.disableCollectionRequestOption]) {","                AutoCollectClientRequests.trackRequest(_this._client, options, request);","            }","            return request;","        };","        // On node >= v0.11.12, https.request just calls http.request (with additional options).","        // But on older versions, https.request needs to be patched also.","        // The regex matches versions < 0.11.12 (avoiding a semver package dependency).","        if (/^0\\.([0-9]\\.)|(10\\.)|(11\\.([0-9]|10|11)$)/.test(process.versions.node)) {","            var originalHttpsRequest_1 = https.request;","            https.request = function (options) {","                var requestArgs = [];","                for (var _i = 1; _i < arguments.length; _i++) {","                    requestArgs[_i - 1] = arguments[_i];","                }","                var request = originalHttpsRequest_1.call.apply(originalHttpsRequest_1, [https, options].concat(requestArgs));","                if (request && options && !options[AutoCollectClientRequests.disableCollectionRequestOption]) {","                    AutoCollectClientRequests.trackRequest(_this._client, options, request);","                }","                return request;","            };","        }","    };","    /**","     * Tracks an outgoing request. Because it may set headers this method must be called before","     * writing content to or ending the request.","     */","    AutoCollectClientRequests.trackRequest = function (client, requestOptions, request, properties) {","        if (!requestOptions || !request || !client) {","            Logging.info(\"AutoCollectClientRequests.trackRequest was called with invalid parameters: \", !requestOptions, !request, !client);","            return;","        }","        var requestParser = new ClientRequestParser(requestOptions, request);","        // Add the source ikey hash to the request headers, if a value was not already provided.","        // The getHeader/setHeader methods aren't available on very old Node versions, and","        // are not included in the v0.10 type declarations currently used. So check if the","        // methods exist before invoking them.","        if (client.config && client.config.instrumentationKeyHash &&","            Util.canIncludeCorrelationHeader(client, requestParser.getUrl()) &&","            request['getHeader'] && request['setHeader'] &&","            !request['getHeader'](RequestResponseHeaders.sourceInstrumentationKeyHeader)) {","            request['setHeader'](RequestResponseHeaders.sourceInstrumentationKeyHeader, client.config.instrumentationKeyHash);","        }","        // Collect dependency telemetry about the request when it finishes.","        if (request.on) {","            request.on('response', function (response) {","                requestParser.onResponse(response, properties);","                var context = { \"http.RequestOptions\": requestOptions, \"http.ClientRequest\": request, \"http.ClientResponse\": response };","                client.track(requestParser.getDependencyData(), null, context);","            });","            request.on('error', function (e) {","                requestParser.onError(e, properties);","                var context = { \"http.RequestOptions\": requestOptions, \"http.ClientRequest\": request, \"Error\": e };","                client.track(requestParser.getDependencyData(), null, context);","            });","        }","    };","    AutoCollectClientRequests.prototype.dispose = function () {","        AutoCollectClientRequests.INSTANCE = null;","        this._isInitialized = false;","    };","    AutoCollectClientRequests.disableCollectionRequestOption = 'disableAppInsightsAutoCollection';","    return AutoCollectClientRequests;","}());","module.exports = AutoCollectClientRequests;",""],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":0,"12":0,"14":0,"15":0,"17":1,"18":0,"19":0,"20":0,"23":1,"24":0,"26":1,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"35":0,"36":0,"37":0,"39":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"51":0,"52":0,"53":0,"55":0,"63":1,"64":0,"65":0,"66":0,"68":0,"73":0,"77":0,"80":0,"81":0,"82":0,"83":0,"84":0,"86":0,"87":0,"88":0,"89":0,"93":1,"94":0,"95":0,"97":1,"98":1,"100":1}},"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/Library/RequestResponseHeaders.js":{"path":"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/Library/RequestResponseHeaders.js","s":{"1":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":22,"column":2}}},"branchMap":{},"code":["\"use strict\";","module.exports = {","    /**","     * Source instrumentation header that is added by an application while making http","     * requests and retrieved by the other application when processing incoming requests.","     */","    sourceInstrumentationKeyHeader: \"x-ms-request-source-ikey\",","    /**","     * Target instrumentation header that is added to the response and retrieved by the","     * calling application when processing incoming responses.","     */","    targetInstrumentationKeyHeader: \"x-ms-request-target-ikey\",","    /**","     * Header containing the id of the immidiate caller","     */","    parentIdHeader: \"x-ms-request-id\",","    /**","     * Header containing the correlation id that kept the same for every telemetry item","     * accross transactions","     */","    rootIdHeader: \"x-ms-request-root-id\"","};",""],"l":{"2":1}},"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/AutoCollection/ClientRequestParser.js":{"path":"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/AutoCollection/ClientRequestParser.js","s":{"1":1,"2":1,"3":0,"4":0,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":0,"23":1,"24":0,"25":0,"26":1,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":1,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":1,"69":1},"b":{"1":[1,1,1],"2":[0,0],"3":[0,1],"4":[0,0],"5":[0,0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0]},"f":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"fnMap":{"1":{"name":"(anonymous_1)","line":3,"loc":{"start":{"line":3,"column":44},"end":{"line":3,"column":60}}},"2":{"name":"__","line":5,"loc":{"start":{"line":5,"column":4},"end":{"line":5,"column":18}}},"3":{"name":"(anonymous_3)","line":16,"loc":{"start":{"line":16,"column":27},"end":{"line":16,"column":45}}},"4":{"name":"ClientRequestParser","line":18,"loc":{"start":{"line":18,"column":4},"end":{"line":18,"column":58}}},"5":{"name":"(anonymous_5)","line":30,"loc":{"start":{"line":30,"column":44},"end":{"line":30,"column":73}}},"6":{"name":"(anonymous_6)","line":36,"loc":{"start":{"line":36,"column":47},"end":{"line":36,"column":79}}},"7":{"name":"(anonymous_7)","line":44,"loc":{"start":{"line":44,"column":54},"end":{"line":44,"column":66}}},"8":{"name":"(anonymous_8)","line":74,"loc":{"start":{"line":74,"column":52},"end":{"line":74,"column":80}}},"9":{"name":"(anonymous_9)","line":83,"loc":{"start":{"line":83,"column":55},"end":{"line":83,"column":70}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":7,"column":2}},"2":{"start":{"line":4,"column":4},"end":{"line":4,"column":58}},"3":{"start":{"line":4,"column":21},"end":{"line":4,"column":58}},"4":{"start":{"line":4,"column":46},"end":{"line":4,"column":58}},"5":{"start":{"line":5,"column":4},"end":{"line":5,"column":43}},"6":{"start":{"line":5,"column":20},"end":{"line":5,"column":41}},"7":{"start":{"line":6,"column":4},"end":{"line":6,"column":89}},"8":{"start":{"line":8,"column":0},"end":{"line":8,"column":25}},"9":{"start":{"line":9,"column":0},"end":{"line":9,"column":54}},"10":{"start":{"line":10,"column":0},"end":{"line":10,"column":38}},"11":{"start":{"line":11,"column":0},"end":{"line":11,"column":74}},"12":{"start":{"line":12,"column":0},"end":{"line":12,"column":47}},"13":{"start":{"line":16,"column":0},"end":{"line":115,"column":18}},"14":{"start":{"line":17,"column":4},"end":{"line":17,"column":43}},"15":{"start":{"line":18,"column":4},"end":{"line":26,"column":5}},"16":{"start":{"line":19,"column":8},"end":{"line":19,"column":26}},"17":{"start":{"line":20,"column":8},"end":{"line":25,"column":9}},"18":{"start":{"line":22,"column":12},"end":{"line":22,"column":41}},"19":{"start":{"line":23,"column":12},"end":{"line":23,"column":94}},"20":{"start":{"line":24,"column":12},"end":{"line":24,"column":41}},"21":{"start":{"line":30,"column":4},"end":{"line":32,"column":6}},"22":{"start":{"line":31,"column":8},"end":{"line":31,"column":54}},"23":{"start":{"line":36,"column":4},"end":{"line":40,"column":6}},"24":{"start":{"line":37,"column":8},"end":{"line":37,"column":68}},"25":{"start":{"line":38,"column":8},"end":{"line":39,"column":104}},"26":{"start":{"line":44,"column":4},"end":{"line":69,"column":6}},"27":{"start":{"line":45,"column":8},"end":{"line":45,"column":44}},"28":{"start":{"line":46,"column":8},"end":{"line":46,"column":37}},"29":{"start":{"line":47,"column":8},"end":{"line":47,"column":35}},"30":{"start":{"line":48,"column":8},"end":{"line":48,"column":82}},"31":{"start":{"line":49,"column":8},"end":{"line":49,"column":84}},"32":{"start":{"line":50,"column":8},"end":{"line":50,"column":98}},"33":{"start":{"line":51,"column":8},"end":{"line":58,"column":9}},"34":{"start":{"line":52,"column":12},"end":{"line":52,"column":58}},"35":{"start":{"line":53,"column":12},"end":{"line":53,"column":87}},"36":{"start":{"line":56,"column":12},"end":{"line":56,"column":102}},"37":{"start":{"line":57,"column":12},"end":{"line":57,"column":57}},"38":{"start":{"line":59,"column":8},"end":{"line":59,"column":47}},"39":{"start":{"line":60,"column":8},"end":{"line":60,"column":41}},"40":{"start":{"line":61,"column":8},"end":{"line":61,"column":69}},"41":{"start":{"line":62,"column":8},"end":{"line":62,"column":53}},"42":{"start":{"line":63,"column":8},"end":{"line":63,"column":90}},"43":{"start":{"line":64,"column":8},"end":{"line":64,"column":60}},"44":{"start":{"line":65,"column":8},"end":{"line":65,"column":56}},"45":{"start":{"line":66,"column":8},"end":{"line":66,"column":77}},"46":{"start":{"line":67,"column":8},"end":{"line":67,"column":41}},"47":{"start":{"line":68,"column":8},"end":{"line":68,"column":20}},"48":{"start":{"line":74,"column":4},"end":{"line":113,"column":6}},"49":{"start":{"line":75,"column":8},"end":{"line":87,"column":9}},"50":{"start":{"line":76,"column":12},"end":{"line":76,"column":41}},"51":{"start":{"line":80,"column":12},"end":{"line":80,"column":44}},"52":{"start":{"line":81,"column":12},"end":{"line":81,"column":25}},"53":{"start":{"line":82,"column":12},"end":{"line":86,"column":13}},"54":{"start":{"line":83,"column":16},"end":{"line":85,"column":19}},"55":{"start":{"line":84,"column":20},"end":{"line":84,"column":58}},"56":{"start":{"line":90,"column":8},"end":{"line":94,"column":9}},"57":{"start":{"line":91,"column":12},"end":{"line":91,"column":54}},"58":{"start":{"line":92,"column":12},"end":{"line":92,"column":52}},"59":{"start":{"line":93,"column":12},"end":{"line":93,"column":48}},"60":{"start":{"line":100,"column":8},"end":{"line":108,"column":9}},"61":{"start":{"line":103,"column":12},"end":{"line":103,"column":65}},"62":{"start":{"line":104,"column":12},"end":{"line":107,"column":13}},"63":{"start":{"line":105,"column":16},"end":{"line":105,"column":48}},"64":{"start":{"line":106,"column":16},"end":{"line":106,"column":36}},"65":{"start":{"line":110,"column":8},"end":{"line":110,"column":70}},"66":{"start":{"line":111,"column":8},"end":{"line":111,"column":59}},"67":{"start":{"line":112,"column":8},"end":{"line":112,"column":35}},"68":{"start":{"line":114,"column":4},"end":{"line":114,"column":31}},"69":{"start":{"line":116,"column":0},"end":{"line":116,"column":37}}},"branchMap":{"1":{"line":3,"type":"binary-expr","locations":[{"start":{"line":3,"column":17},"end":{"line":3,"column":21}},{"start":{"line":3,"column":25},"end":{"line":3,"column":39}},{"start":{"line":3,"column":44},"end":{"line":7,"column":1}}]},"2":{"line":4,"type":"if","locations":[{"start":{"line":4,"column":21},"end":{"line":4,"column":21}},{"start":{"line":4,"column":21},"end":{"line":4,"column":21}}]},"3":{"line":6,"type":"cond-expr","locations":[{"start":{"line":6,"column":31},"end":{"line":6,"column":47}},{"start":{"line":6,"column":51},"end":{"line":6,"column":87}}]},"4":{"line":20,"type":"if","locations":[{"start":{"line":20,"column":8},"end":{"line":20,"column":8}},{"start":{"line":20,"column":8},"end":{"line":20,"column":8}}]},"5":{"line":20,"type":"binary-expr","locations":[{"start":{"line":20,"column":12},"end":{"line":20,"column":19}},{"start":{"line":20,"column":23},"end":{"line":20,"column":37}},{"start":{"line":20,"column":41},"end":{"line":20,"column":55}}]},"6":{"line":39,"type":"binary-expr","locations":[{"start":{"line":39,"column":12},"end":{"line":39,"column":28}},{"start":{"line":39,"column":32},"end":{"line":39,"column":103}}]},"7":{"line":51,"type":"if","locations":[{"start":{"line":51,"column":8},"end":{"line":51,"column":8}},{"start":{"line":51,"column":8},"end":{"line":51,"column":8}}]},"8":{"line":63,"type":"cond-expr","locations":[{"start":{"line":63,"column":56},"end":{"line":63,"column":82}},{"start":{"line":63,"column":85},"end":{"line":63,"column":89}}]},"9":{"line":64,"type":"binary-expr","locations":[{"start":{"line":64,"column":38},"end":{"line":64,"column":53}},{"start":{"line":64,"column":57},"end":{"line":64,"column":59}}]},"10":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":8},"end":{"line":75,"column":8}},{"start":{"line":75,"column":8},"end":{"line":75,"column":8}}]},"11":{"line":82,"type":"if","locations":[{"start":{"line":82,"column":12},"end":{"line":82,"column":12}},{"start":{"line":82,"column":12},"end":{"line":82,"column":12}}]},"12":{"line":90,"type":"if","locations":[{"start":{"line":90,"column":8},"end":{"line":90,"column":8}},{"start":{"line":90,"column":8},"end":{"line":90,"column":8}}]},"13":{"line":100,"type":"if","locations":[{"start":{"line":100,"column":8},"end":{"line":100,"column":8}},{"start":{"line":100,"column":8},"end":{"line":100,"column":8}}]},"14":{"line":100,"type":"binary-expr","locations":[{"start":{"line":100,"column":12},"end":{"line":100,"column":24}},{"start":{"line":100,"column":28},"end":{"line":100,"column":40}}]},"15":{"line":104,"type":"if","locations":[{"start":{"line":104,"column":12},"end":{"line":104,"column":12}},{"start":{"line":104,"column":12},"end":{"line":104,"column":12}}]},"16":{"line":104,"type":"binary-expr","locations":[{"start":{"line":104,"column":16},"end":{"line":104,"column":32}},{"start":{"line":104,"column":36},"end":{"line":104,"column":48}}]},"17":{"line":110,"type":"binary-expr","locations":[{"start":{"line":110,"column":27},"end":{"line":110,"column":43}},{"start":{"line":110,"column":47},"end":{"line":110,"column":69}}]},"18":{"line":111,"type":"binary-expr","locations":[{"start":{"line":111,"column":27},"end":{"line":111,"column":43}},{"start":{"line":111,"column":47},"end":{"line":111,"column":58}}]}},"code":["///<reference path=\"..\\typings\\globals\\node\\index.d.ts\" />","\"use strict\";","var __extends = (this && this.__extends) || function (d, b) {","    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];","    function __() { this.constructor = d; }","    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());","};","var url = require(\"url\");","var ContractsModule = require(\"../Library/Contracts\");","var Util = require(\"../Library/Util\");","var RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");","var RequestParser = require(\"./RequestParser\");","/**"," * Helper class to read data from the requst/response objects and convert them into the telemetry contract"," */","var ClientRequestParser = (function (_super) {","    __extends(ClientRequestParser, _super);","    function ClientRequestParser(requestOptions, request) {","        _super.call(this);","        if (request && request.method && requestOptions) {","            // The ClientRequest.method property isn't documented, but is always there.","            this.method = request.method;","            this.url = ClientRequestParser._getUrlFromRequestOptions(requestOptions, request);","            this.startTime = +new Date();","        }","    }","    /**","     * Called when the ClientRequest emits an error event.","     */","    ClientRequestParser.prototype.onError = function (error, properties) {","        this._setStatus(undefined, error, properties);","    };","    /**","     * Called when the ClientRequest emits a response event.","     */","    ClientRequestParser.prototype.onResponse = function (response, properties) {","        this._setStatus(response.statusCode, undefined, properties);","        this.targetIKeyHash =","            response.headers && response.headers[RequestResponseHeaders.targetInstrumentationKeyHeader];","    };","    /**","     * Gets a dependency data contract object for a completed ClientRequest.","     */","    ClientRequestParser.prototype.getDependencyData = function () {","        var urlObject = url.parse(this.url);","        urlObject.search = undefined;","        urlObject.hash = undefined;","        var dependencyName = this.method.toUpperCase() + \" \" + urlObject.pathname;","        var remoteDependency = new ContractsModule.Contracts.RemoteDependencyData();","        remoteDependency.type = ContractsModule.Contracts.RemoteDependencyDataConstants.TYPE_HTTP;","        if (this.targetIKeyHash) {","            remoteDependency.type = \"ApplicationInsights\";","            remoteDependency.target = urlObject.hostname + \" | \" + this.targetIKeyHash;","        }","        else {","            remoteDependency.type = ContractsModule.Contracts.RemoteDependencyDataConstants.TYPE_HTTP;","            remoteDependency.target = urlObject.hostname;","        }","        remoteDependency.name = dependencyName;","        remoteDependency.data = this.url;","        remoteDependency.duration = Util.msToTimeSpan(this.duration);","        remoteDependency.success = this._isSuccess();","        remoteDependency.resultCode = this.statusCode ? this.statusCode.toString() : null;","        remoteDependency.properties = this.properties || {};","        var data = new ContractsModule.Contracts.Data();","        data.baseType = \"Microsoft.ApplicationInsights.RemoteDependencyData\";","        data.baseData = remoteDependency;","        return data;","    };","    /**","     * Builds a URL from request options, using the same logic as http.request(). This is","     * necessary because a ClientRequest object does not expose a url property.","     */","    ClientRequestParser._getUrlFromRequestOptions = function (options, request) {","        if (typeof options === 'string') {","            options = url.parse(options);","        }","        else {","            // Avoid modifying the original options object.","            var originalOptions_1 = options;","            options = {};","            if (originalOptions_1) {","                Object.keys(originalOptions_1).forEach(function (key) {","                    options[key] = originalOptions_1[key];","                });","            }","        }","        // Oddly, url.format ignores path and only uses pathname and search,","        // so create them from the path, if path was specified","        if (options.path) {","            var parsedQuery = url.parse(options.path);","            options.pathname = parsedQuery.pathname;","            options.search = parsedQuery.search;","        }","        // Simiarly, url.format ignores hostname and port if host is specified,","        // even if host doesn't have the port, but http.request does not work","        // this way. It will use the port if one is not specified in host,","        // effectively treating host as hostname, but will use the port specified","        // in host if it exists.","        if (options.host && options.port) {","            // Force a protocol so it will parse the host as the host, not path.","            // It is discarded and not used, so it doesn't matter if it doesn't match","            var parsedHost = url.parse(\"http://\" + options.host);","            if (!parsedHost.port && options.port) {","                options.hostname = options.host;","                delete options.host;","            }","        }","        // Mix in default values used by http.request and others","        options.protocol = options.protocol || request.agent.protocol;","        options.hostname = options.hostname || 'localhost';","        return url.format(options);","    };","    return ClientRequestParser;","}(RequestParser));","module.exports = ClientRequestParser;",""],"l":{"3":1,"4":1,"5":1,"6":1,"8":1,"9":1,"10":1,"11":1,"12":1,"16":1,"17":1,"18":1,"19":0,"20":0,"22":0,"23":0,"24":0,"30":1,"31":0,"36":1,"37":0,"38":0,"44":1,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"56":0,"57":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"74":1,"75":0,"76":0,"80":0,"81":0,"82":0,"83":0,"84":0,"90":0,"91":0,"92":0,"93":0,"100":0,"103":0,"104":0,"105":0,"106":0,"110":0,"111":0,"112":0,"114":1,"116":1}},"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/AutoCollection/RequestParser.js":{"path":"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/AutoCollection/RequestParser.js","s":{"1":1,"2":1,"3":1,"4":0,"5":1,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":1,"23":0,"24":1,"25":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0,0],"7":[0,0]},"f":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"(anonymous_1)","line":6,"loc":{"start":{"line":6,"column":21},"end":{"line":6,"column":33}}},"2":{"name":"RequestParser","line":7,"loc":{"start":{"line":7,"column":4},"end":{"line":7,"column":29}}},"3":{"name":"(anonymous_3)","line":12,"loc":{"start":{"line":12,"column":37},"end":{"line":12,"column":49}}},"4":{"name":"(anonymous_4)","line":15,"loc":{"start":{"line":15,"column":44},"end":{"line":15,"column":56}}},"5":{"name":"(anonymous_5)","line":18,"loc":{"start":{"line":18,"column":41},"end":{"line":18,"column":78}}},"6":{"name":"(anonymous_6)","line":40,"loc":{"start":{"line":40,"column":41},"end":{"line":40,"column":53}}}},"statementMap":{"1":{"start":{"line":6,"column":0},"end":{"line":44,"column":5}},"2":{"start":{"line":7,"column":4},"end":{"line":8,"column":5}},"3":{"start":{"line":12,"column":4},"end":{"line":14,"column":6}},"4":{"start":{"line":13,"column":8},"end":{"line":13,"column":24}},"5":{"start":{"line":15,"column":4},"end":{"line":17,"column":6}},"6":{"start":{"line":16,"column":8},"end":{"line":16,"column":37}},"7":{"start":{"line":18,"column":4},"end":{"line":39,"column":6}},"8":{"start":{"line":19,"column":8},"end":{"line":19,"column":34}},"9":{"start":{"line":20,"column":8},"end":{"line":20,"column":49}},"10":{"start":{"line":21,"column":8},"end":{"line":21,"column":33}},"11":{"start":{"line":22,"column":8},"end":{"line":37,"column":9}},"12":{"start":{"line":23,"column":12},"end":{"line":25,"column":13}},"13":{"start":{"line":24,"column":16},"end":{"line":24,"column":32}},"14":{"start":{"line":26,"column":12},"end":{"line":36,"column":13}},"15":{"start":{"line":27,"column":16},"end":{"line":27,"column":44}},"16":{"start":{"line":29,"column":17},"end":{"line":36,"column":13}},"17":{"start":{"line":30,"column":16},"end":{"line":30,"column":52}},"18":{"start":{"line":32,"column":17},"end":{"line":36,"column":13}},"19":{"start":{"line":33,"column":16},"end":{"line":35,"column":17}},"20":{"start":{"line":34,"column":20},"end":{"line":34,"column":97}},"21":{"start":{"line":38,"column":8},"end":{"line":38,"column":37}},"22":{"start":{"line":40,"column":4},"end":{"line":42,"column":6}},"23":{"start":{"line":41,"column":8},"end":{"line":41,"column":64}},"24":{"start":{"line":43,"column":4},"end":{"line":43,"column":25}},"25":{"start":{"line":45,"column":0},"end":{"line":45,"column":31}}},"branchMap":{"1":{"line":22,"type":"if","locations":[{"start":{"line":22,"column":8},"end":{"line":22,"column":8}},{"start":{"line":22,"column":8},"end":{"line":22,"column":8}}]},"2":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":12},"end":{"line":23,"column":12}},{"start":{"line":23,"column":12},"end":{"line":23,"column":12}}]},"3":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":12},"end":{"line":26,"column":12}},{"start":{"line":26,"column":12},"end":{"line":26,"column":12}}]},"4":{"line":29,"type":"if","locations":[{"start":{"line":29,"column":17},"end":{"line":29,"column":17}},{"start":{"line":29,"column":17},"end":{"line":29,"column":17}}]},"5":{"line":32,"type":"if","locations":[{"start":{"line":32,"column":17},"end":{"line":32,"column":17}},{"start":{"line":32,"column":17},"end":{"line":32,"column":17}}]},"6":{"line":34,"type":"binary-expr","locations":[{"start":{"line":34,"column":38},"end":{"line":34,"column":48}},{"start":{"line":34,"column":52},"end":{"line":34,"column":71}},{"start":{"line":34,"column":75},"end":{"line":34,"column":96}}]},"7":{"line":41,"type":"binary-expr","locations":[{"start":{"line":41,"column":16},"end":{"line":41,"column":35}},{"start":{"line":41,"column":41},"end":{"line":41,"column":62}}]}},"code":["\"use strict\";","/**"," * Base class for helpers that read data from HTTP requst/response objects and convert them"," * into the telemetry contract objects."," */","var RequestParser = (function () {","    function RequestParser() {","    }","    /**","     * Gets a url parsed out from request options","     */","    RequestParser.prototype.getUrl = function () {","        return this.url;","    };","    RequestParser.prototype.RequestParser = function () {","        this.startTime = +new Date();","    };","    RequestParser.prototype._setStatus = function (status, error, properties) {","        var endTime = +new Date();","        this.duration = endTime - this.startTime;","        this.statusCode = status;","        if (error) {","            if (!properties) {","                properties = {};","            }","            if (typeof error === \"string\") {","                properties[\"error\"] = error;","            }","            else if (error instanceof Error) {","                properties[\"error\"] = error.message;","            }","            else if (typeof error === \"object\") {","                for (var key in error) {","                    properties[key] = error[key] && error[key].toString && error[key].toString();","                }","            }","        }","        this.properties = properties;","    };","    RequestParser.prototype._isSuccess = function () {","        return (0 < this.statusCode) && (this.statusCode < 400);","    };","    return RequestParser;","}());","module.exports = RequestParser;",""],"l":{"6":1,"7":1,"12":1,"13":0,"15":1,"16":0,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"26":0,"27":0,"29":0,"30":0,"32":0,"33":0,"34":0,"38":0,"40":1,"41":0,"43":1,"45":1}},"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/AutoCollection/ServerRequests.js":{"path":"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/AutoCollection/ServerRequests.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":0,"13":0,"14":1,"15":0,"16":0,"17":0,"18":0,"19":1,"20":0,"21":0,"22":0,"23":0,"24":0,"25":1,"26":0,"27":1,"28":0,"29":1,"30":0,"31":0,"32":0,"33":1,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":1,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":1,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":1,"87":0,"88":0,"89":1,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":1,"98":0,"99":0,"100":1,"101":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0,0],"15":[0,0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0,0],"22":[0,0],"23":[0,0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0,0,0,0,0],"34":[0,0]},"f":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0},"fnMap":{"1":{"name":"(anonymous_1)","line":10,"loc":{"start":{"line":10,"column":33},"end":{"line":10,"column":45}}},"2":{"name":"AutoCollectServerRequests","line":11,"loc":{"start":{"line":11,"column":4},"end":{"line":11,"column":47}}},"3":{"name":"(anonymous_3)","line":18,"loc":{"start":{"line":18,"column":49},"end":{"line":18,"column":70}}},"4":{"name":"(anonymous_4)","line":28,"loc":{"start":{"line":28,"column":61},"end":{"line":28,"column":82}}},"5":{"name":"(anonymous_5)","line":37,"loc":{"start":{"line":37,"column":56},"end":{"line":37,"column":68}}},"6":{"name":"(anonymous_6)","line":40,"loc":{"start":{"line":40,"column":60},"end":{"line":40,"column":72}}},"7":{"name":"(anonymous_7)","line":43,"loc":{"start":{"line":43,"column":70},"end":{"line":43,"column":95}}},"8":{"name":"(anonymous_8)","line":49,"loc":{"start":{"line":49,"column":54},"end":{"line":49,"column":66}}},"9":{"name":"(anonymous_9)","line":53,"loc":{"start":{"line":53,"column":28},"end":{"line":53,"column":49}}},"10":{"name":"(anonymous_10)","line":55,"loc":{"start":{"line":55,"column":38},"end":{"line":55,"column":67}}},"11":{"name":"(anonymous_11)","line":59,"loc":{"start":{"line":59,"column":105},"end":{"line":59,"column":117}}},"12":{"name":"(anonymous_12)","line":71,"loc":{"start":{"line":71,"column":29},"end":{"line":71,"column":59}}},"13":{"name":"(anonymous_13)","line":72,"loc":{"start":{"line":72,"column":48},"end":{"line":72,"column":77}}},"14":{"name":"(anonymous_14)","line":76,"loc":{"start":{"line":76,"column":105},"end":{"line":76,"column":117}}},"15":{"name":"(anonymous_15)","line":90,"loc":{"start":{"line":90,"column":49},"end":{"line":90,"column":127}}},"16":{"name":"(anonymous_16)","line":110,"loc":{"start":{"line":110,"column":45},"end":{"line":110,"column":110}}},"17":{"name":"(anonymous_17)","line":129,"loc":{"start":{"line":129,"column":36},"end":{"line":129,"column":48}}},"18":{"name":"(anonymous_18)","line":135,"loc":{"start":{"line":135,"column":32},"end":{"line":135,"column":49}}},"19":{"name":"(anonymous_19)","line":143,"loc":{"start":{"line":143,"column":54},"end":{"line":143,"column":82}}},"20":{"name":"(anonymous_20)","line":151,"loc":{"start":{"line":151,"column":43},"end":{"line":151,"column":136}}},"21":{"name":"(anonymous_21)","line":163,"loc":{"start":{"line":163,"column":50},"end":{"line":163,"column":62}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":29}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":44}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":38}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":74}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":59}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":73}},"8":{"start":{"line":10,"column":0},"end":{"line":168,"column":5}},"9":{"start":{"line":11,"column":4},"end":{"line":17,"column":5}},"10":{"start":{"line":12,"column":8},"end":{"line":14,"column":9}},"11":{"start":{"line":13,"column":12},"end":{"line":13,"column":112}},"12":{"start":{"line":15,"column":8},"end":{"line":15,"column":50}},"13":{"start":{"line":16,"column":8},"end":{"line":16,"column":30}},"14":{"start":{"line":18,"column":4},"end":{"line":27,"column":6}},"15":{"start":{"line":19,"column":8},"end":{"line":19,"column":36}},"16":{"start":{"line":23,"column":8},"end":{"line":26,"column":9}},"17":{"start":{"line":24,"column":12},"end":{"line":24,"column":61}},"18":{"start":{"line":25,"column":12},"end":{"line":25,"column":31}},"19":{"start":{"line":28,"column":4},"end":{"line":36,"column":6}},"20":{"start":{"line":29,"column":8},"end":{"line":34,"column":9}},"21":{"start":{"line":30,"column":12},"end":{"line":30,"column":75}},"22":{"start":{"line":32,"column":13},"end":{"line":34,"column":9}},"23":{"start":{"line":33,"column":12},"end":{"line":33,"column":76}},"24":{"start":{"line":35,"column":8},"end":{"line":35,"column":44}},"25":{"start":{"line":37,"column":4},"end":{"line":39,"column":6}},"26":{"start":{"line":38,"column":8},"end":{"line":38,"column":35}},"27":{"start":{"line":40,"column":4},"end":{"line":42,"column":6}},"28":{"start":{"line":41,"column":8},"end":{"line":41,"column":39}},"29":{"start":{"line":43,"column":4},"end":{"line":48,"column":6}},"30":{"start":{"line":44,"column":8},"end":{"line":46,"column":9}},"31":{"start":{"line":45,"column":12},"end":{"line":45,"column":19}},"32":{"start":{"line":47,"column":8},"end":{"line":47,"column":237}},"33":{"start":{"line":49,"column":4},"end":{"line":86,"column":6}},"34":{"start":{"line":50,"column":8},"end":{"line":50,"column":25}},"35":{"start":{"line":51,"column":8},"end":{"line":51,"column":35}},"36":{"start":{"line":52,"column":8},"end":{"line":52,"column":51}},"37":{"start":{"line":53,"column":8},"end":{"line":69,"column":10}},"38":{"start":{"line":55,"column":12},"end":{"line":68,"column":15}},"39":{"start":{"line":57,"column":16},"end":{"line":57,"column":69}},"40":{"start":{"line":58,"column":16},"end":{"line":58,"column":90}},"41":{"start":{"line":59,"column":16},"end":{"line":67,"column":19}},"42":{"start":{"line":60,"column":20},"end":{"line":63,"column":21}},"43":{"start":{"line":62,"column":24},"end":{"line":62,"column":118}},"44":{"start":{"line":64,"column":20},"end":{"line":66,"column":21}},"45":{"start":{"line":65,"column":24},"end":{"line":65,"column":53}},"46":{"start":{"line":70,"column":8},"end":{"line":70,"column":53}},"47":{"start":{"line":71,"column":8},"end":{"line":85,"column":10}},"48":{"start":{"line":72,"column":12},"end":{"line":84,"column":15}},"49":{"start":{"line":74,"column":16},"end":{"line":74,"column":69}},"50":{"start":{"line":75,"column":16},"end":{"line":75,"column":90}},"51":{"start":{"line":76,"column":16},"end":{"line":83,"column":19}},"52":{"start":{"line":77,"column":20},"end":{"line":79,"column":21}},"53":{"start":{"line":78,"column":24},"end":{"line":78,"column":118}},"54":{"start":{"line":80,"column":20},"end":{"line":82,"column":21}},"55":{"start":{"line":81,"column":24},"end":{"line":81,"column":53}},"56":{"start":{"line":90,"column":4},"end":{"line":106,"column":6}},"57":{"start":{"line":91,"column":8},"end":{"line":94,"column":9}},"58":{"start":{"line":92,"column":12},"end":{"line":92,"column":138}},"59":{"start":{"line":93,"column":12},"end":{"line":93,"column":19}},"60":{"start":{"line":95,"column":8},"end":{"line":95,"column":74}},"61":{"start":{"line":97,"column":8},"end":{"line":97,"column":107}},"62":{"start":{"line":98,"column":8},"end":{"line":98,"column":142}},"63":{"start":{"line":100,"column":8},"end":{"line":104,"column":9}},"64":{"start":{"line":101,"column":12},"end":{"line":101,"column":131}},"65":{"start":{"line":102,"column":12},"end":{"line":102,"column":137}},"66":{"start":{"line":103,"column":12},"end":{"line":103,"column":122}},"67":{"start":{"line":105,"column":8},"end":{"line":105,"column":128}},"68":{"start":{"line":110,"column":4},"end":{"line":139,"column":6}},"69":{"start":{"line":111,"column":8},"end":{"line":114,"column":9}},"70":{"start":{"line":112,"column":12},"end":{"line":112,"column":134}},"71":{"start":{"line":113,"column":12},"end":{"line":113,"column":19}},"72":{"start":{"line":116,"column":8},"end":{"line":116,"column":107}},"73":{"start":{"line":117,"column":8},"end":{"line":117,"column":158}},"74":{"start":{"line":118,"column":8},"end":{"line":120,"column":9}},"75":{"start":{"line":119,"column":12},"end":{"line":119,"column":78}},"76":{"start":{"line":122,"column":8},"end":{"line":126,"column":9}},"77":{"start":{"line":123,"column":12},"end":{"line":123,"column":131}},"78":{"start":{"line":124,"column":12},"end":{"line":124,"column":137}},"79":{"start":{"line":125,"column":12},"end":{"line":125,"column":149}},"80":{"start":{"line":128,"column":8},"end":{"line":132,"column":9}},"81":{"start":{"line":129,"column":12},"end":{"line":131,"column":15}},"82":{"start":{"line":130,"column":16},"end":{"line":130,"column":119}},"83":{"start":{"line":134,"column":8},"end":{"line":138,"column":9}},"84":{"start":{"line":135,"column":12},"end":{"line":137,"column":15}},"85":{"start":{"line":136,"column":16},"end":{"line":136,"column":120}},"86":{"start":{"line":143,"column":4},"end":{"line":150,"column":6}},"87":{"start":{"line":144,"column":8},"end":{"line":149,"column":9}},"88":{"start":{"line":148,"column":12},"end":{"line":148,"column":124}},"89":{"start":{"line":151,"column":4},"end":{"line":162,"column":6}},"90":{"start":{"line":152,"column":8},"end":{"line":157,"column":9}},"91":{"start":{"line":153,"column":12},"end":{"line":153,"column":75}},"92":{"start":{"line":156,"column":12},"end":{"line":156,"column":81}},"93":{"start":{"line":158,"column":8},"end":{"line":158,"column":89}},"94":{"start":{"line":159,"column":8},"end":{"line":159,"column":50}},"95":{"start":{"line":160,"column":8},"end":{"line":160,"column":69}},"96":{"start":{"line":161,"column":8},"end":{"line":161,"column":42}},"97":{"start":{"line":163,"column":4},"end":{"line":166,"column":6}},"98":{"start":{"line":164,"column":8},"end":{"line":164,"column":50}},"99":{"start":{"line":165,"column":8},"end":{"line":165,"column":36}},"100":{"start":{"line":167,"column":4},"end":{"line":167,"column":37}},"101":{"start":{"line":169,"column":0},"end":{"line":169,"column":43}}},"branchMap":{"1":{"line":12,"type":"if","locations":[{"start":{"line":12,"column":8},"end":{"line":12,"column":8}},{"start":{"line":12,"column":8},"end":{"line":12,"column":8}}]},"2":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":8},"end":{"line":23,"column":8}},{"start":{"line":23,"column":8},"end":{"line":23,"column":8}}]},"3":{"line":23,"type":"binary-expr","locations":[{"start":{"line":23,"column":13},"end":{"line":23,"column":36}},{"start":{"line":23,"column":40},"end":{"line":23,"column":55}},{"start":{"line":23,"column":60},"end":{"line":23,"column":80}}]},"4":{"line":29,"type":"if","locations":[{"start":{"line":29,"column":8},"end":{"line":29,"column":8}},{"start":{"line":29,"column":8},"end":{"line":29,"column":8}}]},"5":{"line":29,"type":"binary-expr","locations":[{"start":{"line":29,"column":12},"end":{"line":29,"column":21}},{"start":{"line":29,"column":25},"end":{"line":29,"column":49}}]},"6":{"line":32,"type":"if","locations":[{"start":{"line":32,"column":13},"end":{"line":32,"column":13}},{"start":{"line":32,"column":13},"end":{"line":32,"column":13}}]},"7":{"line":32,"type":"binary-expr","locations":[{"start":{"line":32,"column":17},"end":{"line":32,"column":27}},{"start":{"line":32,"column":31},"end":{"line":32,"column":54}}]},"8":{"line":44,"type":"if","locations":[{"start":{"line":44,"column":8},"end":{"line":44,"column":8}},{"start":{"line":44,"column":8},"end":{"line":44,"column":8}}]},"9":{"line":60,"type":"if","locations":[{"start":{"line":60,"column":20},"end":{"line":60,"column":20}},{"start":{"line":60,"column":20},"end":{"line":60,"column":20}}]},"10":{"line":64,"type":"if","locations":[{"start":{"line":64,"column":20},"end":{"line":64,"column":20}},{"start":{"line":64,"column":20},"end":{"line":64,"column":20}}]},"11":{"line":77,"type":"if","locations":[{"start":{"line":77,"column":20},"end":{"line":77,"column":20}},{"start":{"line":77,"column":20},"end":{"line":77,"column":20}}]},"12":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":20},"end":{"line":80,"column":20}},{"start":{"line":80,"column":20},"end":{"line":80,"column":20}}]},"13":{"line":91,"type":"if","locations":[{"start":{"line":91,"column":8},"end":{"line":91,"column":8}},{"start":{"line":91,"column":8},"end":{"line":91,"column":8}}]},"14":{"line":91,"type":"binary-expr","locations":[{"start":{"line":91,"column":12},"end":{"line":91,"column":20}},{"start":{"line":91,"column":24},"end":{"line":91,"column":33}},{"start":{"line":91,"column":37},"end":{"line":91,"column":44}}]},"15":{"line":98,"type":"binary-expr","locations":[{"start":{"line":98,"column":62},"end":{"line":98,"column":80}},{"start":{"line":98,"column":84},"end":{"line":98,"column":121}},{"start":{"line":98,"column":126},"end":{"line":98,"column":140}}]},"16":{"line":100,"type":"if","locations":[{"start":{"line":100,"column":8},"end":{"line":100,"column":8}},{"start":{"line":100,"column":8},"end":{"line":100,"column":8}}]},"17":{"line":101,"type":"binary-expr","locations":[{"start":{"line":101,"column":46},"end":{"line":101,"column":95}},{"start":{"line":101,"column":99},"end":{"line":101,"column":130}}]},"18":{"line":102,"type":"binary-expr","locations":[{"start":{"line":102,"column":48},"end":{"line":102,"column":99}},{"start":{"line":102,"column":103},"end":{"line":102,"column":136}}]},"19":{"line":103,"type":"binary-expr","locations":[{"start":{"line":103,"column":52},"end":{"line":103,"column":80}},{"start":{"line":103,"column":84},"end":{"line":103,"column":121}}]},"20":{"line":111,"type":"if","locations":[{"start":{"line":111,"column":8},"end":{"line":111,"column":8}},{"start":{"line":111,"column":8},"end":{"line":111,"column":8}}]},"21":{"line":111,"type":"binary-expr","locations":[{"start":{"line":111,"column":12},"end":{"line":111,"column":20}},{"start":{"line":111,"column":24},"end":{"line":111,"column":33}},{"start":{"line":111,"column":37},"end":{"line":111,"column":44}}]},"22":{"line":117,"type":"binary-expr","locations":[{"start":{"line":117,"column":28},"end":{"line":117,"column":42}},{"start":{"line":117,"column":46},"end":{"line":117,"column":157}}]},"23":{"line":117,"type":"binary-expr","locations":[{"start":{"line":117,"column":79},"end":{"line":117,"column":97}},{"start":{"line":117,"column":101},"end":{"line":117,"column":138}},{"start":{"line":117,"column":142},"end":{"line":117,"column":156}}]},"24":{"line":118,"type":"if","locations":[{"start":{"line":118,"column":8},"end":{"line":118,"column":8}},{"start":{"line":118,"column":8},"end":{"line":118,"column":8}}]},"25":{"line":122,"type":"if","locations":[{"start":{"line":122,"column":8},"end":{"line":122,"column":8}},{"start":{"line":122,"column":8},"end":{"line":122,"column":8}}]},"26":{"line":122,"type":"binary-expr","locations":[{"start":{"line":122,"column":12},"end":{"line":122,"column":30}},{"start":{"line":122,"column":34},"end":{"line":122,"column":49}}]},"27":{"line":123,"type":"binary-expr","locations":[{"start":{"line":123,"column":46},"end":{"line":123,"column":95}},{"start":{"line":123,"column":99},"end":{"line":123,"column":130}}]},"28":{"line":124,"type":"binary-expr","locations":[{"start":{"line":124,"column":48},"end":{"line":124,"column":99}},{"start":{"line":124,"column":103},"end":{"line":124,"column":136}}]},"29":{"line":125,"type":"binary-expr","locations":[{"start":{"line":125,"column":52},"end":{"line":125,"column":107}},{"start":{"line":125,"column":111},"end":{"line":125,"column":148}}]},"30":{"line":128,"type":"if","locations":[{"start":{"line":128,"column":8},"end":{"line":128,"column":8}},{"start":{"line":128,"column":8},"end":{"line":128,"column":8}}]},"31":{"line":134,"type":"if","locations":[{"start":{"line":134,"column":8},"end":{"line":134,"column":8}},{"start":{"line":134,"column":8},"end":{"line":134,"column":8}}]},"32":{"line":144,"type":"if","locations":[{"start":{"line":144,"column":8},"end":{"line":144,"column":8}},{"start":{"line":144,"column":8},"end":{"line":144,"column":8}}]},"33":{"line":144,"type":"binary-expr","locations":[{"start":{"line":144,"column":12},"end":{"line":144,"column":25}},{"start":{"line":144,"column":29},"end":{"line":144,"column":65}},{"start":{"line":145,"column":12},"end":{"line":145,"column":30}},{"start":{"line":145,"column":34},"end":{"line":145,"column":52}},{"start":{"line":146,"column":12},"end":{"line":146,"column":86}},{"start":{"line":147,"column":12},"end":{"line":147,"column":33}}]},"34":{"line":152,"type":"if","locations":[{"start":{"line":152,"column":8},"end":{"line":152,"column":8}},{"start":{"line":152,"column":8},"end":{"line":152,"column":8}}]}},"code":["///<reference path=\"..\\typings\\globals\\node\\index.d.ts\" />","\"use strict\";","var http = require(\"http\");","var https = require(\"https\");","var Logging = require(\"../Library/Logging\");","var Util = require(\"../Library/Util\");","var RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");","var ServerRequestParser = require(\"./ServerRequestParser\");","var CorrelationContextManager_1 = require(\"./CorrelationContextManager\");","var AutoCollectServerRequests = (function () {","    function AutoCollectServerRequests(client) {","        if (!!AutoCollectServerRequests.INSTANCE) {","            throw new Error(\"Server request tracking should be configured from the applicationInsights object\");","        }","        AutoCollectServerRequests.INSTANCE = this;","        this._client = client;","    }","    AutoCollectServerRequests.prototype.enable = function (isEnabled) {","        this._isEnabled = isEnabled;","        // Autocorrelation requires automatic monitoring of incoming server requests","        // Disabling autocollection but enabling autocorrelation will still enable","        // request monitoring but will not produce request events","        if ((this._isAutoCorrelating || this._isEnabled) && !this._isInitialized) {","            this.useAutoCorrelation(this._isAutoCorrelating);","            this._initialize();","        }","    };","    AutoCollectServerRequests.prototype.useAutoCorrelation = function (isEnabled) {","        if (isEnabled && !this._isAutoCorrelating) {","            CorrelationContextManager_1.CorrelationContextManager.enable();","        }","        else if (!isEnabled && this._isAutoCorrelating) {","            CorrelationContextManager_1.CorrelationContextManager.disable();","        }","        this._isAutoCorrelating = isEnabled;","    };","    AutoCollectServerRequests.prototype.isInitialized = function () {","        return this._isInitialized;","    };","    AutoCollectServerRequests.prototype.isAutoCorrelating = function () {","        return this._isAutoCorrelating;","    };","    AutoCollectServerRequests.prototype._generateCorrelationContext = function (requestParser) {","        if (!this._isAutoCorrelating) {","            return;","        }","        return CorrelationContextManager_1.CorrelationContextManager.generateContextObject(requestParser.getRequestId(), requestParser.getOperationName(this._client.context.tags), requestParser.getOperationId(this._client.context.tags));","    };","    AutoCollectServerRequests.prototype._initialize = function () {","        var _this = this;","        this._isInitialized = true;","        var originalHttpServer = http.createServer;","        http.createServer = function (onRequest) {","            // todo: get a pointer to the server so the IP address can be read from server.address","            return originalHttpServer(function (request, response) {","                // Set up correlation context","                var requestParser = new ServerRequestParser(request);","                var correlationContext = _this._generateCorrelationContext(requestParser);","                CorrelationContextManager_1.CorrelationContextManager.runWithContext(correlationContext, function () {","                    if (_this._isEnabled) {","                        // Auto collect request","                        AutoCollectServerRequests.trackRequest(_this._client, request, response, null, requestParser);","                    }","                    if (typeof onRequest === \"function\") {","                        onRequest(request, response);","                    }","                });","            });","        };","        var originalHttpsServer = https.createServer;","        https.createServer = function (options, onRequest) {","            return originalHttpsServer(options, function (request, response) {","                // Set up correlation context","                var requestParser = new ServerRequestParser(request);","                var correlationContext = _this._generateCorrelationContext(requestParser);","                CorrelationContextManager_1.CorrelationContextManager.runWithContext(correlationContext, function () {","                    if (_this._isEnabled) {","                        AutoCollectServerRequests.trackRequest(_this._client, request, response, null, requestParser);","                    }","                    if (typeof onRequest === \"function\") {","                        onRequest(request, response);","                    }","                });","            });","        };","    };","    /**","     * Tracks a request synchronously (doesn't wait for response 'finish' event)","     */","    AutoCollectServerRequests.trackRequestSync = function (client, request, response, ellapsedMilliseconds, properties, error) {","        if (!request || !response || !client) {","            Logging.info(\"AutoCollectServerRequests.trackRequestSync was called with invalid parameters: \", !request, !response, !client);","            return;","        }","        AutoCollectServerRequests.addResponseIKeyHeader(client, response);","        // store data about the request","        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();","        var requestParser = new ServerRequestParser(request, (correlationContext && correlationContext.operation.parentId) || Util.newGuid());","        // Overwrite correlation context with request parser results","        if (correlationContext) {","            correlationContext.operation.id = requestParser.getOperationId(client.context.tags) || correlationContext.operation.id;","            correlationContext.operation.name = requestParser.getOperationName(client.context.tags) || correlationContext.operation.name;","            correlationContext.operation.parentId = requestParser.getRequestId() || correlationContext.operation.parentId;","        }","        AutoCollectServerRequests.endRequest(client, requestParser, request, response, ellapsedMilliseconds, properties, error);","    };","    /**","     * Tracks a request by listening to the response 'finish' event","     */","    AutoCollectServerRequests.trackRequest = function (client, request, response, properties, _requestParser) {","        if (!request || !response || !client) {","            Logging.info(\"AutoCollectServerRequests.trackRequest was called with invalid parameters: \", !request, !response, !client);","            return;","        }","        // store data about the request","        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();","        var requestParser = _requestParser || new ServerRequestParser(request, correlationContext && correlationContext.operation.parentId || Util.newGuid());","        if (Util.canIncludeCorrelationHeader(client, requestParser.getUrl())) {","            AutoCollectServerRequests.addResponseIKeyHeader(client, response);","        }","        // Overwrite correlation context with request parser results (if not an automatic track. we've already precalculated the correlation context in that case)","        if (correlationContext && !_requestParser) {","            correlationContext.operation.id = requestParser.getOperationId(client.context.tags) || correlationContext.operation.id;","            correlationContext.operation.name = requestParser.getOperationName(client.context.tags) || correlationContext.operation.name;","            correlationContext.operation.parentId = requestParser.getOperationParentId(client.context.tags) || correlationContext.operation.parentId;","        }","        // response listeners","        if (response.once) {","            response.once(\"finish\", function () {","                AutoCollectServerRequests.endRequest(client, requestParser, request, response, null, properties, null);","            });","        }","        // track a failed request if an error is emitted","        if (request.on) {","            request.on(\"error\", function (error) {","                AutoCollectServerRequests.endRequest(client, requestParser, request, response, null, properties, error);","            });","        }","    };","    /**","     * Add the target ikey hash to the response headers, if not already provided.","     */","    AutoCollectServerRequests.addResponseIKeyHeader = function (client, response) {","        if (client.config && client.config.instrumentationKeyHash &&","            response.getHeader && response.setHeader &&","            !response.getHeader(RequestResponseHeaders.targetInstrumentationKeyHeader) &&","            !response.headersSent) {","            response.setHeader(RequestResponseHeaders.targetInstrumentationKeyHeader, client.config.instrumentationKeyHash);","        }","    };","    AutoCollectServerRequests.endRequest = function (client, requestParser, request, response, ellapsedMilliseconds, properties, error) {","        if (error) {","            requestParser.onError(error, properties, ellapsedMilliseconds);","        }","        else {","            requestParser.onResponse(response, properties, ellapsedMilliseconds);","        }","        var context = { \"http.ServerRequest\": request, \"http.ServerResponse\": response };","        var data = requestParser.getRequestData();","        var tags = requestParser.getRequestTags(client.context.tags);","        client.track(data, tags, context);","    };","    AutoCollectServerRequests.prototype.dispose = function () {","        AutoCollectServerRequests.INSTANCE = null;","        this._isInitialized = false;","    };","    return AutoCollectServerRequests;","}());","module.exports = AutoCollectServerRequests;",""],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":0,"15":0,"16":0,"18":1,"19":0,"23":0,"24":0,"25":0,"28":1,"29":0,"30":0,"32":0,"33":0,"35":0,"37":1,"38":0,"40":1,"41":0,"43":1,"44":0,"45":0,"47":0,"49":1,"50":0,"51":0,"52":0,"53":0,"55":0,"57":0,"58":0,"59":0,"60":0,"62":0,"64":0,"65":0,"70":0,"71":0,"72":0,"74":0,"75":0,"76":0,"77":0,"78":0,"80":0,"81":0,"90":1,"91":0,"92":0,"93":0,"95":0,"97":0,"98":0,"100":0,"101":0,"102":0,"103":0,"105":0,"110":1,"111":0,"112":0,"113":0,"116":0,"117":0,"118":0,"119":0,"122":0,"123":0,"124":0,"125":0,"128":0,"129":0,"130":0,"134":0,"135":0,"136":0,"143":1,"144":0,"148":0,"151":1,"152":0,"153":0,"156":0,"158":0,"159":0,"160":0,"161":0,"163":1,"164":0,"165":0,"167":1,"169":1}},"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/AutoCollection/ServerRequestParser.js":{"path":"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/AutoCollection/ServerRequestParser.js","s":{"1":1,"2":1,"3":0,"4":0,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":1,"32":0,"33":1,"34":0,"35":0,"36":0,"37":1,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":1,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":1,"64":0,"65":1,"66":0,"67":1,"68":0,"69":1,"70":0,"71":1,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":1,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":1,"91":0,"92":0,"93":0,"94":1,"95":0,"96":1,"97":1,"98":1},"b":{"1":[1,1,1],"2":[0,0],"3":[0,1],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0,0,0,0,0],"28":[0,0],"29":[0,0,0,0],"30":[0,0,0,0,0]},"f":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},"fnMap":{"1":{"name":"(anonymous_1)","line":3,"loc":{"start":{"line":3,"column":44},"end":{"line":3,"column":60}}},"2":{"name":"__","line":5,"loc":{"start":{"line":5,"column":4},"end":{"line":5,"column":18}}},"3":{"name":"(anonymous_3)","line":16,"loc":{"start":{"line":16,"column":27},"end":{"line":16,"column":45}}},"4":{"name":"ServerRequestParser","line":18,"loc":{"start":{"line":18,"column":4},"end":{"line":18,"column":53}}},"5":{"name":"(anonymous_5)","line":40,"loc":{"start":{"line":40,"column":44},"end":{"line":40,"column":95}}},"6":{"name":"(anonymous_6)","line":43,"loc":{"start":{"line":43,"column":47},"end":{"line":43,"column":101}}},"7":{"name":"(anonymous_7)","line":49,"loc":{"start":{"line":49,"column":51},"end":{"line":49,"column":63}}},"8":{"name":"(anonymous_8)","line":64,"loc":{"start":{"line":64,"column":51},"end":{"line":64,"column":67}}},"9":{"name":"(anonymous_9)","line":80,"loc":{"start":{"line":80,"column":51},"end":{"line":80,"column":67}}},"10":{"name":"(anonymous_10)","line":83,"loc":{"start":{"line":83,"column":57},"end":{"line":83,"column":73}}},"11":{"name":"(anonymous_11)","line":86,"loc":{"start":{"line":86,"column":53},"end":{"line":86,"column":69}}},"12":{"name":"(anonymous_12)","line":89,"loc":{"start":{"line":89,"column":49},"end":{"line":89,"column":61}}},"13":{"name":"(anonymous_13)","line":92,"loc":{"start":{"line":92,"column":52},"end":{"line":92,"column":71}}},"14":{"name":"(anonymous_14)","line":108,"loc":{"start":{"line":108,"column":43},"end":{"line":108,"column":55}}},"15":{"name":"(anonymous_15)","line":112,"loc":{"start":{"line":112,"column":20},"end":{"line":112,"column":35}}},"16":{"name":"(anonymous_16)","line":133,"loc":{"start":{"line":133,"column":43},"end":{"line":133,"column":59}}},"17":{"name":"(anonymous_17)","line":139,"loc":{"start":{"line":139,"column":34},"end":{"line":139,"column":57}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":7,"column":2}},"2":{"start":{"line":4,"column":4},"end":{"line":4,"column":58}},"3":{"start":{"line":4,"column":21},"end":{"line":4,"column":58}},"4":{"start":{"line":4,"column":46},"end":{"line":4,"column":58}},"5":{"start":{"line":5,"column":4},"end":{"line":5,"column":43}},"6":{"start":{"line":5,"column":20},"end":{"line":5,"column":41}},"7":{"start":{"line":6,"column":4},"end":{"line":6,"column":89}},"8":{"start":{"line":8,"column":0},"end":{"line":8,"column":25}},"9":{"start":{"line":9,"column":0},"end":{"line":9,"column":54}},"10":{"start":{"line":10,"column":0},"end":{"line":10,"column":38}},"11":{"start":{"line":11,"column":0},"end":{"line":11,"column":74}},"12":{"start":{"line":12,"column":0},"end":{"line":12,"column":47}},"13":{"start":{"line":16,"column":0},"end":{"line":144,"column":18}},"14":{"start":{"line":17,"column":4},"end":{"line":17,"column":43}},"15":{"start":{"line":18,"column":4},"end":{"line":39,"column":5}},"16":{"start":{"line":19,"column":8},"end":{"line":19,"column":26}},"17":{"start":{"line":20,"column":8},"end":{"line":38,"column":9}},"18":{"start":{"line":21,"column":12},"end":{"line":21,"column":57}},"19":{"start":{"line":22,"column":12},"end":{"line":22,"column":41}},"20":{"start":{"line":23,"column":12},"end":{"line":23,"column":53}},"21":{"start":{"line":24,"column":12},"end":{"line":24,"column":41}},"22":{"start":{"line":25,"column":12},"end":{"line":25,"column":68}},"23":{"start":{"line":26,"column":12},"end":{"line":26,"column":86}},"24":{"start":{"line":27,"column":12},"end":{"line":27,"column":78}},"25":{"start":{"line":28,"column":12},"end":{"line":29,"column":106}},"26":{"start":{"line":30,"column":12},"end":{"line":31,"column":90}},"27":{"start":{"line":32,"column":12},"end":{"line":33,"column":88}},"28":{"start":{"line":34,"column":12},"end":{"line":37,"column":13}},"29":{"start":{"line":35,"column":16},"end":{"line":35,"column":80}},"30":{"start":{"line":36,"column":16},"end":{"line":36,"column":124}},"31":{"start":{"line":40,"column":4},"end":{"line":42,"column":6}},"32":{"start":{"line":41,"column":8},"end":{"line":41,"column":54}},"33":{"start":{"line":43,"column":4},"end":{"line":48,"column":6}},"34":{"start":{"line":44,"column":8},"end":{"line":44,"column":68}},"35":{"start":{"line":45,"column":8},"end":{"line":47,"column":9}},"36":{"start":{"line":46,"column":12},"end":{"line":46,"column":49}},"37":{"start":{"line":49,"column":4},"end":{"line":63,"column":6}},"38":{"start":{"line":50,"column":8},"end":{"line":50,"column":70}},"39":{"start":{"line":51,"column":8},"end":{"line":51,"column":40}},"40":{"start":{"line":52,"column":8},"end":{"line":52,"column":76}},"41":{"start":{"line":53,"column":8},"end":{"line":53,"column":35}},"42":{"start":{"line":54,"column":8},"end":{"line":54,"column":49}},"43":{"start":{"line":55,"column":8},"end":{"line":55,"column":64}},"44":{"start":{"line":56,"column":8},"end":{"line":56,"column":87}},"45":{"start":{"line":57,"column":8},"end":{"line":57,"column":48}},"46":{"start":{"line":58,"column":8},"end":{"line":58,"column":49}},"47":{"start":{"line":59,"column":8},"end":{"line":59,"column":56}},"48":{"start":{"line":60,"column":8},"end":{"line":60,"column":68}},"49":{"start":{"line":61,"column":8},"end":{"line":61,"column":36}},"50":{"start":{"line":62,"column":8},"end":{"line":62,"column":20}},"51":{"start":{"line":64,"column":4},"end":{"line":79,"column":6}},"52":{"start":{"line":66,"column":8},"end":{"line":66,"column":25}},"53":{"start":{"line":67,"column":8},"end":{"line":69,"column":9}},"54":{"start":{"line":68,"column":12},"end":{"line":68,"column":37}},"55":{"start":{"line":71,"column":8},"end":{"line":71,"column":114}},"56":{"start":{"line":72,"column":8},"end":{"line":72,"column":124}},"57":{"start":{"line":73,"column":8},"end":{"line":73,"column":115}},"58":{"start":{"line":74,"column":8},"end":{"line":74,"column":113}},"59":{"start":{"line":75,"column":8},"end":{"line":75,"column":86}},"60":{"start":{"line":76,"column":8},"end":{"line":76,"column":94}},"61":{"start":{"line":77,"column":8},"end":{"line":77,"column":82}},"62":{"start":{"line":78,"column":8},"end":{"line":78,"column":23}},"63":{"start":{"line":80,"column":4},"end":{"line":82,"column":6}},"64":{"start":{"line":81,"column":8},"end":{"line":81,"column":78}},"65":{"start":{"line":83,"column":4},"end":{"line":85,"column":6}},"66":{"start":{"line":84,"column":8},"end":{"line":84,"column":110}},"67":{"start":{"line":86,"column":4},"end":{"line":88,"column":6}},"68":{"start":{"line":87,"column":8},"end":{"line":87,"column":112}},"69":{"start":{"line":89,"column":4},"end":{"line":91,"column":6}},"70":{"start":{"line":90,"column":8},"end":{"line":90,"column":30}},"71":{"start":{"line":92,"column":4},"end":{"line":107,"column":6}},"72":{"start":{"line":93,"column":8},"end":{"line":95,"column":9}},"73":{"start":{"line":94,"column":12},"end":{"line":94,"column":31}},"74":{"start":{"line":96,"column":8},"end":{"line":96,"column":81}},"75":{"start":{"line":97,"column":8},"end":{"line":97,"column":48}},"76":{"start":{"line":98,"column":8},"end":{"line":98,"column":43}},"77":{"start":{"line":99,"column":8},"end":{"line":99,"column":39}},"78":{"start":{"line":100,"column":8},"end":{"line":105,"column":11}},"79":{"start":{"line":106,"column":8},"end":{"line":106,"column":27}},"80":{"start":{"line":108,"column":4},"end":{"line":132,"column":6}},"81":{"start":{"line":111,"column":8},"end":{"line":111,"column":71}},"82":{"start":{"line":112,"column":8},"end":{"line":117,"column":10}},"83":{"start":{"line":113,"column":12},"end":{"line":113,"column":44}},"84":{"start":{"line":114,"column":12},"end":{"line":116,"column":13}},"85":{"start":{"line":115,"column":16},"end":{"line":115,"column":34}},"86":{"start":{"line":118,"column":8},"end":{"line":123,"column":53}},"87":{"start":{"line":125,"column":8},"end":{"line":130,"column":9}},"88":{"start":{"line":129,"column":12},"end":{"line":129,"column":29}},"89":{"start":{"line":131,"column":8},"end":{"line":131,"column":18}},"90":{"start":{"line":133,"column":4},"end":{"line":138,"column":6}},"91":{"start":{"line":134,"column":8},"end":{"line":135,"column":94}},"92":{"start":{"line":136,"column":8},"end":{"line":136,"column":78}},"93":{"start":{"line":137,"column":8},"end":{"line":137,"column":21}},"94":{"start":{"line":139,"column":4},"end":{"line":141,"column":6}},"95":{"start":{"line":140,"column":8},"end":{"line":140,"column":63}},"96":{"start":{"line":142,"column":4},"end":{"line":142,"column":78}},"97":{"start":{"line":143,"column":4},"end":{"line":143,"column":31}},"98":{"start":{"line":145,"column":0},"end":{"line":145,"column":37}}},"branchMap":{"1":{"line":3,"type":"binary-expr","locations":[{"start":{"line":3,"column":17},"end":{"line":3,"column":21}},{"start":{"line":3,"column":25},"end":{"line":3,"column":39}},{"start":{"line":3,"column":44},"end":{"line":7,"column":1}}]},"2":{"line":4,"type":"if","locations":[{"start":{"line":4,"column":21},"end":{"line":4,"column":21}},{"start":{"line":4,"column":21},"end":{"line":4,"column":21}}]},"3":{"line":6,"type":"cond-expr","locations":[{"start":{"line":6,"column":31},"end":{"line":6,"column":47}},{"start":{"line":6,"column":51},"end":{"line":6,"column":87}}]},"4":{"line":20,"type":"if","locations":[{"start":{"line":20,"column":8},"end":{"line":20,"column":8}},{"start":{"line":20,"column":8},"end":{"line":20,"column":8}}]},"5":{"line":21,"type":"binary-expr","locations":[{"start":{"line":21,"column":29},"end":{"line":21,"column":38}},{"start":{"line":21,"column":42},"end":{"line":21,"column":56}}]},"6":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":30},"end":{"line":25,"column":45}},{"start":{"line":25,"column":49},"end":{"line":25,"column":67}}]},"7":{"line":26,"type":"binary-expr","locations":[{"start":{"line":26,"column":39},"end":{"line":26,"column":53}},{"start":{"line":26,"column":57},"end":{"line":26,"column":85}}]},"8":{"line":27,"type":"binary-expr","locations":[{"start":{"line":27,"column":29},"end":{"line":27,"column":44}},{"start":{"line":27,"column":48},"end":{"line":27,"column":77}}]},"9":{"line":29,"type":"binary-expr","locations":[{"start":{"line":29,"column":16},"end":{"line":29,"column":31}},{"start":{"line":29,"column":35},"end":{"line":29,"column":105}}]},"10":{"line":31,"type":"binary-expr","locations":[{"start":{"line":31,"column":16},"end":{"line":31,"column":31}},{"start":{"line":31,"column":35},"end":{"line":31,"column":89}}]},"11":{"line":33,"type":"binary-expr","locations":[{"start":{"line":33,"column":16},"end":{"line":33,"column":31}},{"start":{"line":33,"column":35},"end":{"line":33,"column":87}}]},"12":{"line":34,"type":"if","locations":[{"start":{"line":34,"column":12},"end":{"line":34,"column":12}},{"start":{"line":34,"column":12},"end":{"line":34,"column":12}}]},"13":{"line":36,"type":"binary-expr","locations":[{"start":{"line":36,"column":49},"end":{"line":36,"column":77}},{"start":{"line":36,"column":81},"end":{"line":36,"column":123}}]},"14":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":8},"end":{"line":45,"column":8}},{"start":{"line":45,"column":8},"end":{"line":45,"column":8}}]},"15":{"line":56,"type":"cond-expr","locations":[{"start":{"line":56,"column":53},"end":{"line":56,"column":79}},{"start":{"line":56,"column":82},"end":{"line":56,"column":86}}]},"16":{"line":71,"type":"binary-expr","locations":[{"start":{"line":71,"column":55},"end":{"line":71,"column":96}},{"start":{"line":71,"column":100},"end":{"line":71,"column":113}}]},"17":{"line":72,"type":"binary-expr","locations":[{"start":{"line":72,"column":54},"end":{"line":72,"column":94}},{"start":{"line":72,"column":98},"end":{"line":72,"column":123}}]},"18":{"line":73,"type":"binary-expr","locations":[{"start":{"line":73,"column":51},"end":{"line":73,"column":88}},{"start":{"line":73,"column":92},"end":{"line":73,"column":114}}]},"19":{"line":74,"type":"binary-expr","locations":[{"start":{"line":74,"column":54},"end":{"line":74,"column":94}},{"start":{"line":74,"column":98},"end":{"line":74,"column":112}}]},"20":{"line":81,"type":"binary-expr","locations":[{"start":{"line":81,"column":15},"end":{"line":81,"column":57}},{"start":{"line":81,"column":61},"end":{"line":81,"column":77}}]},"21":{"line":84,"type":"binary-expr","locations":[{"start":{"line":84,"column":15},"end":{"line":84,"column":63}},{"start":{"line":84,"column":67},"end":{"line":84,"column":80}},{"start":{"line":84,"column":84},"end":{"line":84,"column":109}}]},"22":{"line":87,"type":"binary-expr","locations":[{"start":{"line":87,"column":15},"end":{"line":87,"column":59}},{"start":{"line":87,"column":63},"end":{"line":87,"column":111}}]},"23":{"line":93,"type":"if","locations":[{"start":{"line":93,"column":8},"end":{"line":93,"column":8}},{"start":{"line":93,"column":8},"end":{"line":93,"column":8}}]},"24":{"line":96,"type":"cond-expr","locations":[{"start":{"line":96,"column":45},"end":{"line":96,"column":73}},{"start":{"line":96,"column":76},"end":{"line":96,"column":80}}]},"25":{"line":101,"type":"cond-expr","locations":[{"start":{"line":101,"column":34},"end":{"line":101,"column":41}},{"start":{"line":101,"column":44},"end":{"line":101,"column":50}}]},"26":{"line":114,"type":"if","locations":[{"start":{"line":114,"column":12},"end":{"line":114,"column":12}},{"start":{"line":114,"column":12},"end":{"line":114,"column":12}}]},"27":{"line":118,"type":"binary-expr","locations":[{"start":{"line":118,"column":17},"end":{"line":118,"column":58}},{"start":{"line":119,"column":15},"end":{"line":119,"column":52}},{"start":{"line":120,"column":15},"end":{"line":120,"column":50}},{"start":{"line":121,"column":15},"end":{"line":121,"column":50}},{"start":{"line":122,"column":15},"end":{"line":122,"column":46}},{"start":{"line":123,"column":15},"end":{"line":123,"column":52}}]},"28":{"line":125,"type":"if","locations":[{"start":{"line":125,"column":8},"end":{"line":125,"column":8}},{"start":{"line":125,"column":8},"end":{"line":125,"column":8}}]},"29":{"line":125,"type":"binary-expr","locations":[{"start":{"line":125,"column":12},"end":{"line":125,"column":15}},{"start":{"line":126,"column":15},"end":{"line":126,"column":43}},{"start":{"line":127,"column":15},"end":{"line":127,"column":50}},{"start":{"line":128,"column":15},"end":{"line":128,"column":65}}]},"30":{"line":134,"type":"binary-expr","locations":[{"start":{"line":134,"column":22},"end":{"line":134,"column":37}},{"start":{"line":134,"column":41},"end":{"line":134,"column":66}},{"start":{"line":135,"column":12},"end":{"line":135,"column":57}},{"start":{"line":135,"column":61},"end":{"line":135,"column":86}},{"start":{"line":135,"column":91},"end":{"line":135,"column":93}}]}},"code":["///<reference path=\"..\\typings\\globals\\node\\index.d.ts\" />","\"use strict\";","var __extends = (this && this.__extends) || function (d, b) {","    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];","    function __() { this.constructor = d; }","    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());","};","var url = require(\"url\");","var ContractsModule = require(\"../Library/Contracts\");","var Util = require(\"../Library/Util\");","var RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");","var RequestParser = require(\"./RequestParser\");","/**"," * Helper class to read data from the requst/response objects and convert them into the telemetry contract"," */","var ServerRequestParser = (function (_super) {","    __extends(ServerRequestParser, _super);","    function ServerRequestParser(request, requestId) {","        _super.call(this);","        if (request) {","            this.requestId = requestId || Util.newGuid();","            this.method = request.method;","            this.url = this._getAbsoluteUrl(request);","            this.startTime = +new Date();","            this.rawHeaders = request.headers || request.rawHeaders;","            this.socketRemoteAddress = request.socket && request.socket.remoteAddress;","            this.userAgent = request.headers && request.headers[\"user-agent\"];","            this.sourceIKeyHash =","                request.headers && request.headers[RequestResponseHeaders.sourceInstrumentationKeyHeader];","            this.parentId =","                request.headers && request.headers[RequestResponseHeaders.parentIdHeader];","            this.operationId =","                request.headers && request.headers[RequestResponseHeaders.rootIdHeader];","            if (request.connection) {","                this.connectionRemoteAddress = request.connection.remoteAddress;","                this.legacySocketRemoteAddress = request.connection[\"socket\"] && request.connection[\"socket\"].remoteAddress;","            }","        }","    }","    ServerRequestParser.prototype.onError = function (error, properties, ellapsedMilliseconds) {","        this._setStatus(undefined, error, properties);","    };","    ServerRequestParser.prototype.onResponse = function (response, properties, ellapsedMilliseconds) {","        this._setStatus(response.statusCode, undefined, properties);","        if (ellapsedMilliseconds) {","            this.duration = ellapsedMilliseconds;","        }","    };","    ServerRequestParser.prototype.getRequestData = function () {","        var requestData = new ContractsModule.Contracts.RequestData();","        requestData.id = this.requestId;","        requestData.name = this.method + \" \" + url.parse(this.url).pathname;","        requestData.url = this.url;","        requestData.source = this.sourceIKeyHash;","        requestData.duration = Util.msToTimeSpan(this.duration);","        requestData.responseCode = this.statusCode ? this.statusCode.toString() : null;","        requestData.success = this._isSuccess();","        requestData.properties = this.properties;","        var data = new ContractsModule.Contracts.Data();","        data.baseType = \"Microsoft.ApplicationInsights.RequestData\";","        data.baseData = requestData;","        return data;","    };","    ServerRequestParser.prototype.getRequestTags = function (tags) {","        // create a copy of the context for requests since client info will be used here","        var newTags = {};","        for (var key in tags) {","            newTags[key] = tags[key];","        }","        // don't override tags if they are already set","        newTags[ServerRequestParser.keys.locationIp] = tags[ServerRequestParser.keys.locationIp] || this._getIp();","        newTags[ServerRequestParser.keys.sessionId] = tags[ServerRequestParser.keys.sessionId] || this._getId(\"ai_session\");","        newTags[ServerRequestParser.keys.userId] = tags[ServerRequestParser.keys.userId] || this._getId(\"ai_user\");","        newTags[ServerRequestParser.keys.userAgent] = tags[ServerRequestParser.keys.userAgent] || this.userAgent;","        newTags[ServerRequestParser.keys.operationName] = this.getOperationName(tags);","        newTags[ServerRequestParser.keys.operationParentId] = this.getOperationParentId(tags);","        newTags[ServerRequestParser.keys.operationId] = this.getOperationId(tags);","        return newTags;","    };","    ServerRequestParser.prototype.getOperationId = function (tags) {","        return tags[ServerRequestParser.keys.operationId] || this.operationId;","    };","    ServerRequestParser.prototype.getOperationParentId = function (tags) {","        return tags[ServerRequestParser.keys.operationParentId] || this.parentId || this.getOperationId(tags);","    };","    ServerRequestParser.prototype.getOperationName = function (tags) {","        return tags[ServerRequestParser.keys.operationName] || this.method + \" \" + url.parse(this.url).pathname;","    };","    ServerRequestParser.prototype.getRequestId = function () {","        return this.requestId;","    };","    ServerRequestParser.prototype._getAbsoluteUrl = function (request) {","        if (!request.headers) {","            return request.url;","        }","        var encrypted = request.connection ? request.connection.encrypted : null;","        var requestUrl = url.parse(request.url);","        var pathName = requestUrl.pathname;","        var search = requestUrl.search;","        var absoluteUrl = url.format({","            protocol: encrypted ? \"https\" : \"http\",","            host: request.headers.host,","            pathname: pathName,","            search: search","        });","        return absoluteUrl;","    };","    ServerRequestParser.prototype._getIp = function () {","        // regex to match ipv4 without port","        // Note: including the port would cause the payload to be rejected by the data collector","        var ipMatch = /[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}/;","        var check = function (str) {","            var results = ipMatch.exec(str);","            if (results) {","                return results[0];","            }","        };","        var ip = check(this.rawHeaders[\"x-forwarded-for\"])","            || check(this.rawHeaders[\"x-client-ip\"])","            || check(this.rawHeaders[\"x-real-ip\"])","            || check(this.connectionRemoteAddress)","            || check(this.socketRemoteAddress)","            || check(this.legacySocketRemoteAddress);","        // node v12 returns this if the address is \"localhost\"","        if (!ip","            && this.connectionRemoteAddress","            && this.connectionRemoteAddress.substr","            && this.connectionRemoteAddress.substr(0, 2) === \"::\") {","            ip = \"127.0.0.1\";","        }","        return ip;","    };","    ServerRequestParser.prototype._getId = function (name) {","        var cookie = (this.rawHeaders && this.rawHeaders[\"cookie\"] &&","            typeof this.rawHeaders[\"cookie\"] === 'string' && this.rawHeaders[\"cookie\"]) || \"\";","        var value = ServerRequestParser.parseId(Util.getCookie(name, cookie));","        return value;","    };","    ServerRequestParser.parseId = function (cookieValue) {","        return cookieValue.substr(0, cookieValue.indexOf('|'));","    };","    ServerRequestParser.keys = new ContractsModule.Contracts.ContextTagKeys();","    return ServerRequestParser;","}(RequestParser));","module.exports = ServerRequestParser;",""],"l":{"3":1,"4":1,"5":1,"6":1,"8":1,"9":1,"10":1,"11":1,"12":1,"16":1,"17":1,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"30":0,"32":0,"34":0,"35":0,"36":0,"40":1,"41":0,"43":1,"44":0,"45":0,"46":0,"49":1,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"64":1,"66":0,"67":0,"68":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"80":1,"81":0,"83":1,"84":0,"86":1,"87":0,"89":1,"90":0,"92":1,"93":0,"94":0,"96":0,"97":0,"98":0,"99":0,"100":0,"106":0,"108":1,"111":0,"112":0,"113":0,"114":0,"115":0,"118":0,"125":0,"129":0,"131":0,"133":1,"134":0,"136":0,"137":0,"139":1,"140":0,"142":1,"143":1,"145":1}},"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/Library/Client.js":{"path":"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/Library/Client.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":1,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":1,"47":0,"48":0,"49":0,"50":0,"51":1,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":1,"69":0,"70":1,"71":0,"72":1,"73":0,"74":1,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":1,"96":0,"97":1,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":1,"116":0,"117":0,"118":0,"119":0,"120":1,"121":0,"122":1,"123":0,"124":1,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":1,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":1,"156":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0]},"f":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0},"fnMap":{"1":{"name":"(anonymous_1)","line":15,"loc":{"start":{"line":15,"column":14},"end":{"line":15,"column":26}}},"2":{"name":"Client","line":20,"loc":{"start":{"line":20,"column":4},"end":{"line":20,"column":26}}},"3":{"name":"(anonymous_3)","line":26,"loc":{"start":{"line":26,"column":32},"end":{"line":26,"column":44}}},"4":{"name":"(anonymous_4)","line":27,"loc":{"start":{"line":27,"column":35},"end":{"line":27,"column":47}}},"5":{"name":"(anonymous_5)","line":27,"loc":{"start":{"line":27,"column":86},"end":{"line":27,"column":98}}},"6":{"name":"(anonymous_6)","line":27,"loc":{"start":{"line":27,"column":131},"end":{"line":27,"column":143}}},"7":{"name":"(anonymous_7)","line":35,"loc":{"start":{"line":35,"column":34},"end":{"line":35,"column":76}}},"8":{"name":"(anonymous_8)","line":50,"loc":{"start":{"line":50,"column":34},"end":{"line":50,"column":80}}},"9":{"name":"(anonymous_9)","line":71,"loc":{"start":{"line":71,"column":38},"end":{"line":71,"column":85}}},"10":{"name":"(anonymous_10)","line":90,"loc":{"start":{"line":90,"column":35},"end":{"line":90,"column":95}}},"11":{"name":"(anonymous_11)","line":108,"loc":{"start":{"line":108,"column":40},"end":{"line":108,"column":110}}},"12":{"name":"(anonymous_12)","line":111,"loc":{"start":{"line":111,"column":36},"end":{"line":111,"column":77}}},"13":{"name":"(anonymous_13)","line":114,"loc":{"start":{"line":114,"column":46},"end":{"line":114,"column":93}}},"14":{"name":"(anonymous_14)","line":117,"loc":{"start":{"line":117,"column":39},"end":{"line":117,"column":139}}},"15":{"name":"(anonymous_15)","line":140,"loc":{"start":{"line":140,"column":39},"end":{"line":140,"column":59}}},"16":{"name":"(anonymous_16)","line":143,"loc":{"start":{"line":143,"column":35},"end":{"line":143,"column":65}}},"17":{"name":"(anonymous_17)","line":182,"loc":{"start":{"line":182,"column":29},"end":{"line":182,"column":75}}},"18":{"name":"(anonymous_18)","line":195,"loc":{"start":{"line":195,"column":45},"end":{"line":195,"column":75}}},"19":{"name":"(anonymous_19)","line":201,"loc":{"start":{"line":201,"column":48},"end":{"line":201,"column":60}}},"20":{"name":"(anonymous_20)","line":204,"loc":{"start":{"line":204,"column":46},"end":{"line":204,"column":82}}},"21":{"name":"(anonymous_21)","line":229,"loc":{"start":{"line":229,"column":31},"end":{"line":229,"column":55}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":25}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":33}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":35}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":64}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":54}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":35}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":72}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":72}},"9":{"start":{"line":11,"column":0},"end":{"line":11,"column":89}},"10":{"start":{"line":12,"column":0},"end":{"line":12,"column":33}},"11":{"start":{"line":13,"column":0},"end":{"line":13,"column":29}},"12":{"start":{"line":14,"column":0},"end":{"line":14,"column":35}},"13":{"start":{"line":15,"column":0},"end":{"line":252,"column":5}},"14":{"start":{"line":20,"column":4},"end":{"line":28,"column":5}},"15":{"start":{"line":21,"column":8},"end":{"line":21,"column":39}},"16":{"start":{"line":22,"column":8},"end":{"line":22,"column":38}},"17":{"start":{"line":23,"column":8},"end":{"line":23,"column":29}},"18":{"start":{"line":24,"column":8},"end":{"line":24,"column":37}},"19":{"start":{"line":25,"column":8},"end":{"line":25,"column":35}},"20":{"start":{"line":26,"column":8},"end":{"line":26,"column":76}},"21":{"start":{"line":26,"column":46},"end":{"line":26,"column":72}},"22":{"start":{"line":27,"column":8},"end":{"line":27,"column":190}},"23":{"start":{"line":27,"column":49},"end":{"line":27,"column":82}},"24":{"start":{"line":27,"column":100},"end":{"line":27,"column":127}},"25":{"start":{"line":27,"column":145},"end":{"line":27,"column":178}},"26":{"start":{"line":35,"column":4},"end":{"line":44,"column":6}},"27":{"start":{"line":36,"column":8},"end":{"line":36,"column":62}},"28":{"start":{"line":37,"column":8},"end":{"line":37,"column":26}},"29":{"start":{"line":38,"column":8},"end":{"line":38,"column":38}},"30":{"start":{"line":39,"column":8},"end":{"line":39,"column":42}},"31":{"start":{"line":40,"column":8},"end":{"line":40,"column":56}},"32":{"start":{"line":41,"column":8},"end":{"line":41,"column":36}},"33":{"start":{"line":42,"column":8},"end":{"line":42,"column":30}},"34":{"start":{"line":43,"column":8},"end":{"line":43,"column":25}},"35":{"start":{"line":50,"column":4},"end":{"line":64,"column":6}},"36":{"start":{"line":51,"column":8},"end":{"line":51,"column":64}},"37":{"start":{"line":52,"column":8},"end":{"line":52,"column":32}},"38":{"start":{"line":53,"column":8},"end":{"line":53,"column":38}},"39":{"start":{"line":54,"column":8},"end":{"line":59,"column":9}},"40":{"start":{"line":55,"column":12},"end":{"line":55,"column":48}},"41":{"start":{"line":58,"column":12},"end":{"line":58,"column":86}},"42":{"start":{"line":60,"column":8},"end":{"line":60,"column":56}},"43":{"start":{"line":61,"column":8},"end":{"line":61,"column":38}},"44":{"start":{"line":62,"column":8},"end":{"line":62,"column":30}},"45":{"start":{"line":63,"column":8},"end":{"line":63,"column":25}},"46":{"start":{"line":71,"column":4},"end":{"line":77,"column":6}},"47":{"start":{"line":72,"column":8},"end":{"line":74,"column":9}},"48":{"start":{"line":73,"column":12},"end":{"line":73,"column":45}},"49":{"start":{"line":75,"column":8},"end":{"line":75,"column":97}},"50":{"start":{"line":76,"column":8},"end":{"line":76,"column":25}},"51":{"start":{"line":90,"column":4},"end":{"line":107,"column":6}},"52":{"start":{"line":91,"column":8},"end":{"line":91,"column":65}},"53":{"start":{"line":92,"column":8},"end":{"line":92,"column":29}},"54":{"start":{"line":93,"column":8},"end":{"line":93,"column":63}},"55":{"start":{"line":94,"column":8},"end":{"line":94,"column":49}},"56":{"start":{"line":95,"column":8},"end":{"line":95,"column":74}},"57":{"start":{"line":96,"column":8},"end":{"line":96,"column":47}},"58":{"start":{"line":97,"column":8},"end":{"line":97,"column":47}},"59":{"start":{"line":98,"column":8},"end":{"line":98,"column":27}},"60":{"start":{"line":99,"column":8},"end":{"line":99,"column":52}},"61":{"start":{"line":100,"column":8},"end":{"line":100,"column":29}},"62":{"start":{"line":101,"column":8},"end":{"line":101,"column":37}},"63":{"start":{"line":102,"column":8},"end":{"line":102,"column":40}},"64":{"start":{"line":103,"column":8},"end":{"line":103,"column":56}},"65":{"start":{"line":104,"column":8},"end":{"line":104,"column":37}},"66":{"start":{"line":105,"column":8},"end":{"line":105,"column":32}},"67":{"start":{"line":106,"column":8},"end":{"line":106,"column":25}},"68":{"start":{"line":108,"column":4},"end":{"line":110,"column":6}},"69":{"start":{"line":109,"column":8},"end":{"line":109,"column":113}},"70":{"start":{"line":111,"column":4},"end":{"line":113,"column":6}},"71":{"start":{"line":112,"column":8},"end":{"line":112,"column":80}},"72":{"start":{"line":114,"column":4},"end":{"line":116,"column":6}},"73":{"start":{"line":115,"column":8},"end":{"line":115,"column":86}},"74":{"start":{"line":117,"column":4},"end":{"line":136,"column":6}},"75":{"start":{"line":118,"column":8},"end":{"line":118,"column":55}},"76":{"start":{"line":118,"column":37},"end":{"line":118,"column":53}},"77":{"start":{"line":119,"column":8},"end":{"line":119,"column":48}},"78":{"start":{"line":119,"column":32},"end":{"line":119,"column":46}},"79":{"start":{"line":120,"column":8},"end":{"line":120,"column":49}},"80":{"start":{"line":120,"column":33},"end":{"line":120,"column":47}},"81":{"start":{"line":121,"column":8},"end":{"line":123,"column":9}},"82":{"start":{"line":122,"column":12},"end":{"line":122,"column":49}},"83":{"start":{"line":124,"column":8},"end":{"line":124,"column":84}},"84":{"start":{"line":125,"column":8},"end":{"line":125,"column":37}},"85":{"start":{"line":126,"column":8},"end":{"line":126,"column":44}},"86":{"start":{"line":127,"column":8},"end":{"line":127,"column":41}},"87":{"start":{"line":128,"column":8},"end":{"line":128,"column":69}},"88":{"start":{"line":129,"column":8},"end":{"line":129,"column":43}},"89":{"start":{"line":130,"column":8},"end":{"line":130,"column":51}},"90":{"start":{"line":131,"column":8},"end":{"line":131,"column":49}},"91":{"start":{"line":132,"column":8},"end":{"line":132,"column":56}},"92":{"start":{"line":133,"column":8},"end":{"line":133,"column":47}},"93":{"start":{"line":134,"column":8},"end":{"line":134,"column":41}},"94":{"start":{"line":135,"column":8},"end":{"line":135,"column":25}},"95":{"start":{"line":140,"column":4},"end":{"line":142,"column":6}},"96":{"start":{"line":141,"column":8},"end":{"line":141,"column":50}},"97":{"start":{"line":143,"column":4},"end":{"line":176,"column":6}},"98":{"start":{"line":144,"column":8},"end":{"line":159,"column":9}},"99":{"start":{"line":145,"column":12},"end":{"line":145,"column":34}},"100":{"start":{"line":147,"column":12},"end":{"line":158,"column":13}},"101":{"start":{"line":148,"column":16},"end":{"line":148,"column":65}},"102":{"start":{"line":152,"column":16},"end":{"line":157,"column":17}},"103":{"start":{"line":154,"column":20},"end":{"line":156,"column":21}},"104":{"start":{"line":155,"column":24},"end":{"line":155,"column":85}},"105":{"start":{"line":161,"column":8},"end":{"line":161,"column":84}},"106":{"start":{"line":162,"column":8},"end":{"line":162,"column":50}},"107":{"start":{"line":163,"column":8},"end":{"line":163,"column":64}},"108":{"start":{"line":164,"column":8},"end":{"line":164,"column":29}},"109":{"start":{"line":165,"column":8},"end":{"line":165,"column":29}},"110":{"start":{"line":167,"column":8},"end":{"line":171,"column":66}},"111":{"start":{"line":172,"column":8},"end":{"line":172,"column":51}},"112":{"start":{"line":173,"column":8},"end":{"line":173,"column":51}},"113":{"start":{"line":174,"column":8},"end":{"line":174,"column":25}},"114":{"start":{"line":175,"column":8},"end":{"line":175,"column":24}},"115":{"start":{"line":182,"column":4},"end":{"line":188,"column":6}},"116":{"start":{"line":183,"column":8},"end":{"line":183,"column":60}},"117":{"start":{"line":184,"column":8},"end":{"line":184,"column":77}},"118":{"start":{"line":185,"column":8},"end":{"line":187,"column":9}},"119":{"start":{"line":186,"column":12},"end":{"line":186,"column":40}},"120":{"start":{"line":195,"column":4},"end":{"line":197,"column":6}},"121":{"start":{"line":196,"column":8},"end":{"line":196,"column":59}},"122":{"start":{"line":201,"column":4},"end":{"line":203,"column":6}},"123":{"start":{"line":202,"column":8},"end":{"line":202,"column":39}},"124":{"start":{"line":204,"column":4},"end":{"line":228,"column":6}},"125":{"start":{"line":205,"column":8},"end":{"line":205,"column":28}},"126":{"start":{"line":206,"column":8},"end":{"line":206,"column":72}},"127":{"start":{"line":207,"column":8},"end":{"line":209,"column":9}},"128":{"start":{"line":208,"column":12},"end":{"line":208,"column":28}},"129":{"start":{"line":210,"column":8},"end":{"line":210,"column":46}},"130":{"start":{"line":211,"column":8},"end":{"line":211,"column":121}},"131":{"start":{"line":212,"column":8},"end":{"line":226,"column":9}},"132":{"start":{"line":213,"column":12},"end":{"line":225,"column":13}},"133":{"start":{"line":214,"column":16},"end":{"line":214,"column":61}},"134":{"start":{"line":215,"column":16},"end":{"line":220,"column":17}},"135":{"start":{"line":216,"column":20},"end":{"line":219,"column":21}},"136":{"start":{"line":217,"column":24},"end":{"line":217,"column":41}},"137":{"start":{"line":218,"column":24},"end":{"line":218,"column":30}},"138":{"start":{"line":223,"column":16},"end":{"line":223,"column":33}},"139":{"start":{"line":224,"column":16},"end":{"line":224,"column":118}},"140":{"start":{"line":227,"column":8},"end":{"line":227,"column":24}},"141":{"start":{"line":229,"column":4},"end":{"line":250,"column":6}},"142":{"start":{"line":230,"column":8},"end":{"line":230,"column":107}},"143":{"start":{"line":233,"column":8},"end":{"line":233,"column":25}},"144":{"start":{"line":234,"column":8},"end":{"line":236,"column":9}},"145":{"start":{"line":235,"column":12},"end":{"line":235,"column":50}},"146":{"start":{"line":237,"column":8},"end":{"line":239,"column":9}},"147":{"start":{"line":238,"column":12},"end":{"line":238,"column":45}},"148":{"start":{"line":240,"column":8},"end":{"line":242,"column":9}},"149":{"start":{"line":241,"column":12},"end":{"line":241,"column":27}},"150":{"start":{"line":244,"column":8},"end":{"line":248,"column":9}},"151":{"start":{"line":245,"column":12},"end":{"line":245,"column":127}},"152":{"start":{"line":246,"column":12},"end":{"line":246,"column":133}},"153":{"start":{"line":247,"column":12},"end":{"line":247,"column":145}},"154":{"start":{"line":249,"column":8},"end":{"line":249,"column":23}},"155":{"start":{"line":251,"column":4},"end":{"line":251,"column":18}},"156":{"start":{"line":253,"column":0},"end":{"line":253,"column":24}}},"branchMap":{"1":{"line":54,"type":"if","locations":[{"start":{"line":54,"column":8},"end":{"line":54,"column":8}},{"start":{"line":54,"column":8},"end":{"line":54,"column":8}}]},"2":{"line":72,"type":"if","locations":[{"start":{"line":72,"column":8},"end":{"line":72,"column":8}},{"start":{"line":72,"column":8},"end":{"line":72,"column":8}}]},"3":{"line":94,"type":"cond-expr","locations":[{"start":{"line":94,"column":39},"end":{"line":94,"column":44}},{"start":{"line":94,"column":47},"end":{"line":94,"column":48}}]},"4":{"line":96,"type":"cond-expr","locations":[{"start":{"line":96,"column":35},"end":{"line":96,"column":38}},{"start":{"line":96,"column":41},"end":{"line":96,"column":46}}]},"5":{"line":97,"type":"cond-expr","locations":[{"start":{"line":97,"column":35},"end":{"line":97,"column":38}},{"start":{"line":97,"column":41},"end":{"line":97,"column":46}}]},"6":{"line":99,"type":"cond-expr","locations":[{"start":{"line":99,"column":41},"end":{"line":99,"column":47}},{"start":{"line":99,"column":50},"end":{"line":99,"column":51}}]},"7":{"line":118,"type":"if","locations":[{"start":{"line":118,"column":8},"end":{"line":118,"column":8}},{"start":{"line":118,"column":8},"end":{"line":118,"column":8}}]},"8":{"line":119,"type":"if","locations":[{"start":{"line":119,"column":8},"end":{"line":119,"column":8}},{"start":{"line":119,"column":8},"end":{"line":119,"column":8}}]},"9":{"line":120,"type":"if","locations":[{"start":{"line":120,"column":8},"end":{"line":120,"column":8}},{"start":{"line":120,"column":8},"end":{"line":120,"column":8}}]},"10":{"line":121,"type":"if","locations":[{"start":{"line":121,"column":8},"end":{"line":121,"column":8}},{"start":{"line":121,"column":8},"end":{"line":121,"column":8}}]},"11":{"line":121,"type":"binary-expr","locations":[{"start":{"line":121,"column":12},"end":{"line":121,"column":19}},{"start":{"line":121,"column":23},"end":{"line":121,"column":34}}]},"12":{"line":144,"type":"if","locations":[{"start":{"line":144,"column":8},"end":{"line":144,"column":8}},{"start":{"line":144,"column":8},"end":{"line":144,"column":8}}]},"13":{"line":144,"type":"binary-expr","locations":[{"start":{"line":144,"column":12},"end":{"line":144,"column":16}},{"start":{"line":144,"column":20},"end":{"line":144,"column":33}}]},"14":{"line":147,"type":"if","locations":[{"start":{"line":147,"column":12},"end":{"line":147,"column":12}},{"start":{"line":147,"column":12},"end":{"line":147,"column":12}}]},"15":{"line":154,"type":"if","locations":[{"start":{"line":154,"column":20},"end":{"line":154,"column":20}},{"start":{"line":154,"column":20},"end":{"line":154,"column":20}}]},"16":{"line":185,"type":"if","locations":[{"start":{"line":185,"column":8},"end":{"line":185,"column":8}},{"start":{"line":185,"column":8},"end":{"line":185,"column":8}}]},"17":{"line":207,"type":"if","locations":[{"start":{"line":207,"column":8},"end":{"line":207,"column":8}},{"start":{"line":207,"column":8},"end":{"line":207,"column":8}}]},"18":{"line":210,"type":"binary-expr","locations":[{"start":{"line":210,"column":25},"end":{"line":210,"column":39}},{"start":{"line":210,"column":43},"end":{"line":210,"column":45}}]},"19":{"line":215,"type":"if","locations":[{"start":{"line":215,"column":16},"end":{"line":215,"column":16}},{"start":{"line":215,"column":16},"end":{"line":215,"column":16}}]},"20":{"line":216,"type":"if","locations":[{"start":{"line":216,"column":20},"end":{"line":216,"column":20}},{"start":{"line":216,"column":20},"end":{"line":216,"column":20}}]},"21":{"line":240,"type":"if","locations":[{"start":{"line":240,"column":8},"end":{"line":240,"column":8}},{"start":{"line":240,"column":8},"end":{"line":240,"column":8}}]},"22":{"line":244,"type":"if","locations":[{"start":{"line":244,"column":8},"end":{"line":244,"column":8}},{"start":{"line":244,"column":8},"end":{"line":244,"column":8}}]},"23":{"line":245,"type":"binary-expr","locations":[{"start":{"line":245,"column":53},"end":{"line":245,"column":91}},{"start":{"line":245,"column":95},"end":{"line":245,"column":126}}]},"24":{"line":246,"type":"binary-expr","locations":[{"start":{"line":246,"column":55},"end":{"line":246,"column":95}},{"start":{"line":246,"column":99},"end":{"line":246,"column":132}}]},"25":{"line":247,"type":"binary-expr","locations":[{"start":{"line":247,"column":59},"end":{"line":247,"column":103}},{"start":{"line":247,"column":107},"end":{"line":247,"column":144}}]}},"code":["///<reference path=\"..\\typings\\globals\\node\\index.d.ts\" />","\"use strict\";","var url = require(\"url\");","var Config = require(\"./Config\");","var Context = require(\"./Context\");","var ExceptionTracking = require(\"../AutoCollection/Exceptions\");","var ContractsModule = require(\"../Library/Contracts\");","var Channel = require(\"./Channel\");","var ServerRequestTracking = require(\"../AutoCollection/ServerRequests\");","var ClientRequestTracking = require(\"../AutoCollection/ClientRequests\");","var CorrelationContextManager_1 = require(\"../AutoCollection/CorrelationContextManager\");","var Sender = require(\"./Sender\");","var Util = require(\"./Util\");","var Logging = require(\"./Logging\");","var Client = (function () {","    /**","     * Constructs a new client of the client","     * @param iKey the instrumentation key to use (read from environment variable if not specified)","     */","    function Client(iKey) {","        this._telemetryProcessors = [];","        var config = new Config(iKey);","        this.config = config;","        this.context = new Context();","        this.commonProperties = {};","        var sender = new Sender(function () { return config.endpointUrl; });","        this.channel = new Channel(function () { return config.disableAppInsights; }, function () { return config.maxBatchSize; }, function () { return config.maxBatchIntervalMs; }, sender);","    }","    /**","     * Log a user action or other occurrence.","     * @param   name    A string to identify this event in the portal.","     * @param   properties  map[string, string] - additional data used to filter events and metrics in the portal. Defaults to empty.","     * @param   measurements    map[string, number] - metrics associated with this event, displayed in Metrics Explorer on the portal. Defaults to empty.","     */","    Client.prototype.trackEvent = function (name, properties, measurements) {","        var event = new ContractsModule.Contracts.EventData();","        event.name = name;","        event.properties = properties;","        event.measurements = measurements;","        var data = new ContractsModule.Contracts.Data();","        data.baseType = \"EventData\";","        data.baseData = event;","        this.track(data);","    };","    /**","     * Log a trace message","     * @param   message    A string to identify this event in the portal.","     * @param   properties  map[string, string] - additional data used to filter events and metrics in the portal. Defaults to empty.","     */","    Client.prototype.trackTrace = function (message, severityLevel, properties) {","        var trace = new ContractsModule.Contracts.MessageData();","        trace.message = message;","        trace.properties = properties;","        if (!isNaN(severityLevel)) {","            trace.severityLevel = severityLevel;","        }","        else {","            trace.severityLevel = ContractsModule.Contracts.SeverityLevel.Information;","        }","        var data = new ContractsModule.Contracts.Data();","        data.baseType = \"MessageData\";","        data.baseData = trace;","        this.track(data);","    };","    /**","     * Log an exception you have caught.","     * @param   exception   An Error from a catch clause, or the string error message.","     * @param   properties  map[string, string] - additional data used to filter events and metrics in the portal. Defaults to empty.","     * @param   measurements    map[string, number] - metrics associated with this event, displayed in Metrics Explorer on the portal. Defaults to empty.","     */","    Client.prototype.trackException = function (exception, properties, measurements) {","        if (!Util.isError(exception)) {","            exception = new Error(exception);","        }","        var data = ExceptionTracking.getExceptionData(exception, true, properties, measurements);","        this.track(data);","    };","    /**","     * * Log a numeric value that is not associated with a specific event. Typically used to send regular reports of performance indicators.","     * To send a single measurement, use just the first two parameters. If you take measurements very frequently, you can reduce the","     * telemetry bandwidth by aggregating multiple measurements and sending the resulting average at intervals.","     *","     * @param name   A string that identifies the metric.","     * @param value  The value of the metric","     * @param count  the number of samples used to get this value","     * @param min    the min sample for this set","     * @param max    the max sample for this set","     * @param stdDev the standard deviation of the set","     */","    Client.prototype.trackMetric = function (name, value, count, min, max, stdDev, properties) {","        var metrics = new ContractsModule.Contracts.MetricData(); // todo: enable client-batching of these","        metrics.metrics = [];","        var metric = new ContractsModule.Contracts.DataPoint();","        metric.count = !isNaN(count) ? count : 1;","        metric.kind = ContractsModule.Contracts.DataPointType.Aggregation;","        metric.max = !isNaN(max) ? max : value;","        metric.min = !isNaN(min) ? min : value;","        metric.name = name;","        metric.stdDev = !isNaN(stdDev) ? stdDev : 0;","        metric.value = value;","        metrics.metrics.push(metric);","        metrics.properties = properties;","        var data = new ContractsModule.Contracts.Data();","        data.baseType = \"MetricData\";","        data.baseData = metrics;","        this.track(data);","    };","    Client.prototype.trackRequestSync = function (request, response, ellapsedMilliseconds, properties, error) {","        ServerRequestTracking.trackRequestSync(this, request, response, ellapsedMilliseconds, properties, error);","    };","    Client.prototype.trackRequest = function (request, response, properties) {","        ServerRequestTracking.trackRequest(this, request, response, properties);","    };","    Client.prototype.trackDependencyRequest = function (requestOptions, request, properties) {","        ClientRequestTracking.trackRequest(this, requestOptions, request, properties);","    };","    Client.prototype.trackDependency = function (name, commandName, elapsedTimeMs, success, dependencyTypeName, properties, async, target) {","        if (properties === void 0) { properties = {}; }","        if (async === void 0) { async = false; }","        if (target === void 0) { target = null; }","        if (!target && commandName) {","            target = url.parse(commandName).host;","        }","        var remoteDependency = new ContractsModule.Contracts.RemoteDependencyData();","        remoteDependency.name = name;","        remoteDependency.data = commandName;","        remoteDependency.target = target;","        remoteDependency.duration = Util.msToTimeSpan(elapsedTimeMs);","        remoteDependency.success = success;","        remoteDependency.type = dependencyTypeName;","        remoteDependency.properties = properties;","        var data = new ContractsModule.Contracts.Data();","        data.baseType = \"RemoteDependencyData\";","        data.baseData = remoteDependency;","        this.track(data);","    };","    /**","     * Immediately send all queued telemetry.","     */","    Client.prototype.sendPendingData = function (callback) {","        this.channel.triggerSend(false, callback);","    };","    Client.prototype.getEnvelope = function (data, tagOverrides) {","        if (data && data.baseData) {","            data.baseData.ver = 2;","            // if no properties are specified just add the common ones","            if (!data.baseData.properties) {","                data.baseData.properties = this.commonProperties;","            }","            else {","                // otherwise, check each of the common ones","                for (var name in this.commonProperties) {","                    // only override if the property `name` has not been set on this item","                    if (!data.baseData.properties[name]) {","                        data.baseData.properties[name] = this.commonProperties[name];","                    }","                }","            }","        }","        // sanitize properties","        data.baseData.properties = Util.validateStringMap(data.baseData.properties);","        var iKey = this.config.instrumentationKey;","        var envelope = new ContractsModule.Contracts.Envelope();","        envelope.data = data;","        envelope.iKey = iKey;","        // this is kind of a hack, but the envelope name is always the same as the data name sans the chars \"data\"","        envelope.name =","            \"Microsoft.ApplicationInsights.\" +","                iKey.replace(/-/g, \"\") +","                \".\" +","                data.baseType.substr(0, data.baseType.length - 4);","        envelope.tags = this.getTags(tagOverrides);","        envelope.time = (new Date()).toISOString();","        envelope.ver = 1;","        return envelope;","    };","    /**","     * Generic track method for all telemetry types","     * @param data the telemetry to send","     * @param tagOverrides the context tags to use for this telemetry which overwrite default context values","     */","    Client.prototype.track = function (data, tagOverrides, contextObjects) {","        var envelope = this.getEnvelope(data, tagOverrides);","        var accepted = this.runTelemetryProcessors(envelope, contextObjects);","        if (accepted) {","            this.channel.send(envelope);","        }","    };","    /**","     * Adds telemetry processor to the collection. Telemetry processors will be called one by one","     * before telemetry item is pushed for sending and in the order they were added.","     *","     * @param telemetryProcessor function, takes Envelope, and optional context object and returns boolean","     */","    Client.prototype.addTelemetryProcessor = function (telemetryProcessor) {","        this._telemetryProcessors.push(telemetryProcessor);","    };","    /*","     * Removes all telemetry processors","     */","    Client.prototype.clearTelemetryProcessors = function () {","        this._telemetryProcessors = [];","    };","    Client.prototype.runTelemetryProcessors = function (envelope, contextObjects) {","        var accepted = true;","        var telemetryProcessorsCount = this._telemetryProcessors.length;","        if (telemetryProcessorsCount === 0) {","            return accepted;","        }","        contextObjects = contextObjects || {};","        contextObjects['correlationContext'] = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();","        for (var i = 0; i < telemetryProcessorsCount; ++i) {","            try {","                var processor = this._telemetryProcessors[i];","                if (processor) {","                    if (processor.apply(null, [envelope, contextObjects]) === false) {","                        accepted = false;","                        break;","                    }","                }","            }","            catch (error) {","                accepted = false;","                Logging.warn(\"One of telemetry processors failed, telemetry item will not be sent.\", error, envelope);","            }","        }","        return accepted;","    };","    Client.prototype.getTags = function (tagOverrides) {","        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();","        // Make a copy of context tags so we don't alter the actual object","        // Also perform tag overriding","        var newTags = {};","        for (var key in this.context.tags) {","            newTags[key] = this.context.tags[key];","        }","        for (var key in tagOverrides) {","            newTags[key] = tagOverrides[key];","        }","        if (!correlationContext) {","            return newTags;","        }","        // Fill in internally-populated values if not already set","        if (correlationContext) {","            newTags[this.context.keys.operationId] = newTags[this.context.keys.operationId] || correlationContext.operation.id;","            newTags[this.context.keys.operationName] = newTags[this.context.keys.operationName] || correlationContext.operation.name;","            newTags[this.context.keys.operationParentId] = newTags[this.context.keys.operationParentId] || correlationContext.operation.parentId;","        }","        return newTags;","    };","    return Client;","}());","module.exports = Client;",""],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"20":1,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"35":1,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"50":1,"51":0,"52":0,"53":0,"54":0,"55":0,"58":0,"60":0,"61":0,"62":0,"63":0,"71":1,"72":0,"73":0,"75":0,"76":0,"90":1,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"108":1,"109":0,"111":1,"112":0,"114":1,"115":0,"117":1,"118":0,"119":0,"120":0,"121":0,"122":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"140":1,"141":0,"143":1,"144":0,"145":0,"147":0,"148":0,"152":0,"154":0,"155":0,"161":0,"162":0,"163":0,"164":0,"165":0,"167":0,"172":0,"173":0,"174":0,"175":0,"182":1,"183":0,"184":0,"185":0,"186":0,"195":1,"196":0,"201":1,"202":0,"204":1,"205":0,"206":0,"207":0,"208":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"223":0,"224":0,"227":0,"229":1,"230":0,"233":0,"234":0,"235":0,"237":0,"238":0,"240":0,"241":0,"244":0,"245":0,"246":0,"247":0,"249":0,"251":1,"253":1}},"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/Library/Config.js":{"path":"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/Library/Config.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":0,"17":0,"18":1,"19":0,"20":0,"21":0,"22":0,"23":1,"24":1,"25":1,"26":1,"27":1},"b":{"1":[0,0],"2":[0,0,0,0],"3":[0,0],"4":[0,0]},"f":{"1":1,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"(anonymous_1)","line":4,"loc":{"start":{"line":4,"column":14},"end":{"line":4,"column":26}}},"2":{"name":"Config","line":5,"loc":{"start":{"line":5,"column":4},"end":{"line":5,"column":40}}},"3":{"name":"(anonymous_3)","line":20,"loc":{"start":{"line":20,"column":36},"end":{"line":20,"column":48}}},"4":{"name":"(anonymous_4)","line":31,"loc":{"start":{"line":31,"column":34},"end":{"line":31,"column":51}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":31}},"2":{"start":{"line":4,"column":0},"end":{"line":43,"column":5}},"3":{"start":{"line":5,"column":4},"end":{"line":19,"column":5}},"4":{"start":{"line":6,"column":8},"end":{"line":6,"column":88}},"5":{"start":{"line":7,"column":8},"end":{"line":7,"column":91}},"6":{"start":{"line":8,"column":8},"end":{"line":8,"column":75}},"7":{"start":{"line":9,"column":8},"end":{"line":9,"column":47}},"8":{"start":{"line":10,"column":8},"end":{"line":10,"column":55}},"9":{"start":{"line":11,"column":8},"end":{"line":11,"column":32}},"10":{"start":{"line":12,"column":8},"end":{"line":12,"column":40}},"11":{"start":{"line":13,"column":8},"end":{"line":13,"column":40}},"12":{"start":{"line":14,"column":8},"end":{"line":18,"column":45}},"13":{"start":{"line":20,"column":4},"end":{"line":30,"column":6}},"14":{"start":{"line":22,"column":8},"end":{"line":25,"column":76}},"15":{"start":{"line":26,"column":8},"end":{"line":28,"column":9}},"16":{"start":{"line":27,"column":12},"end":{"line":27,"column":205}},"17":{"start":{"line":29,"column":8},"end":{"line":29,"column":20}},"18":{"start":{"line":31,"column":4},"end":{"line":36,"column":6}},"19":{"start":{"line":32,"column":8},"end":{"line":32,"column":47}},"20":{"start":{"line":33,"column":8},"end":{"line":33,"column":27}},"21":{"start":{"line":34,"column":8},"end":{"line":34,"column":43}},"22":{"start":{"line":35,"column":8},"end":{"line":35,"column":22}},"23":{"start":{"line":38,"column":4},"end":{"line":38,"column":43}},"24":{"start":{"line":40,"column":4},"end":{"line":40,"column":55}},"25":{"start":{"line":41,"column":4},"end":{"line":41,"column":63}},"26":{"start":{"line":42,"column":4},"end":{"line":42,"column":18}},"27":{"start":{"line":44,"column":0},"end":{"line":44,"column":24}}},"branchMap":{"1":{"line":6,"type":"binary-expr","locations":[{"start":{"line":6,"column":34},"end":{"line":6,"column":52}},{"start":{"line":6,"column":56},"end":{"line":6,"column":87}}]},"2":{"line":22,"type":"binary-expr","locations":[{"start":{"line":22,"column":19},"end":{"line":22,"column":47}},{"start":{"line":23,"column":15},"end":{"line":23,"column":68}},{"start":{"line":24,"column":15},"end":{"line":24,"column":50}},{"start":{"line":25,"column":15},"end":{"line":25,"column":75}}]},"3":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":8},"end":{"line":26,"column":8}},{"start":{"line":26,"column":8},"end":{"line":26,"column":8}}]},"4":{"line":26,"type":"binary-expr","locations":[{"start":{"line":26,"column":12},"end":{"line":26,"column":17}},{"start":{"line":26,"column":21},"end":{"line":26,"column":31}}]}},"code":["///<reference path=\"..\\typings\\globals\\node\\index.d.ts\" />","\"use strict\";","var crypto = require('crypto');","var Config = (function () {","    function Config(instrumentationKey) {","        this.instrumentationKey = instrumentationKey || Config._getInstrumentationKey();","        this.instrumentationKeyHash = Config._getStringHashBase64(this.instrumentationKey);","        this.endpointUrl = \"https://dc.services.visualstudio.com/v2/track\";","        this.sessionRenewalMs = 30 * 60 * 1000;","        this.sessionExpirationMs = 24 * 60 * 60 * 1000;","        this.maxBatchSize = 250;","        this.maxBatchIntervalMs = 15000;","        this.disableAppInsights = false;","        this.correlationHeaderExcludedDomains = [","            \"*.blob.core.windows.net\",","            \"*.blob.core.chinacloudapi.cn\",","            \"*.blob.core.cloudapi.de\",","            \"*.blob.core.usgovcloudapi.net\"];","    }","    Config._getInstrumentationKey = function () {","        // check for both the documented env variable and the azure-prefixed variable","        var iKey = process.env[Config.ENV_iKey]","            || process.env[Config.ENV_azurePrefix + Config.ENV_iKey]","            || process.env[Config.legacy_ENV_iKey]","            || process.env[Config.ENV_azurePrefix + Config.legacy_ENV_iKey];","        if (!iKey || iKey == \"\") {","            throw new Error(\"Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server\");","        }","        return iKey;","    };","    Config._getStringHashBase64 = function (value) {","        var hash = crypto.createHash('sha256');","        hash.update(value);","        var result = hash.digest('base64');","        return result;","    };","    // Azure adds this prefix to all environment variables","    Config.ENV_azurePrefix = \"APPSETTING_\";","    // This key is provided in the readme","    Config.ENV_iKey = \"APPINSIGHTS_INSTRUMENTATIONKEY\";","    Config.legacy_ENV_iKey = \"APPINSIGHTS_INSTRUMENTATION_KEY\";","    return Config;","}());","module.exports = Config;",""],"l":{"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"20":1,"22":0,"26":0,"27":0,"29":0,"31":1,"32":0,"33":0,"34":0,"35":0,"38":1,"40":1,"41":1,"42":1,"44":1}},"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/Library/Context.js":{"path":"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/Library/Context.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":1,"24":0,"25":0,"26":0,"27":0,"28":0,"29":1,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":1,"38":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0]},"f":{"1":1,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"(anonymous_1)","line":6,"loc":{"start":{"line":6,"column":15},"end":{"line":6,"column":27}}},"2":{"name":"Context","line":7,"loc":{"start":{"line":7,"column":4},"end":{"line":7,"column":38}}},"3":{"name":"(anonymous_3)","line":14,"loc":{"start":{"line":14,"column":48},"end":{"line":14,"column":75}}},"4":{"name":"(anonymous_4)","line":38,"loc":{"start":{"line":38,"column":43},"end":{"line":38,"column":55}}},"5":{"name":"(anonymous_5)","line":46,"loc":{"start":{"line":46,"column":45},"end":{"line":46,"column":57}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":23}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":54}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":35}},"4":{"start":{"line":6,"column":0},"end":{"line":61,"column":5}},"5":{"start":{"line":7,"column":4},"end":{"line":13,"column":5}},"6":{"start":{"line":8,"column":8},"end":{"line":8,"column":67}},"7":{"start":{"line":9,"column":8},"end":{"line":9,"column":23}},"8":{"start":{"line":10,"column":8},"end":{"line":10,"column":39}},"9":{"start":{"line":11,"column":8},"end":{"line":11,"column":34}},"10":{"start":{"line":12,"column":8},"end":{"line":12,"column":36}},"11":{"start":{"line":14,"column":4},"end":{"line":37,"column":6}},"12":{"start":{"line":15,"column":8},"end":{"line":15,"column":32}},"13":{"start":{"line":16,"column":8},"end":{"line":16,"column":36}},"14":{"start":{"line":17,"column":8},"end":{"line":31,"column":9}},"15":{"start":{"line":19,"column":12},"end":{"line":19,"column":82}},"16":{"start":{"line":20,"column":12},"end":{"line":27,"column":13}},"17":{"start":{"line":21,"column":16},"end":{"line":23,"column":17}},"18":{"start":{"line":22,"column":20},"end":{"line":22,"column":50}},"19":{"start":{"line":24,"column":16},"end":{"line":26,"column":17}},"20":{"start":{"line":25,"column":20},"end":{"line":25,"column":58}},"21":{"start":{"line":30,"column":12},"end":{"line":30,"column":68}},"22":{"start":{"line":32,"column":8},"end":{"line":32,"column":58}},"23":{"start":{"line":38,"column":4},"end":{"line":45,"column":6}},"24":{"start":{"line":39,"column":8},"end":{"line":39,"column":43}},"25":{"start":{"line":40,"column":8},"end":{"line":40,"column":69}},"26":{"start":{"line":41,"column":8},"end":{"line":41,"column":90}},"27":{"start":{"line":43,"column":8},"end":{"line":43,"column":64}},"28":{"start":{"line":44,"column":8},"end":{"line":44,"column":64}},"29":{"start":{"line":46,"column":4},"end":{"line":59,"column":6}},"30":{"start":{"line":47,"column":8},"end":{"line":47,"column":32}},"31":{"start":{"line":48,"column":8},"end":{"line":57,"column":9}},"32":{"start":{"line":50,"column":12},"end":{"line":50,"column":57}},"33":{"start":{"line":51,"column":12},"end":{"line":53,"column":13}},"34":{"start":{"line":52,"column":16},"end":{"line":52,"column":46}},"35":{"start":{"line":56,"column":12},"end":{"line":56,"column":69}},"36":{"start":{"line":58,"column":8},"end":{"line":58,"column":81}},"37":{"start":{"line":60,"column":4},"end":{"line":60,"column":19}},"38":{"start":{"line":62,"column":0},"end":{"line":62,"column":25}}},"branchMap":{"1":{"line":19,"type":"binary-expr","locations":[{"start":{"line":19,"column":38},"end":{"line":19,"column":53}},{"start":{"line":19,"column":57},"end":{"line":19,"column":80}}]},"2":{"line":20,"type":"if","locations":[{"start":{"line":20,"column":12},"end":{"line":20,"column":12}},{"start":{"line":20,"column":12},"end":{"line":20,"column":12}}]},"3":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":16},"end":{"line":21,"column":16}},{"start":{"line":21,"column":16},"end":{"line":21,"column":16}}]},"4":{"line":24,"type":"if","locations":[{"start":{"line":24,"column":16},"end":{"line":24,"column":16}},{"start":{"line":24,"column":16},"end":{"line":24,"column":16}}]},"5":{"line":40,"type":"binary-expr","locations":[{"start":{"line":40,"column":49},"end":{"line":40,"column":51}},{"start":{"line":40,"column":55},"end":{"line":40,"column":68}}]},"6":{"line":41,"type":"binary-expr","locations":[{"start":{"line":41,"column":47},"end":{"line":41,"column":49}},{"start":{"line":41,"column":53},"end":{"line":41,"column":73}},{"start":{"line":41,"column":77},"end":{"line":41,"column":89}}]},"7":{"line":43,"type":"binary-expr","locations":[{"start":{"line":43,"column":48},"end":{"line":43,"column":50}},{"start":{"line":43,"column":54},"end":{"line":43,"column":63}}]},"8":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":44},"end":{"line":44,"column":46}},{"start":{"line":44,"column":50},"end":{"line":44,"column":63}}]},"9":{"line":51,"type":"if","locations":[{"start":{"line":51,"column":12},"end":{"line":51,"column":12}},{"start":{"line":51,"column":12},"end":{"line":51,"column":12}}]},"10":{"line":51,"type":"binary-expr","locations":[{"start":{"line":51,"column":16},"end":{"line":51,"column":27}},{"start":{"line":51,"column":31},"end":{"line":51,"column":70}}]},"11":{"line":58,"type":"binary-expr","locations":[{"start":{"line":58,"column":50},"end":{"line":58,"column":67}},{"start":{"line":58,"column":71},"end":{"line":58,"column":80}}]}},"code":["///<reference path=\"..\\typings\\globals\\node\\index.d.ts\" />","\"use strict\";","var os = require(\"os\");","var ContractsModule = require(\"../Library/Contracts\");","var Logging = require(\"./Logging\");","var Context = (function () {","    function Context(packageJsonPath) {","        this.keys = new ContractsModule.Contracts.ContextTagKeys();","        this.tags = {};","        this._loadApplicationContext();","        this._loadDeviceContext();","        this._loadInternalContext();","    }","    Context.prototype._loadApplicationContext = function (packageJsonPath) {","        var version = \"unknown\";","        var description = undefined;","        try {","            // note: this should return the host package.json","            var packageJson = require(packageJsonPath || \"../../../package.json\");","            if (packageJson) {","                if (typeof packageJson.version === \"string\") {","                    version = packageJson.version;","                }","                if (typeof packageJson.description === \"string\") {","                    description = packageJson.description;","                }","            }","        }","        catch (exception) {","            Logging.info(\"unable to read app version: \", exception);","        }","        this.tags[this.keys.applicationVersion] = version;","        // TODO: consider sending it as a custom property","        //if(description) {","        //    this.tags[this.keys.applicationBuild] = description;","        //}","    };","    Context.prototype._loadDeviceContext = function () {","        this.tags[this.keys.deviceId] = \"\";","        this.tags[this.keys.cloudRoleInstance] = os && os.hostname();","        this.tags[this.keys.deviceOSVersion] = os && os.type() + \" \" + os && os.release();","        // not yet supported tags","        this.tags[\"ai.device.osArchitecture\"] = os && os.arch();","        this.tags[\"ai.device.osPlatform\"] = os && os.platform();","    };","    Context.prototype._loadInternalContext = function () {","        var version = \"unknown\";","        try {","            // note: this should return the appInsights package.json","            var packageJson = require(\"../package.json\");","            if (packageJson && typeof packageJson.version === \"string\") {","                version = packageJson.version;","            }","        }","        catch (exception) {","            Logging.info(\"unable to read SDK version: \" + exception);","        }","        this.tags[this.keys.internalSdkVersion] = \"node:\" + version || \"unknown\";","    };","    return Context;","}());","module.exports = Context;",""],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"14":1,"15":0,"16":0,"17":0,"19":0,"20":0,"21":0,"22":0,"24":0,"25":0,"30":0,"32":0,"38":1,"39":0,"40":0,"41":0,"43":0,"44":0,"46":1,"47":0,"48":0,"50":0,"51":0,"52":0,"56":0,"58":0,"60":1,"62":1}},"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/Library/Channel.js":{"path":"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/Library/Channel.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":1,"11":0,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":1,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":1,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":1,"54":0,"55":0,"56":0,"57":1,"58":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0]},"f":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"fnMap":{"1":{"name":"(anonymous_1)","line":3,"loc":{"start":{"line":3,"column":15},"end":{"line":3,"column":27}}},"2":{"name":"Channel","line":4,"loc":{"start":{"line":4,"column":4},"end":{"line":4,"column":75}}},"3":{"name":"(anonymous_3)","line":15,"loc":{"start":{"line":15,"column":39},"end":{"line":15,"column":72}}},"4":{"name":"(anonymous_4)","line":21,"loc":{"start":{"line":21,"column":29},"end":{"line":21,"column":49}}},"5":{"name":"(anonymous_5)","line":47,"loc":{"start":{"line":47,"column":45},"end":{"line":47,"column":57}}},"6":{"name":"(anonymous_6)","line":53,"loc":{"start":{"line":53,"column":36},"end":{"line":53,"column":56}}},"7":{"name":"(anonymous_7)","line":71,"loc":{"start":{"line":71,"column":36},"end":{"line":71,"column":72}}},"8":{"name":"(anonymous_8)","line":97,"loc":{"start":{"line":97,"column":35},"end":{"line":97,"column":55}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":35}},"2":{"start":{"line":3,"column":0},"end":{"line":106,"column":5}},"3":{"start":{"line":4,"column":4},"end":{"line":11,"column":5}},"4":{"start":{"line":5,"column":8},"end":{"line":5,"column":26}},"5":{"start":{"line":6,"column":8},"end":{"line":6,"column":27}},"6":{"start":{"line":7,"column":8},"end":{"line":7,"column":38}},"7":{"start":{"line":8,"column":8},"end":{"line":8,"column":42}},"8":{"start":{"line":9,"column":8},"end":{"line":9,"column":54}},"9":{"start":{"line":10,"column":8},"end":{"line":10,"column":30}},"10":{"start":{"line":15,"column":4},"end":{"line":17,"column":6}},"11":{"start":{"line":16,"column":8},"end":{"line":16,"column":59}},"12":{"start":{"line":21,"column":4},"end":{"line":52,"column":6}},"13":{"start":{"line":22,"column":8},"end":{"line":22,"column":25}},"14":{"start":{"line":24,"column":8},"end":{"line":27,"column":9}},"15":{"start":{"line":26,"column":12},"end":{"line":26,"column":19}},"16":{"start":{"line":29,"column":8},"end":{"line":32,"column":9}},"17":{"start":{"line":30,"column":12},"end":{"line":30,"column":65}},"18":{"start":{"line":31,"column":12},"end":{"line":31,"column":19}},"19":{"start":{"line":34,"column":8},"end":{"line":34,"column":48}},"20":{"start":{"line":35,"column":8},"end":{"line":37,"column":9}},"21":{"start":{"line":36,"column":12},"end":{"line":36,"column":19}},"22":{"start":{"line":39,"column":8},"end":{"line":39,"column":35}},"23":{"start":{"line":41,"column":8},"end":{"line":44,"column":9}},"24":{"start":{"line":42,"column":12},"end":{"line":42,"column":36}},"25":{"start":{"line":43,"column":12},"end":{"line":43,"column":19}},"26":{"start":{"line":46,"column":8},"end":{"line":51,"column":9}},"27":{"start":{"line":47,"column":12},"end":{"line":50,"column":43}},"28":{"start":{"line":48,"column":16},"end":{"line":48,"column":44}},"29":{"start":{"line":49,"column":16},"end":{"line":49,"column":41}},"30":{"start":{"line":53,"column":4},"end":{"line":67,"column":6}},"31":{"start":{"line":54,"column":8},"end":{"line":66,"column":9}},"32":{"start":{"line":55,"column":12},"end":{"line":55,"column":52}},"33":{"start":{"line":56,"column":12},"end":{"line":62,"column":13}},"34":{"start":{"line":57,"column":16},"end":{"line":57,"column":43}},"35":{"start":{"line":58,"column":16},"end":{"line":58,"column":39}},"36":{"start":{"line":61,"column":16},"end":{"line":61,"column":63}},"37":{"start":{"line":65,"column":12},"end":{"line":65,"column":80}},"38":{"start":{"line":71,"column":4},"end":{"line":96,"column":6}},"39":{"start":{"line":72,"column":8},"end":{"line":72,"column":52}},"40":{"start":{"line":73,"column":8},"end":{"line":86,"column":9}},"41":{"start":{"line":75,"column":12},"end":{"line":75,"column":48}},"42":{"start":{"line":77,"column":12},"end":{"line":85,"column":13}},"43":{"start":{"line":78,"column":16},"end":{"line":78,"column":48}},"44":{"start":{"line":79,"column":16},"end":{"line":81,"column":17}},"45":{"start":{"line":80,"column":20},"end":{"line":80,"column":52}},"46":{"start":{"line":84,"column":16},"end":{"line":84,"column":63}},"47":{"start":{"line":88,"column":8},"end":{"line":88,"column":35}},"48":{"start":{"line":90,"column":8},"end":{"line":90,"column":32}},"49":{"start":{"line":91,"column":8},"end":{"line":91,"column":42}},"50":{"start":{"line":92,"column":8},"end":{"line":92,"column":35}},"51":{"start":{"line":93,"column":8},"end":{"line":95,"column":9}},"52":{"start":{"line":94,"column":12},"end":{"line":94,"column":40}},"53":{"start":{"line":97,"column":4},"end":{"line":104,"column":6}},"54":{"start":{"line":98,"column":8},"end":{"line":103,"column":9}},"55":{"start":{"line":99,"column":12},"end":{"line":99,"column":44}},"56":{"start":{"line":102,"column":12},"end":{"line":102,"column":73}},"57":{"start":{"line":105,"column":4},"end":{"line":105,"column":19}},"58":{"start":{"line":107,"column":0},"end":{"line":107,"column":25}}},"branchMap":{"1":{"line":24,"type":"if","locations":[{"start":{"line":24,"column":8},"end":{"line":24,"column":8}},{"start":{"line":24,"column":8},"end":{"line":24,"column":8}}]},"2":{"line":29,"type":"if","locations":[{"start":{"line":29,"column":8},"end":{"line":29,"column":8}},{"start":{"line":29,"column":8},"end":{"line":29,"column":8}}]},"3":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":8},"end":{"line":35,"column":8}},{"start":{"line":35,"column":8},"end":{"line":35,"column":8}}]},"4":{"line":41,"type":"if","locations":[{"start":{"line":41,"column":8},"end":{"line":41,"column":8}},{"start":{"line":41,"column":8},"end":{"line":41,"column":8}}]},"5":{"line":46,"type":"if","locations":[{"start":{"line":46,"column":8},"end":{"line":46,"column":8}},{"start":{"line":46,"column":8},"end":{"line":46,"column":8}}]},"6":{"line":46,"type":"binary-expr","locations":[{"start":{"line":46,"column":12},"end":{"line":46,"column":32}},{"start":{"line":46,"column":36},"end":{"line":46,"column":59}}]},"7":{"line":54,"type":"if","locations":[{"start":{"line":54,"column":8},"end":{"line":54,"column":8}},{"start":{"line":54,"column":8},"end":{"line":54,"column":8}}]},"8":{"line":56,"type":"if","locations":[{"start":{"line":56,"column":12},"end":{"line":56,"column":12}},{"start":{"line":56,"column":12},"end":{"line":56,"column":12}}]},"9":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":8},"end":{"line":73,"column":8}},{"start":{"line":73,"column":8},"end":{"line":73,"column":8}}]},"10":{"line":77,"type":"if","locations":[{"start":{"line":77,"column":12},"end":{"line":77,"column":12}},{"start":{"line":77,"column":12},"end":{"line":77,"column":12}}]},"11":{"line":79,"type":"if","locations":[{"start":{"line":79,"column":16},"end":{"line":79,"column":16}},{"start":{"line":79,"column":16},"end":{"line":79,"column":16}}]},"12":{"line":93,"type":"if","locations":[{"start":{"line":93,"column":8},"end":{"line":93,"column":8}},{"start":{"line":93,"column":8},"end":{"line":93,"column":8}}]},"13":{"line":93,"type":"binary-expr","locations":[{"start":{"line":93,"column":12},"end":{"line":93,"column":25}},{"start":{"line":93,"column":29},"end":{"line":93,"column":59}}]}},"code":["\"use strict\";","var Logging = require(\"./Logging\");","var Channel = (function () {","    function Channel(isDisabled, getBatchSize, getBatchIntervalMs, sender) {","        this._buffer = [];","        this._lastSend = 0;","        this._isDisabled = isDisabled;","        this._getBatchSize = getBatchSize;","        this._getBatchIntervalMs = getBatchIntervalMs;","        this._sender = sender;","    }","    /**","     * Enable or disable offline mode","     */","    Channel.prototype.setOfflineMode = function (value, resendInterval) {","        this._sender.setOfflineMode(value, resendInterval);","    };","    /**","     * Add a telemetry item to the send buffer","     */","    Channel.prototype.send = function (envelope) {","        var _this = this;","        // if master off switch is set, don't send any data","        if (this._isDisabled()) {","            // Do not send/save data","            return;","        }","        // validate input","        if (!envelope) {","            Logging.warn(\"Cannot send null/undefined telemetry\");","            return;","        }","        // check if the incoming payload is too large, truncate if necessary","        var payload = this._stringify(envelope);","        if (typeof payload !== \"string\") {","            return;","        }","        // enqueue the payload","        this._buffer.push(payload);","        // flush if we would exceed the max-size limit by adding this item","        if (this._buffer.length >= this._getBatchSize()) {","            this.triggerSend(false);","            return;","        }","        // ensure an invocation timeout is set if anything is in the buffer","        if (!this._timeoutHandle && this._buffer.length > 0) {","            this._timeoutHandle = setTimeout(function () {","                _this._timeoutHandle = null;","                _this.triggerSend(false);","            }, this._getBatchIntervalMs());","        }","    };","    Channel.prototype.handleCrash = function (envelope) {","        if (envelope) {","            var payload = this._stringify(envelope);","            if (typeof payload === \"string\") {","                this._buffer.push(payload);","                this.triggerSend(true);","            }","            else {","                Logging.warn(\"Could not send crash\", envelope);","            }","        }","        else {","            Logging.warn(\"handleCrash was called with empty payload\", envelope);","        }","    };","    /**","     * Immediately send buffered data","     */","    Channel.prototype.triggerSend = function (isNodeCrashing, callback) {","        var bufferIsEmpty = this._buffer.length < 1;","        if (!bufferIsEmpty) {","            // compose an array of payloads","            var batch = this._buffer.join(\"\\n\");","            // invoke send","            if (isNodeCrashing) {","                this._sender.saveOnCrash(batch);","                if (typeof callback === \"function\") {","                    callback(\"data saved on crash\");","                }","            }","            else {","                this._sender.send(new Buffer(batch), callback);","            }","        }","        // update lastSend time to enable throttling","        this._lastSend = +new Date;","        // clear buffer","        this._buffer.length = 0;","        clearTimeout(this._timeoutHandle);","        this._timeoutHandle = null;","        if (bufferIsEmpty && typeof callback === \"function\") {","            callback(\"no data to send\");","        }","    };","    Channel.prototype._stringify = function (envelope) {","        try {","            return JSON.stringify(envelope);","        }","        catch (error) {","            Logging.warn(\"Failed to serialize payload\", error, envelope);","        }","    };","    return Channel;","}());","module.exports = Channel;",""],"l":{"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"15":1,"16":0,"21":1,"22":0,"24":0,"26":0,"29":0,"30":0,"31":0,"34":0,"35":0,"36":0,"39":0,"41":0,"42":0,"43":0,"46":0,"47":0,"48":0,"49":0,"53":1,"54":0,"55":0,"56":0,"57":0,"58":0,"61":0,"65":0,"71":1,"72":0,"73":0,"75":0,"77":0,"78":0,"79":0,"80":0,"84":0,"88":0,"90":0,"91":0,"92":0,"93":0,"94":0,"97":1,"98":0,"99":0,"102":0,"105":1,"107":1}},"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/Library/Sender.js":{"path":"/home/travis/build/npmtest/node-npmtest-applicationinsights/node_modules/applicationinsights/Library/Sender.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":1,"18":0,"19":0,"20":0,"21":1,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":1,"69":0,"70":1,"71":0,"72":0,"73":0,"74":0,"75":0,"76":1,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":1,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":1,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":1,"119":0,"120":0,"121":1,"122":1,"123":1,"124":1,"125":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0]},"f":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":14},"end":{"line":12,"column":26}}},"2":{"name":"Sender","line":13,"loc":{"start":{"line":13,"column":4},"end":{"line":13,"column":48}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":38},"end":{"line":23,"column":71}}},"4":{"name":"(anonymous_4)","line":29,"loc":{"start":{"line":29,"column":28},"end":{"line":29,"column":57}}},"5":{"name":"(anonymous_5)","line":47,"loc":{"start":{"line":47,"column":27},"end":{"line":47,"column":50}}},"6":{"name":"(anonymous_6)","line":61,"loc":{"start":{"line":61,"column":34},"end":{"line":61,"column":49}}},"7":{"name":"(anonymous_7)","line":65,"loc":{"start":{"line":65,"column":31},"end":{"line":65,"column":47}}},"8":{"name":"(anonymous_8)","line":68,"loc":{"start":{"line":68,"column":30},"end":{"line":68,"column":42}}},"9":{"name":"(anonymous_9)","line":79,"loc":{"start":{"line":79,"column":39},"end":{"line":79,"column":51}}},"10":{"name":"(anonymous_10)","line":92,"loc":{"start":{"line":92,"column":28},"end":{"line":92,"column":45}}},"11":{"name":"(anonymous_11)","line":111,"loc":{"start":{"line":111,"column":35},"end":{"line":111,"column":54}}},"12":{"name":"(anonymous_12)","line":114,"loc":{"start":{"line":114,"column":41},"end":{"line":114,"column":72}}},"13":{"name":"(anonymous_13)","line":115,"loc":{"start":{"line":115,"column":29},"end":{"line":115,"column":47}}},"14":{"name":"(anonymous_14)","line":117,"loc":{"start":{"line":117,"column":36},"end":{"line":117,"column":51}}},"15":{"name":"(anonymous_15)","line":129,"loc":{"start":{"line":129,"column":36},"end":{"line":129,"column":55}}},"16":{"name":"(anonymous_16)","line":133,"loc":{"start":{"line":133,"column":42},"end":{"line":133,"column":59}}},"17":{"name":"(anonymous_17)","line":143,"loc":{"start":{"line":143,"column":48},"end":{"line":143,"column":65}}},"18":{"name":"(anonymous_18)","line":150,"loc":{"start":{"line":150,"column":40},"end":{"line":150,"column":59}}},"19":{"name":"(anonymous_19)","line":171,"loc":{"start":{"line":171,"column":44},"end":{"line":171,"column":56}}},"20":{"name":"(anonymous_20)","line":174,"loc":{"start":{"line":174,"column":27},"end":{"line":174,"column":45}}},"21":{"name":"(anonymous_21)","line":176,"loc":{"start":{"line":176,"column":36},"end":{"line":176,"column":60}}},"22":{"name":"(anonymous_22)","line":178,"loc":{"start":{"line":178,"column":45},"end":{"line":178,"column":58}}},"23":{"name":"(anonymous_23)","line":182,"loc":{"start":{"line":182,"column":50},"end":{"line":182,"column":76}}},"24":{"name":"(anonymous_24)","line":185,"loc":{"start":{"line":185,"column":56},"end":{"line":185,"column":73}}},"25":{"name":"(anonymous_25)","line":207,"loc":{"start":{"line":207,"column":38},"end":{"line":207,"column":55}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":23}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":29}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":23}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":27}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":25}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":27}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":35}},"9":{"start":{"line":11,"column":0},"end":{"line":11,"column":76}},"10":{"start":{"line":12,"column":0},"end":{"line":217,"column":5}},"11":{"start":{"line":13,"column":4},"end":{"line":19,"column":5}},"12":{"start":{"line":14,"column":8},"end":{"line":14,"column":30}},"13":{"start":{"line":15,"column":8},"end":{"line":15,"column":36}},"14":{"start":{"line":16,"column":8},"end":{"line":16,"column":32}},"15":{"start":{"line":17,"column":8},"end":{"line":17,"column":40}},"16":{"start":{"line":18,"column":8},"end":{"line":18,"column":58}},"17":{"start":{"line":23,"column":4},"end":{"line":28,"column":6}},"18":{"start":{"line":24,"column":8},"end":{"line":24,"column":40}},"19":{"start":{"line":25,"column":8},"end":{"line":27,"column":9}},"20":{"start":{"line":26,"column":12},"end":{"line":26,"column":62}},"21":{"start":{"line":29,"column":4},"end":{"line":110,"column":6}},"22":{"start":{"line":30,"column":8},"end":{"line":30,"column":25}},"23":{"start":{"line":31,"column":8},"end":{"line":31,"column":41}},"24":{"start":{"line":32,"column":8},"end":{"line":35,"column":9}},"25":{"start":{"line":34,"column":12},"end":{"line":34,"column":49}},"26":{"start":{"line":37,"column":8},"end":{"line":37,"column":47}},"27":{"start":{"line":38,"column":8},"end":{"line":46,"column":10}},"28":{"start":{"line":47,"column":8},"end":{"line":109,"column":11}},"29":{"start":{"line":48,"column":12},"end":{"line":48,"column":36}},"30":{"start":{"line":49,"column":12},"end":{"line":57,"column":13}},"31":{"start":{"line":50,"column":16},"end":{"line":50,"column":34}},"32":{"start":{"line":51,"column":16},"end":{"line":51,"column":37}},"33":{"start":{"line":52,"column":16},"end":{"line":52,"column":67}},"34":{"start":{"line":55,"column":16},"end":{"line":55,"column":61}},"35":{"start":{"line":56,"column":16},"end":{"line":56,"column":66}},"36":{"start":{"line":58,"column":12},"end":{"line":58,"column":46}},"37":{"start":{"line":60,"column":12},"end":{"line":60,"column":85}},"38":{"start":{"line":61,"column":12},"end":{"line":88,"column":14}},"39":{"start":{"line":62,"column":16},"end":{"line":62,"column":41}},"40":{"start":{"line":64,"column":16},"end":{"line":64,"column":40}},"41":{"start":{"line":65,"column":16},"end":{"line":67,"column":19}},"42":{"start":{"line":66,"column":20},"end":{"line":66,"column":43}},"43":{"start":{"line":68,"column":16},"end":{"line":87,"column":19}},"44":{"start":{"line":69,"column":20},"end":{"line":69,"column":61}},"45":{"start":{"line":70,"column":20},"end":{"line":72,"column":21}},"46":{"start":{"line":71,"column":24},"end":{"line":71,"column":57}},"47":{"start":{"line":73,"column":20},"end":{"line":75,"column":21}},"48":{"start":{"line":74,"column":24},"end":{"line":74,"column":49}},"49":{"start":{"line":76,"column":20},"end":{"line":86,"column":21}},"50":{"start":{"line":78,"column":24},"end":{"line":85,"column":25}},"51":{"start":{"line":79,"column":28},"end":{"line":79,"column":116}},"52":{"start":{"line":79,"column":53},"end":{"line":79,"column":89}},"53":{"start":{"line":81,"column":29},"end":{"line":85,"column":25}},"54":{"start":{"line":84,"column":28},"end":{"line":84,"column":56}},"55":{"start":{"line":89,"column":12},"end":{"line":91,"column":55}},"56":{"start":{"line":92,"column":12},"end":{"line":106,"column":15}},"57":{"start":{"line":94,"column":16},"end":{"line":94,"column":48}},"58":{"start":{"line":95,"column":16},"end":{"line":95,"column":44}},"59":{"start":{"line":96,"column":16},"end":{"line":102,"column":17}},"60":{"start":{"line":97,"column":20},"end":{"line":97,"column":65}},"61":{"start":{"line":98,"column":20},"end":{"line":100,"column":21}},"62":{"start":{"line":99,"column":24},"end":{"line":99,"column":56}},"63":{"start":{"line":101,"column":20},"end":{"line":101,"column":43}},"64":{"start":{"line":103,"column":16},"end":{"line":105,"column":17}},"65":{"start":{"line":104,"column":20},"end":{"line":104,"column":48}},"66":{"start":{"line":107,"column":12},"end":{"line":107,"column":34}},"67":{"start":{"line":108,"column":12},"end":{"line":108,"column":22}},"68":{"start":{"line":111,"column":4},"end":{"line":113,"column":6}},"69":{"start":{"line":112,"column":8},"end":{"line":112,"column":39}},"70":{"start":{"line":114,"column":4},"end":{"line":125,"column":6}},"71":{"start":{"line":115,"column":8},"end":{"line":124,"column":11}},"72":{"start":{"line":116,"column":12},"end":{"line":123,"column":13}},"73":{"start":{"line":117,"column":16},"end":{"line":119,"column":19}},"74":{"start":{"line":118,"column":20},"end":{"line":118,"column":34}},"75":{"start":{"line":122,"column":16},"end":{"line":122,"column":31}},"76":{"start":{"line":129,"column":4},"end":{"line":145,"column":6}},"77":{"start":{"line":130,"column":8},"end":{"line":130,"column":25}},"78":{"start":{"line":132,"column":8},"end":{"line":132,"column":63}},"79":{"start":{"line":133,"column":8},"end":{"line":144,"column":11}},"80":{"start":{"line":134,"column":12},"end":{"line":137,"column":13}},"81":{"start":{"line":135,"column":16},"end":{"line":135,"column":44}},"82":{"start":{"line":136,"column":16},"end":{"line":136,"column":23}},"83":{"start":{"line":140,"column":12},"end":{"line":140,"column":61}},"84":{"start":{"line":141,"column":12},"end":{"line":141,"column":62}},"85":{"start":{"line":142,"column":12},"end":{"line":142,"column":80}},"86":{"start":{"line":143,"column":12},"end":{"line":143,"column":106}},"87":{"start":{"line":143,"column":67},"end":{"line":143,"column":102}},"88":{"start":{"line":150,"column":4},"end":{"line":166,"column":6}},"89":{"start":{"line":151,"column":8},"end":{"line":151,"column":63}},"90":{"start":{"line":152,"column":8},"end":{"line":165,"column":9}},"91":{"start":{"line":153,"column":12},"end":{"line":155,"column":13}},"92":{"start":{"line":154,"column":16},"end":{"line":154,"column":40}},"93":{"start":{"line":158,"column":12},"end":{"line":158,"column":61}},"94":{"start":{"line":159,"column":12},"end":{"line":159,"column":62}},"95":{"start":{"line":160,"column":12},"end":{"line":160,"column":93}},"96":{"start":{"line":161,"column":12},"end":{"line":161,"column":52}},"97":{"start":{"line":164,"column":12},"end":{"line":164,"column":39}},"98":{"start":{"line":171,"column":4},"end":{"line":206,"column":6}},"99":{"start":{"line":172,"column":8},"end":{"line":172,"column":25}},"100":{"start":{"line":173,"column":8},"end":{"line":173,"column":61}},"101":{"start":{"line":174,"column":8},"end":{"line":205,"column":11}},"102":{"start":{"line":175,"column":12},"end":{"line":204,"column":13}},"103":{"start":{"line":176,"column":16},"end":{"line":203,"column":19}},"104":{"start":{"line":177,"column":20},"end":{"line":202,"column":21}},"105":{"start":{"line":178,"column":24},"end":{"line":178,"column":113}},"106":{"start":{"line":178,"column":60},"end":{"line":178,"column":109}},"107":{"start":{"line":179,"column":24},"end":{"line":198,"column":25}},"108":{"start":{"line":180,"column":28},"end":{"line":180,"column":53}},"109":{"start":{"line":181,"column":28},"end":{"line":181,"column":73}},"110":{"start":{"line":182,"column":28},"end":{"line":197,"column":31}},"111":{"start":{"line":183,"column":32},"end":{"line":196,"column":33}},"112":{"start":{"line":185,"column":36},"end":{"line":192,"column":39}},"113":{"start":{"line":186,"column":40},"end":{"line":191,"column":41}},"114":{"start":{"line":187,"column":44},"end":{"line":187,"column":64}},"115":{"start":{"line":190,"column":44},"end":{"line":190,"column":72}},"116":{"start":{"line":195,"column":36},"end":{"line":195,"column":64}},"117":{"start":{"line":201,"column":24},"end":{"line":201,"column":52}},"118":{"start":{"line":207,"column":4},"end":{"line":211,"column":6}},"119":{"start":{"line":208,"column":8},"end":{"line":210,"column":9}},"120":{"start":{"line":209,"column":12},"end":{"line":209,"column":33}},"121":{"start":{"line":212,"column":4},"end":{"line":212,"column":26}},"122":{"start":{"line":214,"column":4},"end":{"line":214,"column":43}},"123":{"start":{"line":215,"column":4},"end":{"line":215,"column":40}},"124":{"start":{"line":216,"column":4},"end":{"line":216,"column":18}},"125":{"start":{"line":218,"column":0},"end":{"line":218,"column":24}}},"branchMap":{"1":{"line":25,"type":"if","locations":[{"start":{"line":25,"column":8},"end":{"line":25,"column":8}},{"start":{"line":25,"column":8},"end":{"line":25,"column":8}}]},"2":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":12},"end":{"line":25,"column":46}},{"start":{"line":25,"column":50},"end":{"line":25,"column":69}}]},"3":{"line":32,"type":"if","locations":[{"start":{"line":32,"column":8},"end":{"line":32,"column":8}},{"start":{"line":32,"column":8},"end":{"line":32,"column":8}}]},"4":{"line":32,"type":"binary-expr","locations":[{"start":{"line":32,"column":12},"end":{"line":32,"column":23}},{"start":{"line":32,"column":27},"end":{"line":32,"column":58}}]},"5":{"line":49,"type":"if","locations":[{"start":{"line":49,"column":12},"end":{"line":49,"column":12}},{"start":{"line":49,"column":12},"end":{"line":49,"column":12}}]},"6":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":20},"end":{"line":70,"column":20}},{"start":{"line":70,"column":20},"end":{"line":70,"column":20}}]},"7":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":20},"end":{"line":73,"column":20}},{"start":{"line":73,"column":20},"end":{"line":73,"column":20}}]},"8":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":20},"end":{"line":76,"column":20}},{"start":{"line":76,"column":20},"end":{"line":76,"column":20}}]},"9":{"line":78,"type":"if","locations":[{"start":{"line":78,"column":24},"end":{"line":78,"column":24}},{"start":{"line":78,"column":24},"end":{"line":78,"column":24}}]},"10":{"line":81,"type":"if","locations":[{"start":{"line":81,"column":29},"end":{"line":81,"column":29}},{"start":{"line":81,"column":29},"end":{"line":81,"column":29}}]},"11":{"line":81,"type":"binary-expr","locations":[{"start":{"line":81,"column":33},"end":{"line":81,"column":55}},{"start":{"line":82,"column":28},"end":{"line":82,"column":50}},{"start":{"line":83,"column":28},"end":{"line":83,"column":50}}]},"12":{"line":89,"type":"cond-expr","locations":[{"start":{"line":90,"column":16},"end":{"line":90,"column":55}},{"start":{"line":91,"column":16},"end":{"line":91,"column":54}}]},"13":{"line":96,"type":"if","locations":[{"start":{"line":96,"column":16},"end":{"line":96,"column":16}},{"start":{"line":96,"column":16},"end":{"line":96,"column":16}}]},"14":{"line":98,"type":"if","locations":[{"start":{"line":98,"column":20},"end":{"line":98,"column":20}},{"start":{"line":98,"column":20},"end":{"line":98,"column":20}}]},"15":{"line":98,"type":"binary-expr","locations":[{"start":{"line":98,"column":24},"end":{"line":98,"column":29}},{"start":{"line":98,"column":34},"end":{"line":98,"column":70}}]},"16":{"line":103,"type":"if","locations":[{"start":{"line":103,"column":16},"end":{"line":103,"column":16}},{"start":{"line":103,"column":16},"end":{"line":103,"column":16}}]},"17":{"line":116,"type":"if","locations":[{"start":{"line":116,"column":12},"end":{"line":116,"column":12}},{"start":{"line":116,"column":12},"end":{"line":116,"column":12}}]},"18":{"line":134,"type":"if","locations":[{"start":{"line":134,"column":12},"end":{"line":134,"column":12}},{"start":{"line":134,"column":12},"end":{"line":134,"column":12}}]},"19":{"line":153,"type":"if","locations":[{"start":{"line":153,"column":12},"end":{"line":153,"column":12}},{"start":{"line":153,"column":12},"end":{"line":153,"column":12}}]},"20":{"line":175,"type":"if","locations":[{"start":{"line":175,"column":12},"end":{"line":175,"column":12}},{"start":{"line":175,"column":12},"end":{"line":175,"column":12}}]},"21":{"line":177,"type":"if","locations":[{"start":{"line":177,"column":20},"end":{"line":177,"column":20}},{"start":{"line":177,"column":20},"end":{"line":177,"column":20}}]},"22":{"line":179,"type":"if","locations":[{"start":{"line":179,"column":24},"end":{"line":179,"column":24}},{"start":{"line":179,"column":24},"end":{"line":179,"column":24}}]},"23":{"line":183,"type":"if","locations":[{"start":{"line":183,"column":32},"end":{"line":183,"column":32}},{"start":{"line":183,"column":32},"end":{"line":183,"column":32}}]},"24":{"line":186,"type":"if","locations":[{"start":{"line":186,"column":40},"end":{"line":186,"column":40}},{"start":{"line":186,"column":40},"end":{"line":186,"column":40}}]},"25":{"line":208,"type":"if","locations":[{"start":{"line":208,"column":8},"end":{"line":208,"column":8}},{"start":{"line":208,"column":8},"end":{"line":208,"column":8}}]}},"code":["///<reference path=\"..\\typings\\globals\\node\\index.d.ts\" />","\"use strict\";","var fs = require(\"fs\");","var http = require(\"http\");","var https = require(\"https\");","var os = require(\"os\");","var path = require(\"path\");","var url = require(\"url\");","var zlib = require(\"zlib\");","var Logging = require(\"./Logging\");","var AutoCollectClientRequests = require(\"../AutoCollection/ClientRequests\");","var Sender = (function () {","    function Sender(getUrl, onSuccess, onError) {","        this._getUrl = getUrl;","        this._onSuccess = onSuccess;","        this._onError = onError;","        this._enableOfflineMode = false;","        this._resendInterval = Sender.WAIT_BETWEEN_RESEND;","    }","    /**","    * Enable or disable offline mode","    */","    Sender.prototype.setOfflineMode = function (value, resendInterval) {","        this._enableOfflineMode = value;","        if (typeof resendInterval === 'number' && resendInterval >= 0) {","            this._resendInterval = Math.floor(resendInterval);","        }","    };","    Sender.prototype.send = function (payload, callback) {","        var _this = this;","        var endpointUrl = this._getUrl();","        if (endpointUrl && endpointUrl.indexOf(\"//\") === 0) {","            // use https if the config did not specify a protocol","            endpointUrl = \"https:\" + endpointUrl;","        }","        // todo: investigate specifying an agent here: https://nodejs.org/api/http.html#http_class_http_agent","        var parsedUrl = url.parse(endpointUrl);","        var options = {","            host: parsedUrl.hostname,","            port: parsedUrl.port,","            path: parsedUrl.pathname,","            method: \"POST\",","            headers: {","                \"Content-Type\": \"application/x-json-stream\"","            }","        };","        zlib.gzip(payload, function (err, buffer) {","            var dataToSend = buffer;","            if (err) {","                Logging.warn(err);","                dataToSend = payload; // something went wrong so send without gzip","                options.headers[\"Content-Length\"] = payload.length;","            }","            else {","                options.headers[\"Content-Encoding\"] = \"gzip\";","                options.headers[\"Content-Length\"] = buffer.length;","            }","            Logging.info(Sender.TAG, options);","            // Ensure this request is not captured by auto-collection.","            options[AutoCollectClientRequests.disableCollectionRequestOption] = true;","            var requestCallback = function (res) {","                res.setEncoding(\"utf-8\");","                //returns empty if the data is accepted","                var responseString = \"\";","                res.on(\"data\", function (data) {","                    responseString += data;","                });","                res.on(\"end\", function () {","                    Logging.info(Sender.TAG, responseString);","                    if (typeof _this._onSuccess === \"function\") {","                        _this._onSuccess(responseString);","                    }","                    if (typeof callback === \"function\") {","                        callback(responseString);","                    }","                    if (_this._enableOfflineMode) {","                        // try to send any cached events if the user is back online","                        if (res.statusCode === 200) {","                            setTimeout(function () { return _this._sendFirstFileOnDisk(); }, _this._resendInterval);","                        }","                        else if (res.statusCode === 206 ||","                            res.statusCode === 429 ||","                            res.statusCode === 439) {","                            _this._storeToDisk(payload);","                        }","                    }","                });","            };","            var req = (parsedUrl.protocol == \"https:\") ?","                https.request(options, requestCallback) :","                http.request(options, requestCallback);","            req.on(\"error\", function (error) {","                // todo: handle error codes better (group to recoverable/non-recoverable and persist)","                Logging.warn(Sender.TAG, error);","                _this._onErrorHelper(error);","                if (typeof callback === \"function\") {","                    var errorMessage = \"error sending telemetry\";","                    if (error && (typeof error.toString === \"function\")) {","                        errorMessage = error.toString();","                    }","                    callback(errorMessage);","                }","                if (_this._enableOfflineMode) {","                    _this._storeToDisk(payload);","                }","            });","            req.write(dataToSend);","            req.end();","        });","    };","    Sender.prototype.saveOnCrash = function (payload) {","        this._storeToDiskSync(payload);","    };","    Sender.prototype._confirmDirExists = function (direcotry, callback) {","        fs.exists(direcotry, function (exists) {","            if (!exists) {","                fs.mkdir(direcotry, function (err) {","                    callback(err);","                });","            }","            else {","                callback(null);","            }","        });","    };","    /**","     * Stores the payload as a json file on disk in the temp direcotry","     */","    Sender.prototype._storeToDisk = function (payload) {","        var _this = this;","        //ensure directory is created","        var direcotry = path.join(os.tmpdir(), Sender.TEMPDIR);","        this._confirmDirExists(direcotry, function (error) {","            if (error) {","                _this._onErrorHelper(error);","                return;","            }","            //create file - file name for now is the timestamp, a better approach would be a UUID but that","            //would require an external dependency","            var fileName = new Date().getTime() + \".ai.json\";","            var fileFullPath = path.join(direcotry, fileName);","            Logging.info(Sender.TAG, \"saving data to disk at: \" + fileFullPath);","            fs.writeFile(fileFullPath, payload, function (error) { return _this._onErrorHelper(error); });","        });","    };","    /**","     * Stores the payload as a json file on disk using sync file operations","     * this is used when storing data before crashes","     */","    Sender.prototype._storeToDiskSync = function (payload) {","        var direcotry = path.join(os.tmpdir(), Sender.TEMPDIR);","        try {","            if (!fs.existsSync(direcotry)) {","                fs.mkdirSync(direcotry);","            }","            //create file - file name for now is the timestamp, a better approach would be a UUID but that","            //would require an external dependency","            var fileName = new Date().getTime() + \".ai.json\";","            var fileFullPath = path.join(direcotry, fileName);","            Logging.info(Sender.TAG, \"saving data before crash to disk at: \" + fileFullPath);","            fs.writeFileSync(fileFullPath, payload);","        }","        catch (error) {","            this._onErrorHelper(error);","        }","    };","    /**","     * Check for temp telemetry files","     * reads the first file if exist, deletes it and tries to send its load","     */","    Sender.prototype._sendFirstFileOnDisk = function () {","        var _this = this;","        var tempDir = path.join(os.tmpdir(), Sender.TEMPDIR);","        fs.exists(tempDir, function (exists) {","            if (exists) {","                fs.readdir(tempDir, function (error, files) {","                    if (!error) {","                        files = files.filter(function (f) { return path.basename(f).indexOf(\".ai.json\") > -1; });","                        if (files.length > 0) {","                            var firstFile = files[0];","                            var filePath = path.join(tempDir, firstFile);","                            fs.readFile(filePath, function (error, payload) {","                                if (!error) {","                                    // delete the file first to prevent double sending","                                    fs.unlink(filePath, function (error) {","                                        if (!error) {","                                            _this.send(payload);","                                        }","                                        else {","                                            _this._onErrorHelper(error);","                                        }","                                    });","                                }","                                else {","                                    _this._onErrorHelper(error);","                                }","                            });","                        }","                    }","                    else {","                        _this._onErrorHelper(error);","                    }","                });","            }","        });","    };","    Sender.prototype._onErrorHelper = function (error) {","        if (typeof this._onError === \"function\") {","            this._onError(error);","        }","    };","    Sender.TAG = \"Sender\";","    // the amount of time the SDK will wait between resending cached data, this buffer is to avoid any throtelling from the service side","    Sender.WAIT_BETWEEN_RESEND = 60 * 1000;","    Sender.TEMPDIR = \"appInsights-node\";","    return Sender;","}());","module.exports = Sender;",""],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"23":1,"24":0,"25":0,"26":0,"29":1,"30":0,"31":0,"32":0,"34":0,"37":0,"38":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"55":0,"56":0,"58":0,"60":0,"61":0,"62":0,"64":0,"65":0,"66":0,"68":0,"69":0,"70":0,"71":0,"73":0,"74":0,"76":0,"78":0,"79":0,"81":0,"84":0,"89":0,"92":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"101":0,"103":0,"104":0,"107":0,"108":0,"111":1,"112":0,"114":1,"115":0,"116":0,"117":0,"118":0,"122":0,"129":1,"130":0,"132":0,"133":0,"134":0,"135":0,"136":0,"140":0,"141":0,"142":0,"143":0,"150":1,"151":0,"152":0,"153":0,"154":0,"158":0,"159":0,"160":0,"161":0,"164":0,"171":1,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"185":0,"186":0,"187":0,"190":0,"195":0,"201":0,"207":1,"208":0,"209":0,"212":1,"214":1,"215":1,"216":1,"218":1}}}